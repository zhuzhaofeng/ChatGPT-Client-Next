function e(){import.meta.url,import("_").catch((()=>1))}import{r as t,w as a,o as l,a as r,d as o,M as n,b as s,c as i,e as u,f as c,g as d,h as p,i as _,j as b,k as f,t as v,u as m,l as g,F as w,m as h,B as y,D as S,n as k,p as O,C,q as x,s as j,T,v as M,I as A,S as P,x as E,y as z,O as I,z as L,A as D,E as V,G as $,H as R,J as N,L as U,K as W,N as H,P as B,Q,R as G,U as q,V as K,W as F,X as Y,Y as J,Z as X,_ as Z,$ as ee,a0 as te,a1 as ae,a2 as le,a3 as re,a4 as oe,a5 as ne,a6 as se,a7 as ie,a8 as ue,a9 as ce,aa as de,ab as pe,ac as _e,ad as be}from"./.pnpm-fe859a32.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const fe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_1-3c7fc505.webp"},Symbol.toStringTag,{value:"Module"})),ve=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_10-cdffa6ab.webp"},Symbol.toStringTag,{value:"Module"})),me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_11-d175b882.webp"},Symbol.toStringTag,{value:"Module"})),ge=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_12-aa2654f6.webp"},Symbol.toStringTag,{value:"Module"})),we=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_13-1d98f6fe.webp"},Symbol.toStringTag,{value:"Module"})),he=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_14-e9f19696.webp"},Symbol.toStringTag,{value:"Module"})),ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_15-fe682768.webp"},Symbol.toStringTag,{value:"Module"})),Se=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_16-4a96f5c0.webp"},Symbol.toStringTag,{value:"Module"})),ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_18-f6495ba0.webp"},Symbol.toStringTag,{value:"Module"})),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_19-e69559f6.webp"},Symbol.toStringTag,{value:"Module"})),xe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_20-97cc1b4e.webp"},Symbol.toStringTag,{value:"Module"})),Te=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_21-eb1491fc.webp"},Symbol.toStringTag,{value:"Module"})),Me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_22-bd4d7b79.webp"},Symbol.toStringTag,{value:"Module"})),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_23-4e88c4c3.webp"},Symbol.toStringTag,{value:"Module"})),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_24-9bd1e134.webp"},Symbol.toStringTag,{value:"Module"})),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_25-3405a612.webp"},Symbol.toStringTag,{value:"Module"})),ze=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_26-0cbf4eec.webp"},Symbol.toStringTag,{value:"Module"})),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_27-2a36802d.webp"},Symbol.toStringTag,{value:"Module"})),Le=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_28-0964a7b4.webp"},Symbol.toStringTag,{value:"Module"})),De=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_29-d15bed96.webp"},Symbol.toStringTag,{value:"Module"})),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_3-f6e09394.webp"},Symbol.toStringTag,{value:"Module"})),$e=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_30-72380853.webp"},Symbol.toStringTag,{value:"Module"})),Re=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_31-ea4dbf65.webp"},Symbol.toStringTag,{value:"Module"})),Ne=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_32-54189dcb.webp"},Symbol.toStringTag,{value:"Module"})),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_33-10c4e4c7.webp"},Symbol.toStringTag,{value:"Module"})),We=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_34-ad543579.webp"},Symbol.toStringTag,{value:"Module"})),He=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_35-7742e627.webp"},Symbol.toStringTag,{value:"Module"})),Be="/static/webp/user_avatar_36-01c052bc.webp",Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"})),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_4-e4407157.webp"},Symbol.toStringTag,{value:"Module"})),qe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_5-ed7e3439.webp"},Symbol.toStringTag,{value:"Module"})),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_6-1d9247ea.webp"},Symbol.toStringTag,{value:"Module"})),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_7-552fc562.webp"},Symbol.toStringTag,{value:"Module"})),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_8-5e8cee41.webp"},Symbol.toStringTag,{value:"Module"})),Je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_9-d4eab830.webp"},Symbol.toStringTag,{value:"Module"})),Xe=Object.assign({"./user_avatar_1.webp":fe,"./user_avatar_10.webp":ve,"./user_avatar_11.webp":me,"./user_avatar_12.webp":ge,"./user_avatar_13.webp":we,"./user_avatar_14.webp":he,"./user_avatar_15.webp":ye,"./user_avatar_16.webp":Se,"./user_avatar_17.webp":ke,"./user_avatar_18.webp":Oe,"./user_avatar_19.webp":Ce,"./user_avatar_2.webp":xe,"./user_avatar_20.webp":je,"./user_avatar_21.webp":Te,"./user_avatar_22.webp":Me,"./user_avatar_23.webp":Ae,"./user_avatar_24.webp":Pe,"./user_avatar_25.webp":Ee,"./user_avatar_26.webp":ze,"./user_avatar_27.webp":Ie,"./user_avatar_28.webp":Le,"./user_avatar_29.webp":De,"./user_avatar_3.webp":Ve,"./user_avatar_30.webp":$e,"./user_avatar_31.webp":Re,"./user_avatar_32.webp":Ne,"./user_avatar_33.webp":Ue,"./user_avatar_34.webp":We,"./user_avatar_35.webp":He,"./user_avatar_36.webp":Qe,"./user_avatar_4.webp":Ge,"./user_avatar_5.webp":qe,"./user_avatar_6.webp":Ke,"./user_avatar_7.webp":Fe,"./user_avatar_8.webp":Ye,"./user_avatar_9.webp":Je});Object.keys(Xe).forEach((e=>{e.replace("./","").replace(".webp",""),Xe[e].default}));var Ze=(e=>(e.Enter="Enter",e.ShiftEnter="Shift + Enter",e))(Ze||{});const et=["gpt-4","gpt-3.5-turbo"],tt={"gpt-4":100,"gpt-3.5-turbo":3,"gpt-4-32k-0314":0,"gpt-4-32k":0,"gpt-4-0314":0,"gpt-3.5-turbo-0301":0,"text-davinci-003":0,"text-davinci-002":0,"text-curie-001":0,"text-babbage-001":0,"text-ada-001":0,"text-davinci-001":0,"davinci-instruct-beta":0,davinci:0,"curie-instruct-beta":0,curie:0,ada:0,babbage:0};function at(e){const o=t(window.innerWidth),n=t(),s=()=>{n.value=o.value<844};a(n,(()=>{e&&e(n.value)}),{immediate:!0}),s();const i=()=>{o.value=window.innerWidth,s()};return l((()=>{window.addEventListener("resize",i)})),r((()=>{window.removeEventListener("resize",i)})),{screenWidth:o,isMobileScreen:n}}const lt=o("__AI_1024_STORE_CONFIG",(()=>{const e=t({$schema:"",api:"",modules:["CHAT"]});l((()=>{d.value=Ze.Enter,et.includes(o.value)||(o.value="gpt-3.5-turbo"),fetch("/bootstrap.json").then((e=>e.json())).then((t=>{e.value=t,_(u.value)}))}));const a=t(!1),r=t("light"),o=t("gpt-3.5-turbo"),i=t(!1),u=t(""),c=t(),d=t(Ze.ShiftEnter),p=t(.7);function _(t){i.value=!0,u.value=t;const a=`${e.value.api}/v1/card?card=${t}`;fetch(a).then((e=>e.json())).then((e=>{200!==e.code?(u.value&&n.error(e.msg),c.value=void 0):c.value=e.data})).finally((()=>{i.value=!1}))}at((e=>{a.value=e})),s((()=>{"dark"===r.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{card:u,cardInfo:c,bootstrap:e,collapsed:a,themeMode:r,chatModel:o,submitKey:d,temperature:p,setupCardLoading:i,setupCardAction:_,changeModeAction:function(e){r.value=e},toggleCollapsedAction:()=>{a.value=!a.value},changeChatModelAction:function(e){o.value=e},changeSubmitKeyAction:function(e){d.value=e},changeTemperatureAction:function(e){p.value=e<.1?.1:e>2?2:e}}}),{persist:[{storage:localStorage,paths:["themeMode","chatModel","card","submitKey","temperature","cardInfo"]}]}),rt={class:"flex items-center gap-x-4 text-primary"},ot={class:"text-primary"},nt={class:"text-info"},st={key:1,class:"text-primary"},it=(e,t)=>{const a=e.__vccOpts||e;for(const[l,r]of t)a[l]=r;return a},ut=it(i({__name:"PointsCard",setup(e){const t=lt(),a=u((()=>t.setupCardLoading));return(e,l)=>{const r=c("icon-refresh"),o=y,n=S,s=k,i=O,u=C;return d(),p(u,{class:"points-card",loading:m(a),bordered:!1},{default:_((()=>[b(i,{size:"mini",column:1},{default:_((()=>[b(n,{label:"账号"},{default:_((()=>[f("span",rt,[f("span",null,v(m(t).cardInfo?"会员":"游客"),1),b(o,{size:"mini",type:"text",onClick:l[0]||(l[0]=e=>m(t).setupCardAction(m(t).card)),shape:"circle"},{default:_((()=>[b(r)])),_:1})])])),_:1}),b(n,{label:"状态"},{default:_((()=>{var e;return[b(s,{size:"small",status:"processing",text:m(t).cardInfo?(null==(e=m(t).cardInfo)?void 0:e.enable)?"正常":"禁用":"正常"},null,8,["text"])]})),_:1}),b(n,{label:"积分"},{default:_((()=>{var e,a;return[m(t).cardInfo?(d(),g(w,{key:0},[f("span",ot,v((null==(e=m(t).cardInfo)?void 0:e.remain_points)||0),1),h(" / "),f("span",nt,v((null==(a=m(t).cardInfo)?void 0:a.points)||0),1)],64)):(d(),g("span",st,"每日五次免费调用"))]})),_:1})])),_:1})])),_:1},8,["loading"])}}}),[["__scopeId","data-v-4ec5a039"]]),ct={class:"flex items-center"},dt=i({__name:"SetupCard",setup(e){const a=lt(),r=t(""),o=u((()=>a.setupCardLoading)),n=()=>{r.value!==a.card&&a.setupCardAction(r.value)};return l((()=>{r.value=a.card})),(e,t)=>{const l=T,s=c("icon-info-circle"),i=M,u=A,v=P;return d(),p(v,{loading:m(o)},{default:_((()=>[b(u,{error:!m(a).cardInfo&&!!m(a).card,modelValue:m(r),"onUpdate:modelValue":t[0]||(t[0]=e=>x(r)?r.value=e:null),type:"password",onBlur:n,"allow-clear":"",placeholder:"请输入积分卡"},{suffix:_((()=>[f("div",ct,[m(r)?(d(),p(l,{key:0,class:"mb-0",copyable:"","copy-text":m(r)},null,8,["copy-text"])):j("",!0),!m(a).cardInfo&&m(a).card?(d(),p(i,{key:1,content:"您的积分不足、积分卡已过期或输入错误。请检查并重新输入。",position:"bottom","content-style":{maxWidth:"240px","margin-right":"16px"}},{default:_((()=>[b(s,{class:"cursor-pointer text-danger"})])),_:1})):j("",!0)])])),_:1},8,["error","modelValue"])])),_:1},8,["loading"])}}}),pt={class:"text-info"},_t=i({__name:"ChangeChatModel",setup(e){const t=lt(),a=async e=>{String(e).indexOf("gpt-4")>-1?await new Promise(((a,l)=>{z.warning({title:"提示",okText:"继续",hideCancel:!1,content:()=>b("div",{class:"whitespace-pre-wrap flex flex-col gap-y-1 leading-5 indent"},[h("请注意：由于 GPT-4 模型的成本较高，因此问题字数应保持在 1000 个 token 以下（大约 500 个汉字）。如果超出该限制，将自动截断。为了避免 AI 回答内容截断，建议尽量让 AI 一次性回复完整个问题。如果 AI 回答的内容过长，也会造成内容截断，进而引起回复不连贯。如果要使用GPT-4建议在新的会话中使用，是否确认切换至 GPT-4？")]),onOk(){a(),t.changeChatModelAction(e)},onCancel(){l()}})})):t.changeChatModelAction(e)};return(e,l)=>{const r=I,o=L;return d(),p(o,{"model-value":m(t).chatModel,onChange:a,"allow-clear":!1,placeholder:"Please select model..."},{label:_((({data:e})=>[h(v(e.value),1)])),default:_((()=>[(d(!0),g(w,null,E("ALL_MODELS"in e?e.ALL_MODELS:m(et),(t=>(d(),p(r,{key:t,value:t},{default:_((()=>[h(v(t)+" ",1),f("small",pt,"("+v(("POINTS_MAP"in e?e.POINTS_MAP:m(tt))[t])+"积分一次)",1)])),_:2},1032,["value"])))),128))])),_:1},8,["model-value"])}}}),bt="/static/svg/openai-66faffcb.svg",ft=o("__AI_1024_STORE_LAYOUT",(()=>{const e=t(!0),a=t(!1),l=t(!0),r=t("light");at((()=>{a.value=!1}));s((()=>{"dark"===r.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{collapsed:a,themeMode:r,isShowContact:e,changeModeAction:function(e){r.value=e},toggleCollapsedAction:e=>{a.value=void 0!==e?e:!a.value},headerSettingCollapsed:l,changeShowContactAction:t=>{e.value=t},toggleHeaderCollapsedAction:()=>{l.value=!l.value}}}),{persist:[{storage:localStorage,paths:["themeMode","headerSettingCollapsed"]},{storage:sessionStorage,paths:["isShowContact"]}]}),vt="/QQ.png",mt="/WeChat.png",gt=f("div",{class:"header-logo gap-x-2"},[f("img",{class:"w-6 h-6",src:bt,alt:"1024 智能 AI"}),f("h1",{class:"text-base m-0"},"1024 智能 AI")],-1),wt=f("div",null,[h(" 一款"),f("mark",null,"便捷的"),h("、"),f("mark",null,"免登录"),h("和"),f("mark",null,"无需魔法"),h("的ChatGPT工具 ")],-1),ht=f("div",null,[h(" 网址经常变更，所以使用前一定要记得先加群！！！ 群内不定时 "),f("mark",null,"发放免费积分卡")],-1),yt=f("div",null,[h(" 积分卡购买地址： "),f("a",{href:"https://www.houfaka.com/links/193B8193",target:"_blank"}," https://www.houfaka.com/links/193B8193 ")],-1),St=f("br",null,null,-1),kt=f("div",null,[h(" 平时如没有特殊需要，建议使用 "),f("b",null,"gpt-3.5-turbo"),h("即可，"),f("b",null,"gpt-3.5-turbo"),h("完全能应对大部分场景 ")],-1),Ot=f("div",null,[f("b",null,"gpt-4.0"),h(" 成本非常昂贵，是"),f("b",null,"gpt-3.5-turbo"),h("的 "),f("b",null,"30-60倍"),h("，反应时间也不如 "),f("b",null,"gpt-3.5-turbo")],-1),Ct=f("br",null,null,-1),xt=f("div",null," 大家多多支持，你们的支持才是我们的动力，即将推出语音聊天与绘画功能，敬请期待！！！ ",-1),jt=f("br",null,null,-1),Tt=f("div",{class:"grid grid-cols-2"},[f("div",{class:"flex flex-col items-center gap-y-2 py-2"},[f("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"QQ",src:vt}),f("span",{class:""},"QQ群")]),f("div",{class:"flex flex-col items-center gap-y-2 py-2"},[f("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"WeChat",src:mt}),f("span",{class:""},"微信群")])],-1),Mt={class:"flex items-center justify-center"},At=i({__name:"ContactModel",setup(e){const l=ft(),r=t(!1);a((()=>l.isShowContact),(e=>{r.value=e}),{immediate:!0});const o=()=>{r.value=!1,l.changeShowContactAction(!1)};return(e,t)=>{const a=y,l=z;return d(),p(l,{class:"contact-model","esc-to-close":!1,"mask-closable":!1,"title-align":"start",visible:m(r),"onUpdate:visible":t[0]||(t[0]=e=>x(r)?r.value=e:null),onClose:o},{title:_((()=>[gt])),footer:_((()=>[f("div",Mt,[b(a,{onClick:o,type:"primary"},{default:_((()=>[h(" 我已加入 ")])),_:1})])])),default:_((()=>[wt,ht,yt,St,kt,Ot,Ct,xt,jt,Tt])),_:1},8,["visible"])}}});function Pt(e=16){return Number(Math.random().toString().substring(3,e)+Date.now()).toString(36)}function Et(e){return{id:Pt(),date:Date.now().valueOf(),role:"user",content:"",...e}}const zt=o("__AI_1024_STORE_CHAT",(()=>{const e=lt(),a=t(new AbortController),r={id:Pt(),topic:"",sendMemory:!0,messages:[],lastUpdate:(new Date).getTime(),lastSummarizeIndex:0},o=t(),i=t([]),u=t(),c=t(!1);s((()=>{u.value=i.value.find((({id:e})=>e===o.value))}));const d=()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort());const l=Pt();i.value.unshift(D({...r,topic:"",id:l})),o.value=l},p=e=>{var t;return null==(t=u.value)?void 0:t.messages.find((({id:t})=>e===t))},_=async(t,l,r=!0)=>{var o;if(!(null==t?void 0:t.length))return void n.error("请输入您的消息");const s=await(async t=>{var a;e.chatModel;const l=((null==(a=u.value)?void 0:a.messages)||[]).filter((e=>!e.isError)),r=D(l.concat(t)).map((({role:e,content:t})=>({role:e,content:t})));return r.length>20?r.slice(r.length-20,r.length):r})({role:"user",content:t}),i={card:(null==(o=e.cardInfo)?void 0:o.enable)?e.card:void 0,messages:s,temperature:e.temperature,model:e.chatModel,is_stream:!0},d=Et({role:"user",content:t});r&&u.value.messages.push(d);const _=Et({role:"assistant",streaming:!0,content:""});u.value.messages.push(_),c.value=!0,async function(e,t){var a,l;const r=new AbortController,o=setTimeout((()=>r.abort()),10800);try{const n=`${lt().bootstrap.api}/v1/chat/completions`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",path:n},body:JSON.stringify(e),signal:r.signal});clearTimeout(o);let i="";const u=()=>{null==t||t.onMessage(i,!0),r.abort()};if(s.ok){const e=null==(a=s.body)?void 0:a.getReader(),o=new TextDecoder;for(null==(l=null==t?void 0:t.onController)||l.call(t,r);;){const a=setTimeout((()=>u()),10800),l=await(null==e?void 0:e.read());clearTimeout(a);const r=o.decode(null==l?void 0:l.value);i+=r;const n=!l||l.done;if(null==t||t.onMessage(i,!1),n)break}u()}else if(401===s.status)null==t||t.onError(new Error("Anauthorized"),s.status);else if(500===s.status){const e=await s.text();null==t||t.onError(new Error(e),s.status)}else null==t||t.onError(new Error("Stream Error"),s.status)}catch(n){null==t||t.onError(n)}}(i,{onController(e){a.value=e},onMessage(e,t){var a;if(p(_.id).content=e,l&&l(t),t&&(c.value=!1,p(_.id).streaming=!1,p(_.id).date=(new Date).valueOf(),!(null==(a=u.value)?void 0:a.topic))){const e=d.content.trim().replace(/\r/g,"");u.value.topic=e.length>30?e.slice(0,30):e}},onError(e,t){c.value=!1,"AbortError"===(null==e?void 0:e.name)||(401===t?p(_.id).content="请输入积分卡":p(_.id).content+=void 0!==t?`\n\n\`${(null==e?void 0:e.message)||"出错了，稍后重试吧"}\``:"\n\n`网络异常, 请稍后重试!`"),p(_.id).streaming=!1,p(_.id).isError=!0,p(_.id).date=(new Date).valueOf(),l&&l(!0)}})};return l((()=>{var e;(null==(e=i.value)?void 0:e.length)<1&&d()})),{session:u,sessions:i,fetching:c,currentChat:o,abortController:a,newChatAction:d,clearSessions:()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort()),z.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除所有会话信息, 此操作不可逆!!!",onOk(){i.value=[],d()}})},removeChatAction:e=>{z.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除当前选择会话?",onOk(){var t,l;const r=i.value.findIndex((({id:e})=>e==e));e!==o.value?i.value.splice(r,1):(i.value.length>1&&(o.value=i.value[0===r?r+1:r-1].id),i.value.splice(r,1),(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),0===i.value.length&&d())}})},sendMessageAction:_,messageRetryAction:(e,t)=>{var a,l;null==(a=u.value)||a.messages.splice(e,1);const r=null==(l=u.value)?void 0:l.messages[e-1];_((null==r?void 0:r.content)||"",t,!1)},changeCurrentChatAction:e=>{var t,l,r,n;(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),null==(n=null==(r=u.value)?void 0:r.messages)||n.forEach((e=>e.streaming=!1)),o.value=e},handleChangeSessionTopicAction:e=>{var t;u.value.topic=e||(null==(t=u.value)?void 0:t.topic)||""}}}),{persist:{storage:localStorage}}),It=i({__name:"ChangeSessionTopic",setup(e){const a=t(!1),l=t(""),r=zt(),o=()=>{r.handleChangeSessionTopicAction(l.value)},n=()=>{var e;l.value=(null==(e=r.session)?void 0:e.topic)||"新的聊天"};return(e,t)=>{const r=A,s=z;return d(),g(w,null,[f("div",{onClick:t[0]||(t[0]=e=>a.value=!0)},[V(e.$slots,"default")]),b(s,{onBeforeOpen:n,visible:m(a),"onUpdate:visible":t[2]||(t[2]=e=>x(a)?a.value=e:null),title:"修改会话标题","hide-cancel":"","modal-style":{"max-width":"80%"},onOk:o},{default:_((()=>[b(r,{"max-length":30,modelValue:m(l),"onUpdate:modelValue":t[1]||(t[1]=e=>x(l)?l.value=e:null),placeholder:"请输入当前会话标题"},null,8,["modelValue"])])),_:1},8,["visible"])],64)}}}),Lt={class:"h-full flex flex-col items-stretch overflow-hidden"},Dt={class:"h-14 flex items-center px-2 gap-x-2 bg-white dark:bg-dark"},Vt={class:"flex-1 truncate"},$t={class:"flex items-center justify-between p-4 bg-white dark:bg-dark text-sm"},Rt=it(i({__name:"MessageList",props:{isDrawer:Boolean},setup(e){const t=ft(),{isMobileScreen:a}=at(),l=zt(),r=e=>{t.toggleCollapsedAction(!1),l.changeCurrentChatAction(String(e))},o=(e,a)=>{({newChat(){l.newChatAction(),t.toggleCollapsedAction(!1)},close(){t.toggleCollapsedAction(!1)},editor(){n.info("编辑")},del(){l.removeChatAction(a)}})[e]()};return(n,s)=>{const i=c("icon-plus"),u=y,S=c("icon-close"),k=$,O=c("icon-close-circle"),C=c("icon-edit"),x=It,T=B,M=Q,A=R,P=N,z=$,I=ut,L=c("icon-robot-add"),D=U,V=W;return d(),g(w,null,[b(V,{width:200,class:"chat-message_list"},{default:_((()=>[f("div",Lt,[f("div",Dt,[b(u,{class:"flex-1",type:"primary",onClick:s[0]||(s[0]=e=>o("newChat"))},{icon:_((()=>[b(i)])),default:_((()=>[h(" New Chat ")])),_:1}),m(a)?(d(),p(u,{key:0,onClick:s[1]||(s[1]=e=>o("close"))},{icon:_((()=>[b(S)])),_:1})):j("",!0)]),b(k,{class:"m-0"}),b(P,{"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full px-0 flex flex-col gap-y-2"},{default:_((()=>[b(A,{"default-open-keys":["0"],"default-selected-keys":["0_1"],"selected-keys":[m(l).currentChat],onMenuItemClick:r},{default:_((()=>[(d(!0),g(w,null,E(m(l).sessions,(e=>(d(),p(M,{class:"chat-item",key:e.id},{default:_((()=>[f("span",Vt,v(e.topic||"新的聊天"),1),b(T,{size:"mini",class:"actions"},{default:_((()=>[b(u,{onClick:H((t=>o("del",e.id)),["stop"]),class:"flex items-center justify-center"},{icon:_((()=>[b(O,{class:"m-0"})])),_:2},1032,["onClick"]),b(x,null,{default:_((()=>[b(u,{class:"flex items-center justify-center"},{icon:_((()=>[b(C,{class:"m-0"})])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["selected-keys"])])),_:1}),b(z,{class:"my-2"}),b(I,{class:"is-chat"}),f("div",$t,[b(D,{type:"primary",onClick:m(l).clearSessions},{icon:_((()=>[b(L)])),default:_((()=>[h(" 清除会话 ")])),_:1},8,["onClick"]),b(D,{onClick:s[2]||(s[2]=()=>m(t).changeShowContactAction(!0)),type:"primary"},{icon:_((()=>[b(L)])),default:_((()=>[h(" 加入群聊 ")])),_:1})])])])),_:1}),e.isDrawer?j("",!0):(d(),p(k,{key:0,class:"m-0 h-full",direction:"vertical"}))],64)}}}),[["__scopeId","data-v-7184c3bf"]]),Nt=Object.freeze(Object.defineProperty({__proto__:null,default:Rt},Symbol.toStringTag,{value:"Module"})),Ut=i({__name:"MessageListDrawer",setup:e=>(e,t)=>{const a=G;return d(),p(a,{width:"100%","hide-cancel":"",placement:"left",header:!1,footer:!1,class:"message-drawer","drawer-style":{maxWidth:"350px"}},{default:_((()=>[b(Rt,{"is-drawer":""})])),_:1})}}),Wt={class:"max-w-4xl w-full mx-auto"},Ht={class:"setting-card dark:bg-dark"},Bt={class:"text-primary"},Qt={class:"setting-card dark:bg-dark"},Gt={class:"setting-card dark:bg-dark"},qt={class:"setting-card dark:bg-dark"},Kt={class:"flex flex-wrap gap-y-2 items-center"},Ft={class:"font-medium pl-4 text-primary"},Yt=i({__name:"SettingsView",setup(e){const t=lt(),a={light:"浅色模式",dark:"深色模式",auto:"跟随系统"},l=ft(),{isMobileScreen:r}=at(),o=e=>{l.changeModeAction(e)};return(e,n)=>{const s=q,i=dt,u=_t,g=K,w=F,h=c("icon-sun"),y=Y,S=c("icon-moon"),k=c("icon-relation"),O=J,C=X,x=N;return d(),p(x,{"outer-style":"flex: 1; overflow: hidden;","outer-class":["settings-wrapper",{"is-mobile":m(r)}],class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:_((()=>[f("div",Wt,[b(C,{ref:"formRef","label-col-props":{span:12},"label-align":"left",model:{},class:"w-full mt-0 flex flex-col gap-y-3"},{default:_((()=>[f("div",Ht,[b(s,{"label-col-flex":"1","label-attrs":{align:"left"},class:"mb-0 font-medium pl-4 dark:text-light-900 nowrap",field:"theme",label:"Version"},{default:_((()=>[f("span",Bt,"v"+v(m("1.0.1")),1)])),_:1})]),f("div",Qt,[b(s,{class:"mb-0",field:"card",label:"积分卡"},{default:_((()=>[b(i,{class:"w-full"})])),_:1})]),f("div",Gt,[b(s,{class:"mb-0",field:"modelConfig.model",label:"模型(Model)"},{default:_((()=>[b(u,{class:"w-full"})])),_:1}),b(s,{class:"mb-0",field:"modelConfig.temperature",label:m(r)?"随机性 (temperature)":`随机性 (temperature): ${m(t).temperature}`},{default:_((()=>[m(r)?(d(),p(g,{key:0,max:2,step:.1,min:.1,precision:.1,"model-value":m(t).temperature,onChange:m(t).changeTemperatureAction,mode:"button"},null,8,["step","min","precision","model-value","onChange"])):(d(),p(w,{key:1,"model-value":m(t).temperature,onChange:m(t).changeTemperatureAction,step:.1,min:.1,max:2},null,8,["model-value","onChange","step","min"]))])),_:1},8,["label"])]),f("div",qt,[b(s,{class:"mb-0",field:"theme",label:"主题"},{default:_((()=>[f("div",Kt,[b(O,{"model-value":m(l).themeMode,type:"button",onChange:o},{default:_((()=>[b(y,{value:"light"},{default:_((()=>[b(h)])),_:1}),b(y,{value:"dark"},{default:_((()=>[b(S)])),_:1}),b(y,{value:"auto"},{default:_((()=>[b(k)])),_:1})])),_:1},8,["model-value"]),f("span",Ft,v(a[m(l).themeMode]),1)])])),_:1}),j("",!0)])])),_:1},512)])])),_:1},8,["outer-class"])}}}),Jt=i({__name:"SettingDrawer",setup(e){const a=t(!1);return(e,t)=>{const l=y,r=G;return d(),g(w,null,[b(l,{onClick:t[0]||(t[0]=H((e=>a.value=!0),["stop"]))},{default:_((()=>[h("系统设置")])),_:1}),b(r,{visible:m(a),"onUpdate:visible":t[1]||(t[1]=e=>x(a)?a.value=e:null),width:"100%","render-to-body":!1,class:"settings-drawer",title:"设置中心","cancel-text":"关闭","drawer-style":{maxWidth:"500px"}},{default:_((()=>[b(Yt)])),_:1},8,["visible"])],64)}}}),Xt=e=>(ne("data-v-45eef094"),e=e(),se(),e),Zt=Xt((()=>f("img",{class:"w-8 h-8",src:bt,alt:"1024 智能 AI"},null,-1))),ea=Xt((()=>f("h1",{class:"text-base m-0"},"1024 智能 AI",-1))),ta=Xt((()=>f("i",{class:"flex-1"},null,-1))),aa=it(i({__name:"App",setup(e){const a=ee(),l=te(),{isMobileScreen:r}=at(),o=u((()=>a.name)),s=t(!1),i=ft(),v=e=>{try{l.push({name:e})}catch(t){n.error("路由未实现~")}},S=e=>{s.value=!1,l.push(e)};return(e,t)=>{const l=c("icon-menu"),n=y,u=c("RouterLink"),k=c("icon-message"),O=Q,C=c("icon-question-circle"),T=c("icon-info-circle"),M=R,A=c("icon-right"),P=_t,E=dt,z=ae,I=c("icon-more"),L=ut,D=le,V=re,N=$,U=c("RouterView"),W=oe;return d(),g(w,null,[b(W,{class:"w-full h-full bg-[var(--color-neutral-1)]"},{default:_((()=>{var c;return[b(V,{class:Z(["h-14 flex items-center bg-white dark:bg-dark pr-2",{"pl-2":!(null==(c=e.$route.meta)?void 0:c.hideLogoText)&&m(r)}])},{default:_((()=>{var c,y;return[!(null==(c=e.$route.meta)?void 0:c.hideLogoText)&&m(r)?(d(),p(n,{key:0,onClick:m(i).toggleCollapsedAction},{icon:_((()=>[b(l)])),_:1},8,["onClick"])):j("",!0),b(u,{to:"/",class:Z(["header-logo",[{"is-mobile":m(r)},(null==(y=e.$route.meta)?void 0:y.hideLogoText)?"justify-start pl-4":"justify-center"]])},{default:_((()=>[Zt,ea])),_:1},8,["class"]),m(r)?j("",!0):(d(),p(M,{key:1,onMenuItemClick:v,mode:"horizontal","selected-keys":[m(o)],class:"header-menu"},{default:_((()=>[b(O,{key:"Chat",class:"ml-auto"},{icon:_((()=>[b(k)])),default:_((()=>[h(" 聊天 ")])),_:1}),b(O,{key:"Tutorial"},{icon:_((()=>[b(C)])),default:_((()=>[h(" 使用说明 ")])),_:1}),b(O,{key:"About"},{icon:_((()=>[b(T)])),default:_((()=>[h(" 关于我们 ")])),_:1})])),_:1},8,["selected-keys"])),ta,m(r)?j("",!0):(d(),p(z,{key:2,class:"mr-2"},{default:_((()=>[b(n,{class:"px-1",onClick:m(i).toggleHeaderCollapsedAction},{default:_((()=>[b(A,{class:Z(["header-collapsed",{"is-collapsed":!m(i).headerSettingCollapsed}])},null,8,["class"])])),_:1},8,["onClick"]),f("div",{class:Z(["flex flex-nowrap overflow-hidden transition-all",m(i).headerSettingCollapsed?"Draw"!==e.$route.name?"w-[28.5rem]":"w-60":"w-0"])},["Draw"!==e.$route.name?(d(),p(P,{key:0,class:"w-48 mr-2"})):j("",!0),b(E,{class:"w-60"})],2)])),_:1})),b(D,{trigger:"click","popup-visible":m(s),"onUpdate:popupVisible":t[3]||(t[3]=e=>x(s)?s.value=e:null),"content-class":"mr-2"},{content:_((()=>["Chat"!==m(a).name||m(r)?(d(),p(L,{key:0})):j("",!0),f("div",{class:Z(["grid gap-3 grid-cols-2",m(r)?"grid-cols-2":"grid-cols-1"])},[m(r)?(d(),g(w,{key:0},["Chat"!==m(a).name?(d(),p(n,{key:0,onClick:t[0]||(t[0]=e=>S("chat"))},{default:_((()=>[h(" 聊天 ")])),_:1})):j("",!0),"Tutorial"!==m(a).name?(d(),p(n,{key:1,onClick:t[1]||(t[1]=e=>S("/tutorial"))},{default:_((()=>[h(" 使用说明 ")])),_:1})):j("",!0),"About"!==m(a).name?(d(),p(n,{key:2,onClick:t[2]||(t[2]=e=>S("/about"))},{default:_((()=>[h(" 关于我们 ")])),_:1})):j("",!0)],64)):j("",!0),b(Jt),b(n,{target:"_blank",href:"https://www.houfaka.com/links/193B8193"},{default:_((()=>[h(" 购买会员 ")])),_:1})],2)])),default:_((()=>[b(n,null,{default:_((()=>[b(I)])),_:1})])),_:1},8,["popup-visible"])]})),_:1},8,["class"]),b(N,{class:"m-0"}),b(W,{class:"flex-1 overflow-hidden relative"},{default:_((()=>[m(r)?j("",!0):(d(),p(U,{key:0,name:"sider"})),b(W,{class:"flex-1 overflow-hidden"},{default:_((()=>[b(U)])),_:1})])),_:1})]})),_:1}),b(Ut,{visible:m(i).collapsed,"onUpdate:visible":t[4]||(t[4]=e=>m(i).collapsed=e)},null,8,["visible"]),b(At)],64)}}}),[["__scopeId","data-v-45eef094"]]),la=(e,t)=>{const a=t.value,l=new Date(a),r=`${l.getFullYear()}-${("0"+(l.getMonth()+1)).slice(-2)}-${("0"+l.getDate()).slice(-2)} ${("0"+l.getHours()).slice(-2)}:${("0"+l.getMinutes()).slice(-2)}:${("0"+l.getSeconds()).slice(-2)}`;e.textContent=r},ra={mounted:la,updated:la},oa=(e,t)=>{const{value:a}=t,l=ft(),r=ie({size:200,padding:16,data:a,background:"dark"===l.themeMode?"#232324":"#999999",foreground:"dark"===l.themeMode?"#f4f4f4":"#000000"});e.innerHtml="",e.appendChild(r)},na={mounted:oa,updated:oa},sa={},ia=function(e,t,a){if(!t||0===t.length)return e();const l=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in sa)return;sa[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(!!a)for(let a=l.length-1;a>=0;a--){const r=l[a];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((t,a)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},ua=ue({history:ce("/"),routes:[{path:"/",name:"Home",components:{default:()=>ia((()=>import("./HomeView-06dfe899.js")),["static/js/HomeView-06dfe899.js","static/js/.pnpm-fe859a32.js","static/css/.pnpm-ae78aa0d.css","static/css/HomeView-a8dc480c.css"])},meta:{hideLogoText:!0}},{path:"/chat",name:"Chat",components:{sider:()=>ia((()=>Promise.resolve().then((()=>Nt))),void 0),default:()=>ia((()=>import("./ChatView-7c798d8f.js")),["static/js/ChatView-7c798d8f.js","static/js/.pnpm-fe859a32.js","static/css/.pnpm-ae78aa0d.css","static/css/ChatView-2f79cac1.css"])}},{path:"/tools",name:"Tools",component:()=>ia((()=>import("./ToolsView-1057cf48.js")),["static/js/ToolsView-1057cf48.js","static/js/.pnpm-fe859a32.js","static/css/.pnpm-ae78aa0d.css","static/css/ToolsView-5828883b.css"])},{path:"/tutorial",name:"Tutorial",component:()=>ia((()=>import("./TutorialView-525b324f.js")),["static/js/TutorialView-525b324f.js","static/js/.pnpm-fe859a32.js","static/css/.pnpm-ae78aa0d.css"])},{path:"/about",name:"About",component:()=>ia((()=>import("./AboutView-783bc271.js")),["static/js/AboutView-783bc271.js","static/js/.pnpm-fe859a32.js","static/css/.pnpm-ae78aa0d.css","static/css/AboutView-30426d27.css"])}]}),ca=de();ca.use(pe);const da=_e(aa);var pa;da.use(ca),da.use(ua),da.use(be),(pa=da).directive("qr",na),pa.directive("date-time",ra),da.mount("#app");export{Ze as S,it as _,e as __vite_legacy_guard,bt as a,lt as b,at as c,Be as d,vt as e,mt as f,zt as u};
