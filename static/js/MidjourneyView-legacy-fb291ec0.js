System.register(["./.pnpm-legacy-6afcc80e.js","./index-legacy-fff5d143.js","./draw-legacy-117ed963.js"],(function(a,t){"use strict";var e,o,i,r,n,l,d,s,m,p,c,u,w,g,f,x,v,b,h,y,k,_,j,C,V,I,M,P,R,z,G,S,T=document.createElement("style");return T.textContent=".draw-view[data-v-daabedee]{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important;border-radius:.5rem!important;margin-left:auto!important;margin-right:auto!important;max-width:56rem!important;padding:2.5rem!important;--tw-shadow: 0 10px 15px -3px rgb(0 0 0/.1),0 4px 6px -4px rgb(0 0 0/.1) !important;--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color) !important;-webkit-box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)!important;width:100%!important}.dark .draw-view[data-v-daabedee]{--tw-bg-opacity: 1 !important;background-color:rgba(35,35,36,var(--tw-bg-opacity))!important}.draw-view[data-v-daabedee] .arco-image-footer{background-color:rgba(0,0,0,.75);display:none!important;height:0px!important;overflow:hidden!important;padding:0!important}.draw-view[data-v-daabedee] .arco-image-footer .arco-image-footer-extra{padding-left:0!important;padding-right:0!important;width:100%!important}.draw-view[data-v-daabedee] .arco-image-footer .arco-image-footer-extra .actions{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-align:center!important;-ms-flex-align:center!important;-webkit-align-items:center!important;align-items:center!important;-ms-flex-pack:distribute!important;-webkit-justify-content:space-around!important;justify-content:space-around!important;width:100%!important}.draw-view[data-v-daabedee] .arco-image-footer .arco-image-footer-extra .actions .action{cursor:pointer!important;font-size:1.125rem!important;line-height:1.75rem!important}\n",document.head.appendChild(T),{setters:[a=>{e=a.c,o=a.r,i=a.aC,r=a.l,n=a.aD,l=a.m,d=a.e,s=a.f,m=a.g,p=a.i,c=a.h,u=a.j,w=a.u,g=a.v,f=a.x,x=a.K,v=a.k,b=a.aF,h=a.as,y=a.B,k=a.D,_=a.L,j=a.aI,C=a.W,V=a.S,I=a.M},a=>{M=a.c,P=a.b,R=a.e,z=a.O,G=a.a},a=>{S=a.u}],execute:function(){const t={class:"flex flex-col relative items-start gap-y-2 mt-10"},T={class:"flex flex-col relative items-start gap-y-2 mt-4"},A={class:"flex flex-col items-start gap-y-3"},D={class:"flex flex-col gap-1"};a("default",G(e({__name:"MidjourneyView",setup(a){const{isMobileScreen:e}=M(),G=o(!1),O=o(""),U=i({action:"generate",prompt:"",image_id:void 0}),B=P(),E=S(),F=r((()=>E.loading));n((async()=>!F.value||await new Promise(((a,t)=>{I.warning({title:"提示",okText:"离开",hideCancel:!1,content:"AI已经开始处理您的请求，此时刷新或离开页面，也会造成您的积分扣除，确定刷新或离开吗？",onOk(){a(!0)},onCancel(){t(!1)}})}))));const K=()=>{U.prompt.trim().length<1?v.error("Prompt不能为空"):E.mjGenAction(U)},L=r((()=>E.mjImage));o(!1);const W=()=>{O.value.trim().length<1?v.error("描述不能为空"):(G.value=!0,R(z(O.value,B.cardInfo?.enable?B.card:void 0)).then((a=>{200===a.status&&(U.prompt=a?.data||"")})).catch((a=>{v.error("优化失败, 请重试~")})).finally((()=>{G.value=!1})))};return(a,o)=>{const i=l("icon-exclamation-circle-fill"),r=b,n=h,v=l("icon-robot"),I=y,M=k,P=_,R=j,z=C,S=V;return d(),s(S,{class:"h-full overflow-hidden",loading:w(G)||w(F),tip:w(G)?"GPT 优化中, 请稍候...":"Midjourney绘图中,时间可能稍长, 请耐心等待..."},{default:m((()=>[p(z,{"outer-style":"height: 100%; overflow: hidden;",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:m((()=>[c("div",{class:x(["draw-view",{"is-mobile":w(e)}])},[p(r,{type:"info",class:"max-w-max mx-auto rounded-full text-xs"},{icon:m((()=>[p(i)])),default:m((()=>[u(" 根据输入关键词生成~大约需要10秒 - 10分钟左右时间, 每次生成消耗 35 积分 ")])),_:1}),c("div",t,[p(n,{loading:w(F),autofocus:"",modelValue:w(O),"onUpdate:modelValue":o[0]||(o[0]=a=>g(O)?O.value=a:null),placeholder:"请输入描述, 支持中文,通过ChatGPT3.5优化",class:"w-full","auto-size":{minRows:2,maxRows:5}},null,8,["loading","modelValue"]),p(I,{type:"outline",disabled:!w(O).trim(),onClick:W},{icon:m((()=>[p(v)])),default:m((()=>[u(" 立即优化 ")])),_:1},8,["disabled"])]),c("div",T,[p(n,{loading:w(F),autofocus:"",modelValue:w(U).prompt,"onUpdate:modelValue":o[1]||(o[1]=a=>w(U).prompt=a),placeholder:"输入 Midjourney 的 Prompt 仅支持英文",class:"w-full","auto-size":{minRows:2,maxRows:5}},null,8,["loading","modelValue"]),p(I,{disabled:!w(U).prompt.trim(),type:"primary",onClick:K},{icon:m((()=>[p(v)])),default:m((()=>[u(" 即刻生成 ")])),_:1},8,["disabled"])]),c("div",A,[p(M,{orientation:"center"},{default:m((()=>[u(" 结果区域 ")])),_:1}),p(r,{type:"warning"},{default:m((()=>[c("div",D,[p(P,{class:"text-xs font-semibold",type:"secondary"},{default:m((()=>[u(" 仅保存最近一次生成记录, 关闭浏览器不保存, 请及时下载 ")])),_:1}),p(P,{class:"text-xs",type:"secondary"},{default:m((()=>[u(" 在电脑浏览器中，可以通过右键点击图片并选择“另存为”选项将图片保存到本地。 ")])),_:1}),p(P,{class:"text-xs",type:"secondary"},{default:m((()=>[u(" 在手机浏览器中，可以通过长按图片并选择“保存图片”选项将图片保存到本地。 ")])),_:1})])])),_:1}),w(L)?.image_id?(d(),s(R,{key:0,class:"block mx-auto min-h-40",width:"300","show-loader":"",src:w(L).image_url},null,8,["src"])):f("",!0)])],2)])),_:1})])),_:1},8,["loading","tip"])}}}),[["__scopeId","data-v-daabedee"]]))}}}));
