function e(){import.meta.url,import("_").catch((()=>1))}import{r as t,w as a,o as l,a as r,d as o,M as n,b as s,c as i,e as u,f as c,g as d,h as p,i as _,j as b,k as f,t as v,u as m,l as g,F as w,m as h,B as y,D as S,n as O,p as k,C,q as T,s as j,T as x,v as A,I as E,S as M,x as P,y as I,O as z,z as L,A as D,E as V,G as R,H as $,J as U,L as N,K as H,N as B,P as W,Q as G,R as F,U as Q,V as q,W as K,X as Y,Y as J,Z as X,_ as Z,$ as ee,a0 as te,a1 as ae,a2 as le,a3 as re,a4 as oe,a5 as ne,a6 as se,a7 as ie,a8 as ue,a9 as ce,aa as de,ab as pe,ac as _e,ad as be}from"./.pnpm-209fcd37.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const fe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_1-3c7fc505.webp"},Symbol.toStringTag,{value:"Module"})),ve=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_10-cdffa6ab.webp"},Symbol.toStringTag,{value:"Module"})),me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_11-d175b882.webp"},Symbol.toStringTag,{value:"Module"})),ge=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_12-aa2654f6.webp"},Symbol.toStringTag,{value:"Module"})),we=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_13-1d98f6fe.webp"},Symbol.toStringTag,{value:"Module"})),he=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_14-e9f19696.webp"},Symbol.toStringTag,{value:"Module"})),ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_15-fe682768.webp"},Symbol.toStringTag,{value:"Module"})),Se=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_16-4a96f5c0.webp"},Symbol.toStringTag,{value:"Module"})),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_18-f6495ba0.webp"},Symbol.toStringTag,{value:"Module"})),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_19-e69559f6.webp"},Symbol.toStringTag,{value:"Module"})),Te=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_20-97cc1b4e.webp"},Symbol.toStringTag,{value:"Module"})),xe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_21-eb1491fc.webp"},Symbol.toStringTag,{value:"Module"})),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_22-bd4d7b79.webp"},Symbol.toStringTag,{value:"Module"})),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_23-4e88c4c3.webp"},Symbol.toStringTag,{value:"Module"})),Me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_24-9bd1e134.webp"},Symbol.toStringTag,{value:"Module"})),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_25-3405a612.webp"},Symbol.toStringTag,{value:"Module"})),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_26-0cbf4eec.webp"},Symbol.toStringTag,{value:"Module"})),ze=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_27-2a36802d.webp"},Symbol.toStringTag,{value:"Module"})),Le=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_28-0964a7b4.webp"},Symbol.toStringTag,{value:"Module"})),De=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_29-d15bed96.webp"},Symbol.toStringTag,{value:"Module"})),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_3-f6e09394.webp"},Symbol.toStringTag,{value:"Module"})),Re=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_30-72380853.webp"},Symbol.toStringTag,{value:"Module"})),$e=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_31-ea4dbf65.webp"},Symbol.toStringTag,{value:"Module"})),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_32-54189dcb.webp"},Symbol.toStringTag,{value:"Module"})),Ne=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_33-10c4e4c7.webp"},Symbol.toStringTag,{value:"Module"})),He=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_34-ad543579.webp"},Symbol.toStringTag,{value:"Module"})),Be=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_35-7742e627.webp"},Symbol.toStringTag,{value:"Module"})),We="/static/webp/user_avatar_36-01c052bc.webp",Ge=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"})),Fe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_4-e4407157.webp"},Symbol.toStringTag,{value:"Module"})),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_5-ed7e3439.webp"},Symbol.toStringTag,{value:"Module"})),qe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_6-1d9247ea.webp"},Symbol.toStringTag,{value:"Module"})),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_7-552fc562.webp"},Symbol.toStringTag,{value:"Module"})),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_8-5e8cee41.webp"},Symbol.toStringTag,{value:"Module"})),Je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_9-d4eab830.webp"},Symbol.toStringTag,{value:"Module"})),Xe=Object.assign({"./user_avatar_1.webp":fe,"./user_avatar_10.webp":ve,"./user_avatar_11.webp":me,"./user_avatar_12.webp":ge,"./user_avatar_13.webp":we,"./user_avatar_14.webp":he,"./user_avatar_15.webp":ye,"./user_avatar_16.webp":Se,"./user_avatar_17.webp":Oe,"./user_avatar_18.webp":ke,"./user_avatar_19.webp":Ce,"./user_avatar_2.webp":Te,"./user_avatar_20.webp":je,"./user_avatar_21.webp":xe,"./user_avatar_22.webp":Ae,"./user_avatar_23.webp":Ee,"./user_avatar_24.webp":Me,"./user_avatar_25.webp":Pe,"./user_avatar_26.webp":Ie,"./user_avatar_27.webp":ze,"./user_avatar_28.webp":Le,"./user_avatar_29.webp":De,"./user_avatar_3.webp":Ve,"./user_avatar_30.webp":Re,"./user_avatar_31.webp":$e,"./user_avatar_32.webp":Ue,"./user_avatar_33.webp":Ne,"./user_avatar_34.webp":He,"./user_avatar_35.webp":Be,"./user_avatar_36.webp":Ge,"./user_avatar_4.webp":Fe,"./user_avatar_5.webp":Qe,"./user_avatar_6.webp":qe,"./user_avatar_7.webp":Ke,"./user_avatar_8.webp":Ye,"./user_avatar_9.webp":Je});Object.keys(Xe).forEach((e=>{e.replace("./","").replace(".webp",""),Xe[e].default}));var Ze=(e=>(e.Enter="Enter",e.ShiftEnter="Shift + Enter",e))(Ze||{});const et=["gpt-4","gpt-3.5-turbo"],tt={"gpt-4":100,"gpt-3.5-turbo":3,"gpt-4-32k-0314":0,"gpt-4-32k":0,"gpt-4-0314":0,"gpt-3.5-turbo-0301":0,"text-davinci-003":0,"text-davinci-002":0,"text-curie-001":0,"text-babbage-001":0,"text-ada-001":0,"text-davinci-001":0,"davinci-instruct-beta":0,davinci:0,"curie-instruct-beta":0,curie:0,ada:0,babbage:0},at=[{tag:"未来科技",keywords:"高科技、未来技术、智能化、机器人、自动化、人工智能、机器学习"},{tag:"自然生态",keywords:"大自然、环境保护、生态平衡、气候变化、可持续发展、生物多样性"},{tag:"艺术文化",keywords:"艺术创作、绘画、摄影、雕塑、老文明、历史遗迹、传统手工艺、博物馆"},{tag:"时尚美妆",keywords:"时尚、美妆、个人风格、服装设计、时装周、红毯盛典"},{tag:"美食文化",keywords:"食品、美食文化、烹饪技艺、餐饮业、营养健康、美食分享"},{tag:"旅游文化",keywords:"旅游、景点、旅行体验、文化交流、民俗风情、地方特色"},{tag:"数字化生活",keywords:"社交媒体、数字化、网络文化、在线教育、游戏娱乐、移动支付"},{tag:"娱乐休闲",keywords:"电影、电视剧、综艺节目、音乐会、演唱会、运动会"},{tag:"商业经济",keywords:"商业、经济、金融、股票、基金、保险、创业、创新、投资、贸易"},{tag:"教育培训",keywords:"教育、培训、学习、教育科技、校园生活、学生社团、研究生活"},{tag:"科学研究",keywords:"科学、研究、实验室、科学家、科学成果、学术交流、科学普及"},{tag:"数字艺术",keywords:"数码艺术、VR艺术、游戏美术、互动媒体、AR/VR技术"}];function lt(e){const o=t(window.innerWidth),n=t(),s=()=>{n.value=o.value<844};a(n,(()=>{e&&e(n.value)}),{immediate:!0}),s();const i=()=>{o.value=window.innerWidth,s()};return l((()=>{window.addEventListener("resize",i)})),r((()=>{window.removeEventListener("resize",i)})),{screenWidth:o,isMobileScreen:n}}const rt=o("__AI_1024_STORE_CONFIG",(()=>{const e=t({$schema:"",api:"",modules:["CHAT"]});l((()=>{d.value=Ze.Enter,et.includes(o.value)||(o.value="gpt-3.5-turbo"),fetch("/bootstrap.json").then((e=>e.json())).then((t=>{e.value=t,_(u.value)}))}));const a=t(!1),r=t("light"),o=t("gpt-3.5-turbo"),i=t(!1),u=t(""),c=t(),d=t(Ze.ShiftEnter),p=t(.7);function _(t){i.value=!0,u.value=t;const a=`${e.value.api}/v1/card?card=${t}`;fetch(a).then((e=>e.json())).then((e=>{200!==e.code?(u.value&&n.error(e.msg),c.value=void 0):c.value=e.data})).finally((()=>{i.value=!1}))}lt((e=>{a.value=e})),s((()=>{"dark"===r.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{card:u,cardInfo:c,bootstrap:e,collapsed:a,themeMode:r,chatModel:o,submitKey:d,temperature:p,setupCardLoading:i,setupCardAction:_,changeModeAction:function(e){r.value=e},toggleCollapsedAction:()=>{a.value=!a.value},changeChatModelAction:function(e){o.value=e},changeSubmitKeyAction:function(e){d.value=e},changeTemperatureAction:function(e){p.value=e<.1?.1:e>2?2:e}}}),{persist:[{storage:localStorage,paths:["themeMode","chatModel","card","submitKey","temperature","cardInfo"]}]}),ot={class:"flex items-center gap-x-4 text-primary"},nt={class:"text-primary"},st={class:"text-info"},it={key:1,class:"text-primary"},ut=(e,t)=>{const a=e.__vccOpts||e;for(const[l,r]of t)a[l]=r;return a},ct=ut(i({__name:"PointsCard",setup(e){const t=rt(),a=u((()=>t.setupCardLoading));return(e,l)=>{const r=c("icon-refresh"),o=y,n=S,s=O,i=k,u=C;return d(),p(u,{class:"points-card",loading:m(a),bordered:!1},{default:_((()=>[b(i,{size:"mini",column:1},{default:_((()=>[b(n,{label:"账号"},{default:_((()=>[f("span",ot,[f("span",null,v(m(t).cardInfo?"会员":"游客"),1),b(o,{size:"mini",type:"text",onClick:l[0]||(l[0]=e=>m(t).setupCardAction(m(t).card)),shape:"circle"},{default:_((()=>[b(r)])),_:1})])])),_:1}),b(n,{label:"状态"},{default:_((()=>{var e;return[b(s,{size:"small",status:"processing",text:m(t).cardInfo?(null==(e=m(t).cardInfo)?void 0:e.enable)?"正常":"禁用":"正常"},null,8,["text"])]})),_:1}),b(n,{label:"积分"},{default:_((()=>{var e,a;return[m(t).cardInfo?(d(),g(w,{key:0},[f("span",nt,v((null==(e=m(t).cardInfo)?void 0:e.remain_points)||0),1),h(" / "),f("span",st,v((null==(a=m(t).cardInfo)?void 0:a.points)||0),1)],64)):(d(),g("span",it,"每日五次免费调用"))]})),_:1})])),_:1})])),_:1},8,["loading"])}}}),[["__scopeId","data-v-4ec5a039"]]),dt={class:"flex items-center"},pt=i({__name:"SetupCard",setup(e){const a=rt(),r=t(""),o=u((()=>a.setupCardLoading)),n=()=>{r.value!==a.card&&a.setupCardAction(r.value)};return l((()=>{r.value=a.card})),(e,t)=>{const l=x,s=c("icon-info-circle"),i=A,u=E,v=M;return d(),p(v,{loading:m(o)},{default:_((()=>[b(u,{error:!m(a).cardInfo&&!!m(a).card,modelValue:m(r),"onUpdate:modelValue":t[0]||(t[0]=e=>T(r)?r.value=e:null),type:"password",onBlur:n,"allow-clear":"",placeholder:"请输入积分卡"},{suffix:_((()=>[f("div",dt,[m(r)?(d(),p(l,{key:0,class:"mb-0",copyable:"","copy-text":m(r)},null,8,["copy-text"])):j("",!0),!m(a).cardInfo&&m(a).card?(d(),p(i,{key:1,content:"您的积分不足、积分卡已过期或输入错误。请检查并重新输入。",position:"bottom","content-style":{maxWidth:"240px","margin-right":"16px"}},{default:_((()=>[b(s,{class:"cursor-pointer text-danger"})])),_:1})):j("",!0)])])),_:1},8,["error","modelValue"])])),_:1},8,["loading"])}}}),_t={class:"text-info"},bt=i({__name:"ChangeChatModel",setup(e){const t=rt(),a=async e=>{String(e).indexOf("gpt-4")>-1?await new Promise(((a,l)=>{I.warning({title:"提示",okText:"继续",hideCancel:!1,content:()=>b("div",{class:"whitespace-pre-wrap flex flex-col gap-y-1 leading-5 indent"},[h("请注意：由于 GPT-4 模型的成本较高，因此问题字数应保持在 1000 个 token 以下（大约 500 个汉字）。如果超出该限制，将自动截断。为了避免 AI 回答内容截断，建议尽量让 AI 一次性回复完整个问题。如果 AI 回答的内容过长，也会造成内容截断，进而引起回复不连贯。如果要使用GPT-4建议在新的会话中使用，是否确认切换至 GPT-4？")]),onOk(){a(),t.changeChatModelAction(e)},onCancel(){l()}})})):t.changeChatModelAction(e)};return(e,l)=>{const r=z,o=L;return d(),p(o,{"model-value":m(t).chatModel,onChange:a,"allow-clear":!1,placeholder:"Please select model..."},{label:_((({data:e})=>[h(v(e.value),1)])),default:_((()=>[(d(!0),g(w,null,P("ALL_MODELS"in e?e.ALL_MODELS:m(et),(t=>(d(),p(r,{key:t,value:t},{default:_((()=>[h(v(t)+" ",1),f("small",_t,"("+v(("POINTS_MAP"in e?e.POINTS_MAP:m(tt))[t])+"积分一次)",1)])),_:2},1032,["value"])))),128))])),_:1},8,["model-value"])}}}),ft="/static/svg/openai-66faffcb.svg",vt=o("__AI_1024_STORE_LAYOUT",(()=>{const e=t(!0),a=t(!1),l=t(!0),r=t("light");lt((()=>{a.value=!1}));s((()=>{"dark"===r.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{collapsed:a,themeMode:r,isShowContact:e,changeModeAction:function(e){r.value=e},toggleCollapsedAction:e=>{a.value=void 0!==e?e:!a.value},headerSettingCollapsed:l,changeShowContactAction:t=>{e.value=t},toggleHeaderCollapsedAction:()=>{l.value=!l.value}}}),{persist:[{storage:localStorage,paths:["themeMode","headerSettingCollapsed"]},{storage:sessionStorage,paths:["isShowContact"]}]}),mt="/QQ.png",gt="/WeChat.png",wt=f("div",{class:"header-logo gap-x-2"},[f("img",{class:"w-6 h-6",src:ft,alt:"1024 智能 AI"}),f("h1",{class:"text-base m-0"},"1024 智能 AI")],-1),ht=f("div",null,[h(" 一款"),f("mark",null,"便捷的"),h("、"),f("mark",null,"免登录"),h("和"),f("mark",null,"无需魔法"),h("的ChatGPT工具 ")],-1),yt=f("div",null,[h(" 网址经常变更，所以使用前一定要记得先加群！！！ 群内不定时 "),f("mark",null,"发放免费积分卡")],-1),St=f("div",null,[h(" 积分卡购买地址： "),f("a",{href:"https://www.houfaka.com/links/193B8193",target:"_blank"}," https://www.houfaka.com/links/193B8193 ")],-1),Ot=f("br",null,null,-1),kt=f("div",null,[h(" 平时如没有特殊需要，建议使用 "),f("b",null,"gpt-3.5-turbo"),h("即可，"),f("b",null,"gpt-3.5-turbo"),h("完全能应对大部分场景 ")],-1),Ct=f("div",null,[f("b",null,"gpt-4.0"),h(" 成本非常昂贵，是"),f("b",null,"gpt-3.5-turbo"),h("的 "),f("b",null,"30-60倍"),h("，反应时间也不如 "),f("b",null,"gpt-3.5-turbo")],-1),Tt=f("br",null,null,-1),jt=f("div",null," 大家多多支持，你们的支持才是我们的动力，即将推出语音聊天与绘画功能，敬请期待！！！ ",-1),xt=f("br",null,null,-1),At=f("div",{class:"grid grid-cols-2"},[f("div",{class:"flex flex-col items-center gap-y-2 py-2"},[f("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"QQ",src:mt}),f("span",{class:""},"QQ群")]),f("div",{class:"flex flex-col items-center gap-y-2 py-2"},[f("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"WeChat",src:gt}),f("span",{class:""},"微信群")])],-1),Et={class:"flex items-center justify-center"},Mt=i({__name:"ContactModel",setup(e){const l=vt(),r=t(!1);a((()=>l.isShowContact),(e=>{r.value=e}),{immediate:!0});const o=()=>{r.value=!1,l.changeShowContactAction(!1)};return(e,t)=>{const a=y,l=I;return d(),p(l,{class:"contact-model","esc-to-close":!1,"mask-closable":!1,"title-align":"start",visible:m(r),"onUpdate:visible":t[0]||(t[0]=e=>T(r)?r.value=e:null),onClose:o},{title:_((()=>[wt])),footer:_((()=>[f("div",Et,[b(a,{onClick:o,type:"primary"},{default:_((()=>[h(" 我已加入 ")])),_:1})])])),default:_((()=>[ht,yt,St,Ot,kt,Ct,Tt,jt,xt,At])),_:1},8,["visible"])}}});function Pt(e=16){return Number(Math.random().toString().substring(3,e)+Date.now()).toString(36)}function It(e){return{id:Pt(),date:Date.now().valueOf(),role:"user",content:"",...e}}async function zt(e,t){const a=new AbortController,l=setTimeout((()=>a.abort()),3e5);try{const r=`${rt().bootstrap.api}/v1/images/generations`,o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:a.signal});if(clearTimeout(l),o.ok){const e=await o.json();500===e.code?null==t||t.onError(new Error(e.msg),e.code):null==t||t.onSuccess(e)}else if(401===o.status)null==t||t.onError(new Error("Anauthorized"),o.status);else if(500===o.status){const e=await o.json();null==t||t.onError(new Error(e),o.status)}else null==t||t.onError(new Error("Stream Error"),o.status)}catch(r){null==t||t.onError(r)}}const Lt=o("__AI_1024_STORE_CHAT",(()=>{const e=rt(),a=t(new AbortController),r={id:Pt(),topic:"",sendMemory:!0,messages:[],lastUpdate:(new Date).getTime(),lastSummarizeIndex:0},o=t(),i=t([]),u=t(),c=t(!1);s((()=>{u.value=i.value.find((({id:e})=>e===o.value))}));const d=()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort());const l=Pt();i.value.unshift(D({...r,topic:"",id:l})),o.value=l},p=e=>{var t;return null==(t=u.value)?void 0:t.messages.find((({id:t})=>e===t))},_=async(t,l,r=!0)=>{var o;if(!(null==t?void 0:t.length))return void n.error("请输入您的消息");const s=await(async t=>{var a;e.chatModel;const l=((null==(a=u.value)?void 0:a.messages)||[]).filter((e=>!e.isError)),r=D(l.concat(t)).map((({role:e,content:t})=>({role:e,content:t})));return r.length>20?r.slice(r.length-20,r.length):r})({role:"user",content:t}),i={card:(null==(o=e.cardInfo)?void 0:o.enable)?e.card:void 0,messages:s,temperature:e.temperature,model:e.chatModel,is_stream:!0},d=It({role:"user",content:t});r&&u.value.messages.push(d);const _=It({role:"assistant",streaming:!0,content:""});u.value.messages.push(_),c.value=!0,async function(e,t){var a,l;const r=new AbortController,o=setTimeout((()=>r.abort()),10800);try{const n=`${rt().bootstrap.api}/v1/chat/completions`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",path:n},body:JSON.stringify(e),signal:r.signal});clearTimeout(o);let i="";const u=()=>{null==t||t.onMessage(i,!0),r.abort()};if(s.ok){const e=null==(a=s.body)?void 0:a.getReader(),o=new TextDecoder;for(null==(l=null==t?void 0:t.onController)||l.call(t,r);;){const a=setTimeout((()=>u()),10800),l=await(null==e?void 0:e.read());clearTimeout(a);const r=o.decode(null==l?void 0:l.value);i+=r;const n=!l||l.done;if(null==t||t.onMessage(i,!1),n)break}u()}else if(401===s.status)null==t||t.onError(new Error("Anauthorized"),s.status);else if(500===s.status){const e=await s.text();null==t||t.onError(new Error(e),s.status)}else null==t||t.onError(new Error("Stream Error"),s.status)}catch(n){null==t||t.onError(n)}}(i,{onController(e){a.value=e},onMessage(e,t){var a;if(p(_.id).content=e,l&&l(t),t&&(c.value=!1,p(_.id).streaming=!1,p(_.id).date=(new Date).valueOf(),!(null==(a=u.value)?void 0:a.topic))){const e=d.content.trim().replace(/\r/g,"");u.value.topic=e.length>30?e.slice(0,30):e}},onError(e,t){c.value=!1,"AbortError"===(null==e?void 0:e.name)||(401===t?p(_.id).content="请输入积分卡":p(_.id).content+=void 0!==t?`\n\n\`${(null==e?void 0:e.message)||"出错了，稍后重试吧"}\``:"\n\n`网络异常, 请稍后重试!`"),p(_.id).streaming=!1,p(_.id).isError=!0,p(_.id).date=(new Date).valueOf(),l&&l(!0)}})};return l((()=>{var e;(null==(e=i.value)?void 0:e.length)<1&&d()})),{session:u,sessions:i,fetching:c,currentChat:o,abortController:a,newChatAction:d,clearSessions:()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort()),I.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除所有会话信息, 此操作不可逆!!!",onOk(){i.value=[],d()}})},removeChatAction:e=>{I.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除当前选择会话?",onOk(){var t,l;const r=i.value.findIndex((({id:e})=>e==e));e!==o.value?i.value.splice(r,1):(i.value.length>1&&(o.value=i.value[0===r?r+1:r-1].id),i.value.splice(r,1),(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),0===i.value.length&&d())}})},sendMessageAction:_,messageRetryAction:(e,t)=>{var a,l;null==(a=u.value)||a.messages.splice(e,1);const r=null==(l=u.value)?void 0:l.messages[e-1];_((null==r?void 0:r.content)||"",t,!1)},changeCurrentChatAction:e=>{var t,l,r,n;(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),null==(n=null==(r=u.value)?void 0:r.messages)||n.forEach((e=>e.streaming=!1)),o.value=e},handleChangeSessionTopicAction:e=>{var t;u.value.topic=e||(null==(t=u.value)?void 0:t.topic)||""}}}),{persist:{storage:localStorage}}),Dt=i({__name:"ChangeSessionTopic",setup(e){const a=t(!1),l=t(""),r=Lt(),o=()=>{r.handleChangeSessionTopicAction(l.value)},n=()=>{var e;l.value=(null==(e=r.session)?void 0:e.topic)||"新的聊天"};return(e,t)=>{const r=E,s=I;return d(),g(w,null,[f("div",{onClick:t[0]||(t[0]=e=>a.value=!0)},[V(e.$slots,"default")]),b(s,{onBeforeOpen:n,visible:m(a),"onUpdate:visible":t[2]||(t[2]=e=>T(a)?a.value=e:null),title:"修改会话标题","hide-cancel":"","modal-style":{"max-width":"80%"},onOk:o},{default:_((()=>[b(r,{"max-length":30,modelValue:m(l),"onUpdate:modelValue":t[1]||(t[1]=e=>T(l)?l.value=e:null),placeholder:"请输入当前会话标题"},null,8,["modelValue"])])),_:1},8,["visible"])],64)}}}),Vt={class:"h-full flex flex-col items-stretch overflow-hidden"},Rt={class:"h-14 flex items-center px-2 gap-x-2 bg-white dark:bg-dark"},$t={class:"flex-1 truncate"},Ut={class:"flex items-center justify-between p-4 bg-white dark:bg-dark text-sm"},Nt=ut(i({__name:"MessageList",props:{isDrawer:Boolean},setup(e){const t=vt(),{isMobileScreen:a}=lt(),l=Lt(),r=e=>{t.toggleCollapsedAction(!1),l.changeCurrentChatAction(String(e))},o=(e,a)=>{({newChat(){l.newChatAction(),t.toggleCollapsedAction(!1)},close(){t.toggleCollapsedAction(!1)},editor(){n.info("编辑")},del(){l.removeChatAction(a)}})[e]()};return(n,s)=>{const i=c("icon-plus"),u=y,S=c("icon-close"),O=R,k=c("icon-close-circle"),C=c("icon-edit"),T=Dt,x=W,A=G,E=$,M=U,I=R,z=ct,L=c("icon-robot-add"),D=N,V=H;return d(),g(w,null,[b(V,{width:200,class:"chat-message_list"},{default:_((()=>[f("div",Vt,[f("div",Rt,[b(u,{class:"flex-1",type:"primary",onClick:s[0]||(s[0]=e=>o("newChat"))},{icon:_((()=>[b(i)])),default:_((()=>[h(" New Chat ")])),_:1}),m(a)?(d(),p(u,{key:0,onClick:s[1]||(s[1]=e=>o("close"))},{icon:_((()=>[b(S)])),_:1})):j("",!0)]),b(O,{class:"m-0"}),b(M,{"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full px-0 flex flex-col gap-y-2"},{default:_((()=>[b(E,{"default-open-keys":["0"],"default-selected-keys":["0_1"],"selected-keys":[m(l).currentChat],onMenuItemClick:r},{default:_((()=>[(d(!0),g(w,null,P(m(l).sessions,(e=>(d(),p(A,{class:"chat-item",key:e.id},{default:_((()=>[f("span",$t,v(e.topic||"新的聊天"),1),b(x,{size:"mini",class:"actions"},{default:_((()=>[b(u,{onClick:B((t=>o("del",e.id)),["stop"]),class:"flex items-center justify-center"},{icon:_((()=>[b(k,{class:"m-0"})])),_:2},1032,["onClick"]),b(T,null,{default:_((()=>[b(u,{class:"flex items-center justify-center"},{icon:_((()=>[b(C,{class:"m-0"})])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["selected-keys"])])),_:1}),b(I,{class:"my-2"}),b(z,{class:"is-chat"}),f("div",Ut,[b(D,{type:"primary",onClick:m(l).clearSessions},{icon:_((()=>[b(L)])),default:_((()=>[h(" 清除会话 ")])),_:1},8,["onClick"]),b(D,{onClick:s[2]||(s[2]=()=>m(t).changeShowContactAction(!0)),type:"primary"},{icon:_((()=>[b(L)])),default:_((()=>[h(" 加入群聊 ")])),_:1})])])])),_:1}),e.isDrawer?j("",!0):(d(),p(O,{key:0,class:"m-0 h-full",direction:"vertical"}))],64)}}}),[["__scopeId","data-v-7184c3bf"]]),Ht=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"})),Bt=i({__name:"MessageListDrawer",setup:e=>(e,t)=>{const a=F;return d(),p(a,{width:"100%","hide-cancel":"",placement:"left",header:!1,footer:!1,class:"message-drawer","drawer-style":{maxWidth:"350px"}},{default:_((()=>[b(Nt,{"is-drawer":""})])),_:1})}}),Wt={class:"max-w-4xl w-full mx-auto"},Gt={class:"setting-card dark:bg-dark"},Ft={class:"text-primary"},Qt={class:"setting-card dark:bg-dark"},qt={class:"setting-card dark:bg-dark"},Kt={class:"setting-card dark:bg-dark"},Yt={class:"flex flex-wrap gap-y-2 items-center"},Jt={class:"font-medium pl-4 text-primary"},Xt=i({__name:"SettingsView",setup(e){const t=rt(),a={light:"浅色模式",dark:"深色模式",auto:"跟随系统"},l=vt(),{isMobileScreen:r}=lt(),o=e=>{l.changeModeAction(e)};return(e,n)=>{const s=Q,i=pt,u=bt,g=q,w=K,h=c("icon-sun"),y=Y,S=c("icon-moon"),O=c("icon-relation"),k=J,C=X,T=U;return d(),p(T,{"outer-style":"flex: 1; overflow: hidden;","outer-class":["settings-wrapper",{"is-mobile":m(r)}],class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:_((()=>[f("div",Wt,[b(C,{ref:"formRef","label-col-props":{span:12},"label-align":"left",model:{},class:"w-full mt-0 flex flex-col gap-y-3"},{default:_((()=>[f("div",Gt,[b(s,{"label-col-flex":"1","label-attrs":{align:"left"},class:"mb-0 font-medium pl-4 dark:text-light-900 nowrap",field:"theme",label:"Version"},{default:_((()=>[f("span",Ft,"v"+v(m("1.0.1")),1)])),_:1})]),f("div",Qt,[b(s,{class:"mb-0",field:"card",label:"积分卡"},{default:_((()=>[b(i,{class:"w-full"})])),_:1})]),f("div",qt,[b(s,{class:"mb-0",field:"modelConfig.model",label:"模型(Model)"},{default:_((()=>[b(u,{class:"w-full"})])),_:1}),b(s,{class:"mb-0",field:"modelConfig.temperature",label:m(r)?"随机性 (temperature)":`随机性 (temperature): ${m(t).temperature}`},{default:_((()=>[m(r)?(d(),p(g,{key:0,max:2,step:.1,min:.1,precision:.1,"model-value":m(t).temperature,onChange:m(t).changeTemperatureAction,mode:"button"},null,8,["step","min","precision","model-value","onChange"])):(d(),p(w,{key:1,"model-value":m(t).temperature,onChange:m(t).changeTemperatureAction,step:.1,min:.1,max:2},null,8,["model-value","onChange","step","min"]))])),_:1},8,["label"])]),f("div",Kt,[b(s,{class:"mb-0",field:"theme",label:"主题"},{default:_((()=>[f("div",Yt,[b(k,{"model-value":m(l).themeMode,type:"button",onChange:o},{default:_((()=>[b(y,{value:"light"},{default:_((()=>[b(h)])),_:1}),b(y,{value:"dark"},{default:_((()=>[b(S)])),_:1}),b(y,{value:"auto"},{default:_((()=>[b(O)])),_:1})])),_:1},8,["model-value"]),f("span",Jt,v(a[m(l).themeMode]),1)])])),_:1}),j("",!0)])])),_:1},512)])])),_:1},8,["outer-class"])}}}),Zt=i({__name:"SettingDrawer",setup(e){const a=t(!1);return(e,t)=>{const l=y,r=F;return d(),g(w,null,[b(l,{onClick:t[0]||(t[0]=B((e=>a.value=!0),["stop"]))},{default:_((()=>[h("系统设置")])),_:1}),b(r,{visible:m(a),"onUpdate:visible":t[1]||(t[1]=e=>T(a)?a.value=e:null),width:"100%","render-to-body":!1,class:"settings-drawer",title:"设置中心","cancel-text":"关闭","drawer-style":{maxWidth:"500px"}},{default:_((()=>[b(Xt)])),_:1},8,["visible"])],64)}}}),ea=e=>(ne("data-v-437b5c5c"),e=e(),se(),e),ta=ea((()=>f("img",{class:"w-8 h-8",src:ft,alt:"1024 智能 AI"},null,-1))),aa=ea((()=>f("h1",{class:"text-base m-0"},"1024 智能 AI",-1))),la=ea((()=>f("i",{class:"flex-1"},null,-1))),ra=ut(i({__name:"App",setup(e){const{VITE_FEATURES:a}={VITE_BASE_URL:"/",VITE_PORT:"3000",VITE_DROP_CONSOLE:"true",VITE_FEATURES:"CHAT",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},l=ee(),r=te(),{isMobileScreen:o}=lt(),s=u((()=>l.name)),i=t(!1),v=vt(),S=e=>{try{r.push({name:e})}catch(t){n.error("路由未实现~")}},O=e=>{i.value=!1,r.push(e)};return(e,t)=>{const r=c("icon-menu"),n=y,u=c("RouterLink"),k=c("icon-message"),C=G,x=c("icon-pen-fill"),A=c("icon-apps"),E=c("icon-question-circle"),M=c("icon-info-circle"),P=$,I=c("icon-right"),z=bt,L=pt,D=ae,V=c("icon-more"),U=ct,N=le,H=re,B=R,W=c("RouterView"),F=oe;return d(),g(w,null,[b(F,{class:"w-full h-full bg-[var(--color-neutral-1)]"},{default:_((()=>{var c;return[b(H,{class:Z(["h-14 flex items-center bg-white dark:bg-dark pr-2",{"pl-2":!(null==(c=e.$route.meta)?void 0:c.hideLogoText)&&m(o)}])},{default:_((()=>{var c,y;return[!(null==(c=e.$route.meta)?void 0:c.hideLogoText)&&m(o)?(d(),p(n,{key:0,onClick:m(v).toggleCollapsedAction},{icon:_((()=>[b(r)])),_:1},8,["onClick"])):j("",!0),b(u,{to:"/",class:Z(["header-logo",[{"is-mobile":m(o)},(null==(y=e.$route.meta)?void 0:y.hideLogoText)?"justify-start pl-4":"justify-center"]])},{default:_((()=>[ta,aa])),_:1},8,["class"]),m(o)?j("",!0):(d(),p(P,{key:1,onMenuItemClick:S,mode:"horizontal","selected-keys":[m(s)],class:"header-menu"},{default:_((()=>[m(a).includes("CHAT")?(d(),p(C,{key:"Chat",class:"ml-auto"},{icon:_((()=>[b(k)])),default:_((()=>[h(" 聊天 ")])),_:1})):j("",!0),m(a).includes("DRAW")?(d(),p(C,{key:"Draw"},{icon:_((()=>[b(x)])),default:_((()=>[h(" 绘图 ")])),_:1})):j("",!0),m(a).includes("TOOLS")?(d(),p(C,{key:"Tools"},{icon:_((()=>[b(A)])),default:_((()=>[h(" 工具 ")])),_:1})):j("",!0),b(C,{key:"Tutorial"},{icon:_((()=>[b(E)])),default:_((()=>[h(" 使用说明 ")])),_:1}),b(C,{key:"About"},{icon:_((()=>[b(M)])),default:_((()=>[h(" 关于我们 ")])),_:1})])),_:1},8,["selected-keys"])),la,m(o)||m(l).meta.hideSetup?j("",!0):(d(),p(D,{key:2,class:"mr-2"},{default:_((()=>[b(n,{class:"px-1",onClick:m(v).toggleHeaderCollapsedAction},{default:_((()=>[b(I,{class:Z(["header-collapsed",{"is-collapsed":!m(v).headerSettingCollapsed}])},null,8,["class"])])),_:1},8,["onClick"]),f("div",{class:Z(["flex flex-nowrap overflow-hidden transition-all",m(v).headerSettingCollapsed?"Draw"!==e.$route.name?"w-[28.5rem]":"w-60":"w-0"])},["Draw"!==e.$route.name?(d(),p(z,{key:0,class:"w-48 mr-2"})):j("",!0),b(L,{class:"w-60"})],2)])),_:1})),b(N,{trigger:"click","popup-visible":m(i),"onUpdate:popupVisible":t[3]||(t[3]=e=>T(i)?i.value=e:null),"content-class":"mr-2"},{content:_((()=>["Chat"!==m(l).name||m(o)?(d(),p(U,{key:0})):j("",!0),f("div",{class:Z(["grid gap-3 grid-cols-2",m(o)?"grid-cols-2":"grid-cols-1"])},[m(o)?(d(),g(w,{key:0},["Chat"!==m(l).name?(d(),p(n,{key:0,onClick:t[0]||(t[0]=e=>O("chat"))},{default:_((()=>[h(" 聊天 ")])),_:1})):j("",!0),"Tutorial"!==m(l).name?(d(),p(n,{key:1,onClick:t[1]||(t[1]=e=>O("/tutorial"))},{default:_((()=>[h(" 使用说明 ")])),_:1})):j("",!0),"About"!==m(l).name?(d(),p(n,{key:2,onClick:t[2]||(t[2]=e=>O("/about"))},{default:_((()=>[h(" 关于我们 ")])),_:1})):j("",!0)],64)):j("",!0),b(Zt),b(n,{target:"_blank",href:"https://www.houfaka.com/links/193B8193"},{default:_((()=>[h(" 购买会员 ")])),_:1})],2)])),default:_((()=>[b(n,null,{default:_((()=>[b(V)])),_:1})])),_:1},8,["popup-visible"])]})),_:1},8,["class"]),b(B,{class:"m-0"}),b(F,{class:"flex-1 overflow-hidden relative"},{default:_((()=>[m(o)?j("",!0):(d(),p(W,{key:0,name:"sider"})),b(F,{class:"flex-1 overflow-hidden"},{default:_((()=>[b(W)])),_:1})])),_:1})]})),_:1}),b(Bt,{visible:m(v).collapsed,"onUpdate:visible":t[4]||(t[4]=e=>m(v).collapsed=e)},null,8,["visible"]),b(Mt)],64)}}}),[["__scopeId","data-v-437b5c5c"]]),oa=(e,t)=>{const a=t.value,l=new Date(a),r=`${l.getFullYear()}-${("0"+(l.getMonth()+1)).slice(-2)}-${("0"+l.getDate()).slice(-2)} ${("0"+l.getHours()).slice(-2)}:${("0"+l.getMinutes()).slice(-2)}:${("0"+l.getSeconds()).slice(-2)}`;e.textContent=r},na={mounted:oa,updated:oa},sa=(e,t)=>{const{value:a}=t,l=vt(),r=ie({size:200,padding:16,data:a,background:"dark"===l.themeMode?"#232324":"#999999",foreground:"dark"===l.themeMode?"#f4f4f4":"#000000"});e.innerHtml="",e.appendChild(r)},ia={mounted:sa,updated:sa},ua={},ca=function(e,t,a){if(!t||0===t.length)return e();const l=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in ua)return;ua[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(!!a)for(let a=l.length-1;a>=0;a--){const r=l[a];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((t,a)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},{VITE_FEATURES:da}={VITE_BASE_URL:"/",VITE_PORT:"3000",VITE_DROP_CONSOLE:"true",VITE_FEATURES:"CHAT",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},pa=[{path:"/",name:"Home",components:{default:()=>ca((()=>import("./HomeView-ea5e5b6f.js")),["static/js/HomeView-ea5e5b6f.js","static/js/.pnpm-209fcd37.js","static/css/.pnpm-4f44b0c6.css","static/css/HomeView-f07e170a.css"])},meta:{hideSetup:!0,hideLogoText:!0}},{path:"/tutorial",name:"Tutorial",component:()=>ca((()=>import("./TutorialView-9adda432.js")),["static/js/TutorialView-9adda432.js","static/js/.pnpm-209fcd37.js","static/css/.pnpm-4f44b0c6.css"])},{path:"/about",name:"About",component:()=>ca((()=>import("./AboutView-a16ea7d4.js")),["static/js/AboutView-a16ea7d4.js","static/js/.pnpm-209fcd37.js","static/css/.pnpm-4f44b0c6.css","static/css/AboutView-30426d27.css"])}];da.includes("CHAT")&&pa.push({path:"/chat",name:"Chat",components:{sider:()=>ca((()=>Promise.resolve().then((()=>Ht))),void 0),default:()=>ca((()=>import("./ChatView-3af935ec.js")),["static/js/ChatView-3af935ec.js","static/js/.pnpm-209fcd37.js","static/css/.pnpm-4f44b0c6.css","static/css/ChatView-2f79cac1.css"])}}),da.includes("TOOLS")&&pa.push({path:"/tools",name:"Tools",component:()=>ca((()=>import("./ToolsView-0d4f4ae7.js")),["static/js/ToolsView-0d4f4ae7.js","static/js/.pnpm-209fcd37.js","static/css/.pnpm-4f44b0c6.css","static/css/ToolsView-5828883b.css"])}),da.includes("DRAW")&&pa.push({path:"/draw",name:"Draw",component:()=>ca((()=>import("./DrawView-e43a5358.js")),["static/js/DrawView-e43a5358.js","static/js/.pnpm-209fcd37.js","static/css/.pnpm-4f44b0c6.css","static/css/DrawView-e9eb73f3.css"])});const _a=ue({history:ce("/"),routes:pa}),ba=de();ba.use(pe);const fa=_e(ra);var va;fa.use(ba),fa.use(_a),fa.use(be),(va=fa).directive("qr",ia),va.directive("date-time",na),fa.mount("#app");export{at as D,Ze as S,ft as _,e as __vite_legacy_guard,ut as a,mt as b,gt as c,rt as d,lt as e,We as f,zt as r,Lt as u};
