function e(){import.meta.url,import("_").catch((()=>1))}import{r as t,w as a,o as l,a as o,d as r,b as n,c as s,e as i,f as u,g as c,h as d,i as p,j as _,u as b,k as f,T as v,B as m,M as g,l as w,m as h,n as y,t as S,p as k,F as O,D as C,q as T,s as x,C as j,v as A,x as M,y as E,I as P,S as I,z as L,O as z,A as D,E as V,G as R,H as $,J as U,K as H,L as B,N,P as W,Q as G,R as F,U as Q,V as q,W as K,X as Y,Y as J,Z as X,_ as Z,$ as ee,a0 as te,a1 as ae,a2 as le,a3 as oe,a4 as re,a5 as ne,a6 as se,a7 as ie,a8 as ue,a9 as ce,aa as de,ab as pe,ac as _e,ad as be,ae as fe,af as ve}from"./.pnpm-22857cbc.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_1-3c7fc505.webp"},Symbol.toStringTag,{value:"Module"})),ge=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_10-cdffa6ab.webp"},Symbol.toStringTag,{value:"Module"})),we=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_11-d175b882.webp"},Symbol.toStringTag,{value:"Module"})),he=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_12-aa2654f6.webp"},Symbol.toStringTag,{value:"Module"})),ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_13-1d98f6fe.webp"},Symbol.toStringTag,{value:"Module"})),Se=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_14-e9f19696.webp"},Symbol.toStringTag,{value:"Module"})),ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_15-fe682768.webp"},Symbol.toStringTag,{value:"Module"})),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_16-4a96f5c0.webp"},Symbol.toStringTag,{value:"Module"})),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),Te=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_18-f6495ba0.webp"},Symbol.toStringTag,{value:"Module"})),xe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_19-e69559f6.webp"},Symbol.toStringTag,{value:"Module"})),je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_20-97cc1b4e.webp"},Symbol.toStringTag,{value:"Module"})),Me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_21-eb1491fc.webp"},Symbol.toStringTag,{value:"Module"})),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_22-bd4d7b79.webp"},Symbol.toStringTag,{value:"Module"})),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_23-4e88c4c3.webp"},Symbol.toStringTag,{value:"Module"})),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_24-9bd1e134.webp"},Symbol.toStringTag,{value:"Module"})),Le=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_25-3405a612.webp"},Symbol.toStringTag,{value:"Module"})),ze=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_26-0cbf4eec.webp"},Symbol.toStringTag,{value:"Module"})),De=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_27-2a36802d.webp"},Symbol.toStringTag,{value:"Module"})),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_28-0964a7b4.webp"},Symbol.toStringTag,{value:"Module"})),Re=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_29-d15bed96.webp"},Symbol.toStringTag,{value:"Module"})),$e=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_3-f6e09394.webp"},Symbol.toStringTag,{value:"Module"})),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_30-72380853.webp"},Symbol.toStringTag,{value:"Module"})),He=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_31-ea4dbf65.webp"},Symbol.toStringTag,{value:"Module"})),Be=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_32-54189dcb.webp"},Symbol.toStringTag,{value:"Module"})),Ne=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_33-10c4e4c7.webp"},Symbol.toStringTag,{value:"Module"})),We=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_34-ad543579.webp"},Symbol.toStringTag,{value:"Module"})),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_35-7742e627.webp"},Symbol.toStringTag,{value:"Module"})),Fe="/static/webp/user_avatar_36-01c052bc.webp",Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"})),qe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_4-e4407157.webp"},Symbol.toStringTag,{value:"Module"})),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_5-ed7e3439.webp"},Symbol.toStringTag,{value:"Module"})),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_6-1d9247ea.webp"},Symbol.toStringTag,{value:"Module"})),Je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_7-552fc562.webp"},Symbol.toStringTag,{value:"Module"})),Xe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_8-5e8cee41.webp"},Symbol.toStringTag,{value:"Module"})),Ze=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_9-d4eab830.webp"},Symbol.toStringTag,{value:"Module"})),et=Object.assign({"./user_avatar_1.webp":me,"./user_avatar_10.webp":ge,"./user_avatar_11.webp":we,"./user_avatar_12.webp":he,"./user_avatar_13.webp":ye,"./user_avatar_14.webp":Se,"./user_avatar_15.webp":ke,"./user_avatar_16.webp":Oe,"./user_avatar_17.webp":Ce,"./user_avatar_18.webp":Te,"./user_avatar_19.webp":xe,"./user_avatar_2.webp":je,"./user_avatar_20.webp":Ae,"./user_avatar_21.webp":Me,"./user_avatar_22.webp":Ee,"./user_avatar_23.webp":Pe,"./user_avatar_24.webp":Ie,"./user_avatar_25.webp":Le,"./user_avatar_26.webp":ze,"./user_avatar_27.webp":De,"./user_avatar_28.webp":Ve,"./user_avatar_29.webp":Re,"./user_avatar_3.webp":$e,"./user_avatar_30.webp":Ue,"./user_avatar_31.webp":He,"./user_avatar_32.webp":Be,"./user_avatar_33.webp":Ne,"./user_avatar_34.webp":We,"./user_avatar_35.webp":Ge,"./user_avatar_36.webp":Qe,"./user_avatar_4.webp":qe,"./user_avatar_5.webp":Ke,"./user_avatar_6.webp":Ye,"./user_avatar_7.webp":Je,"./user_avatar_8.webp":Xe,"./user_avatar_9.webp":Ze});Object.keys(et).forEach((e=>{e.replace("./","").replace(".webp",""),et[e].default}));const tt="/static/svg/openai-66faffcb.svg";function at(e){const r=t(window.innerWidth),n=t(),s=()=>{n.value=r.value<844};a(n,(()=>{e&&e(n.value)}),{immediate:!0}),s();const i=()=>{r.value=window.innerWidth,s()};return l((()=>{window.addEventListener("resize",i)})),o((()=>{window.removeEventListener("resize",i)})),{screenWidth:r,isMobileScreen:n}}const lt=r("__AI_1024_STORE_LAYOUT",(()=>{const e=t(!0),a=t(!1),l=t(!1),o=t(!0),r=t("light");at((()=>{l.value=!1}));n((()=>{"dark"===r.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{collapsed:l,themeMode:r,isShowContact:a,isShowLog:e,changeModeAction:function(e){r.value=e},changeShowLogAction:t=>{e.value=t},toggleCollapsedAction:e=>{l.value=void 0!==e?e:!l.value},headerSettingCollapsed:o,changeShowContactAction:e=>{a.value=e},toggleHeaderCollapsedAction:()=>{o.value=!o.value}}}),{persist:[{storage:localStorage,paths:["themeMode","headerSettingCollapsed"]},{storage:sessionStorage,paths:["isShowLog"]}]}),ot=d("div",{class:"header-logo gap-x-2"},[d("img",{class:"w-6 h-6",src:tt,alt:"1024 智能 AI"}),d("h1",{class:"text-base m-0"},"1024 智能 AI")],-1),rt=d("ul",{class:"p-0 m-0 list-decimal ml-6"},[d("li",null,"修复了部分浏览器无法识别返回的内容和空返回问题。"),d("li",null,"修复了网络或其他错误引起的误积分现象。"),d("li",null,"提升了网络速度，让用户能够更快速地获得所需信息。"),d("li",null,"优化了gpt-4的使用体验。"),d("li",null,"修复了历史消息超长导致的回复一半的问题。"),d("li",null,"提升了部分体验，包括但不限于用户界面的优化和交互体验的改进。"),d("li",null,".......")],-1),nt=d("ul",{class:"p-0 m-0 list-decimal ml-6"},[d("li",null,"DALL-E 绘画功能"),d("li",null,"Midjourney 绘画功能"),d("li",null,"AI语音聊天，AI语音文字识别功能"),d("li",null,"用户登陆注册，个人中心等"),d("li",null,"代理分销，邀请奖励积分"),d("li",null,".......")],-1),st={class:"flex items-center justify-end"},it=s({__name:"ChangelogModel",setup(e){const l=lt(),o=t(!1);a((()=>l.isShowLog),(e=>{o.value=e}),{immediate:!0});const r=()=>{o.value=!1,l.changeShowLogAction(!1)};return(e,t)=>{const a=v,l=m,n=g;return i(),u(n,{class:"contact-model","esc-to-close":!1,"mask-closable":!1,"title-align":"start",visible:b(o),"onUpdate:visible":t[0]||(t[0]=e=>f(o)?o.value=e:null),onClose:r},{title:c((()=>[ot])),footer:c((()=>[d("div",st,[p(l,{onClick:r},{default:c((()=>[_(" 关闭 ")])),_:1})])])),default:c((()=>[d("div",null,[p(a,{heading:1,class:"text-base mt-0"},{default:c((()=>[_(" 本次更新主要针对用户反馈的问题进行了修复和优化： ")])),_:1}),rt,p(a,{heading:1,class:"text-base"},{default:c((()=>[_(" 我们即将准备上线的功能： ")])),_:1}),nt])])),_:1},8,["visible"])}}});var ut=(e=>(e.Enter="Enter",e.ShiftEnter="Shift + Enter",e))(ut||{});const ct=["gpt-4","gpt-3.5-turbo"],dt={"gpt-4":100,"gpt-3.5-turbo":3,"gpt-4-32k-0314":0,"gpt-4-32k":0,"gpt-4-0314":0,"gpt-3.5-turbo-0301":0,"text-davinci-003":0,"text-davinci-002":0,"text-curie-001":0,"text-babbage-001":0,"text-ada-001":0,"text-davinci-001":0,"davinci-instruct-beta":0,davinci:0,"curie-instruct-beta":0,curie:0,ada:0,babbage:0},pt="/v1/images/generations",_t=[{tag:"未来科技",keywords:"高科技、未来技术、智能化、机器人、自动化、人工智能、机器学习"},{tag:"自然生态",keywords:"大自然、环境保护、生态平衡、气候变化、可持续发展、生物多样性"},{tag:"艺术文化",keywords:"艺术创作、绘画、摄影、雕塑、老文明、历史遗迹、传统手工艺、博物馆"},{tag:"时尚美妆",keywords:"时尚、美妆、个人风格、服装设计、时装周、红毯盛典"},{tag:"美食文化",keywords:"食品、美食文化、烹饪技艺、餐饮业、营养健康、美食分享"},{tag:"旅游文化",keywords:"旅游、景点、旅行体验、文化交流、民俗风情、地方特色"},{tag:"数字化生活",keywords:"社交媒体、数字化、网络文化、在线教育、游戏娱乐、移动支付"},{tag:"娱乐休闲",keywords:"电影、电视剧、综艺节目、音乐会、演唱会、运动会"},{tag:"商业经济",keywords:"商业、经济、金融、股票、基金、保险、创业、创新、投资、贸易"},{tag:"教育培训",keywords:"教育、培训、学习、教育科技、校园生活、学生社团、研究生活"},{tag:"科学研究",keywords:"科学、研究、实验室、科学家、科学成果、学术交流、科学普及"},{tag:"数字艺术",keywords:"数码艺术、VR艺术、游戏美术、互动媒体、AR/VR技术"}],bt=r("__AI_1024_STORE_CONFIG",(()=>{const e=t({$schema:"",api:"",modules:["CHAT"]});l((()=>{c.value=ut.Enter,ct.includes(r.value)||(r.value="gpt-3.5-turbo"),fetch("/bootstrap.json").then((e=>e.json())).then((t=>{e.value=t,p(i.value)}))}));const a=t(!1),o=t("light"),r=t("gpt-3.5-turbo"),s=t(!1),i=t(""),u=t(),c=t(ut.ShiftEnter),d=t(.7);function p(t){s.value=!0,i.value=t;const a=`${e.value.api}/v1/card?card=${t}`;fetch(a).then((e=>e.json())).then((e=>{200!==e.code?(i.value&&w.error(e.msg),u.value=void 0):u.value=e.data})).finally((()=>{s.value=!1}))}at((e=>{a.value=e})),n((()=>{"dark"===o.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{card:i,cardInfo:u,bootstrap:e,collapsed:a,themeMode:o,chatModel:r,submitKey:c,temperature:d,setupCardLoading:s,setupCardAction:p,changeModeAction:function(e){o.value=e},toggleCollapsedAction:()=>{a.value=!a.value},changeChatModelAction:function(e){r.value=e},changeSubmitKeyAction:function(e){c.value=e},changeTemperatureAction:function(e){d.value=e<.1?.1:e>2?2:e}}}),{persist:[{storage:localStorage,paths:["themeMode","chatModel","card","submitKey","temperature","cardInfo"]}]}),ft={class:"flex items-center gap-x-4 text-primary"},vt={class:"text-primary"},mt={class:"text-info"},gt={key:1,class:"text-primary"},wt=(e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a},ht=wt(s({__name:"PointsCard",setup(e){const t=bt(),a=h((()=>t.setupCardLoading));return(e,l)=>{const o=y("icon-refresh"),r=m,n=C,s=T,f=x,v=j;return i(),u(v,{class:"points-card",loading:b(a),bordered:!1},{default:c((()=>[p(f,{size:"mini",column:1},{default:c((()=>[p(n,{label:"账号"},{default:c((()=>[d("span",ft,[d("span",null,S(b(t).cardInfo?"会员":"游客"),1),p(r,{size:"mini",type:"text",onClick:l[0]||(l[0]=e=>b(t).setupCardAction(b(t).card)),shape:"circle"},{default:c((()=>[p(o)])),_:1})])])),_:1}),p(n,{label:"状态"},{default:c((()=>{var e;return[p(s,{size:"small",status:"processing",text:b(t).cardInfo?(null==(e=b(t).cardInfo)?void 0:e.enable)?"正常":"禁用":"正常"},null,8,["text"])]})),_:1}),p(n,{label:"积分"},{default:c((()=>{var e,a;return[b(t).cardInfo?(i(),k(O,{key:0},[d("span",vt,S((null==(e=b(t).cardInfo)?void 0:e.remain_points)||0),1),_(" / "),d("span",mt,S((null==(a=b(t).cardInfo)?void 0:a.points)||0),1)],64)):(i(),k("span",gt,"每日五次免费调用"))]})),_:1})])),_:1})])),_:1},8,["loading"])}}}),[["__scopeId","data-v-4ec5a039"]]),yt={class:"flex items-center"},St=s({__name:"SetupCard",setup(e){const a=bt(),o=t(""),r=h((()=>a.setupCardLoading)),n=()=>{o.value!==a.card&&a.setupCardAction(o.value)};return l((()=>{o.value=a.card})),(e,t)=>{const l=M,s=y("icon-info-circle"),_=E,v=P,m=I;return i(),u(m,{loading:b(r)},{default:c((()=>[p(v,{error:!b(a).cardInfo&&!!b(a).card,modelValue:b(o),"onUpdate:modelValue":t[0]||(t[0]=e=>f(o)?o.value=e:null),type:"password",onBlur:n,"allow-clear":"",placeholder:"请输入积分卡"},{suffix:c((()=>[d("div",yt,[b(o)?(i(),u(l,{key:0,class:"mb-0",copyable:"","copy-text":b(o)},null,8,["copy-text"])):A("",!0),!b(a).cardInfo&&b(a).card?(i(),u(_,{key:1,content:"您的积分不足、积分卡已过期或输入错误。请检查并重新输入。",position:"bottom","content-style":{maxWidth:"240px","margin-right":"16px"}},{default:c((()=>[p(s,{class:"cursor-pointer text-danger"})])),_:1})):A("",!0)])])),_:1},8,["error","modelValue"])])),_:1},8,["loading"])}}}),kt={class:"text-info"},Ot=s({__name:"ChangeChatModel",setup(e){const t=bt(),a=async e=>{String(e).indexOf("gpt-4")>-1?await new Promise(((a,l)=>{g.warning({title:"提示",okText:"继续",hideCancel:!1,content:()=>p("div",{class:"whitespace-pre-wrap flex flex-col gap-y-1 leading-5 indent"},[_("请注意：由于 GPT-4 模型的成本较高，因此问题字数应保持在 1000 个 token 以下（大约 500 个汉字）。如果超出该限制，将自动截断。为了避免 AI 回答内容截断，建议尽量让 AI 一次性回复完整个问题。如果 AI 回答的内容过长，也会造成内容截断，进而引起回复不连贯。如果要使用GPT-4建议在新的会话中使用，是否确认切换至 GPT-4？")]),onOk(){a(),t.changeChatModelAction(e)},onCancel(){l()}})})):t.changeChatModelAction(e)};return(e,l)=>{const o=z,r=D;return i(),u(r,{"model-value":b(t).chatModel,onChange:a,"allow-clear":!1,placeholder:"Please select model..."},{label:c((({data:e})=>[_(S(e.value),1)])),default:c((()=>[(i(!0),k(O,null,L("ALL_MODELS"in e?e.ALL_MODELS:b(ct),(t=>(i(),u(o,{key:t,value:t},{default:c((()=>[_(S(t)+" ",1),d("small",kt,"("+S(("POINTS_MAP"in e?e.POINTS_MAP:b(dt))[t])+"积分一次)",1)])),_:2},1032,["value"])))),128))])),_:1},8,["model-value"])}}}),Ct="/QQ.png",Tt="/WeChat.png",xt=d("div",{class:"header-logo gap-x-2"},[d("img",{class:"w-6 h-6",src:tt,alt:"1024 智能 AI"}),d("h1",{class:"text-base m-0"},"1024 智能 AI")],-1),jt=d("div",null,[_(" 一款"),d("mark",null,"便捷的"),_("、"),d("mark",null,"免登录"),_("和"),d("mark",null,"无需魔法"),_("的ChatGPT工具 ")],-1),At=d("div",null,[_(" 网址经常变更，所以使用前一定要记得先加群！！！ 群内不定时 "),d("mark",null,"发放免费积分卡")],-1),Mt=d("div",null,[_(" 积分卡购买地址： "),d("a",{href:"https://www.houfaka.com/links/193B8193",target:"_blank"}," https://www.houfaka.com/links/193B8193 ")],-1),Et=d("br",null,null,-1),Pt=d("div",null,[_(" 平时如没有特殊需要，建议使用 "),d("b",null,"gpt-3.5-turbo"),_("即可，"),d("b",null,"gpt-3.5-turbo"),_("完全能应对大部分场景 ")],-1),It=d("div",null,[d("b",null,"gpt-4.0"),_(" 成本非常昂贵，是"),d("b",null,"gpt-3.5-turbo"),_("的 "),d("b",null,"30-60倍"),_("，反应时间也不如 "),d("b",null,"gpt-3.5-turbo")],-1),Lt=d("br",null,null,-1),zt=d("div",null," 大家多多支持，你们的支持才是我们的动力，即将推出语音聊天与绘画功能，敬请期待！！！ ",-1),Dt=d("br",null,null,-1),Vt=d("div",{class:"grid grid-cols-2"},[d("div",{class:"flex flex-col items-center gap-y-2 py-2"},[d("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"QQ",src:Ct}),d("span",{class:""},"QQ群")]),d("div",{class:"flex flex-col items-center gap-y-2 py-2"},[d("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"WeChat",src:Tt}),d("span",{class:""},"微信群")])],-1),Rt={class:"flex items-center justify-center"},$t=s({__name:"ContactModel",setup(e){const l=lt(),o=t(!1);a((()=>l.isShowContact),(e=>{o.value=e}),{immediate:!0});const r=()=>{o.value=!1,l.changeShowContactAction(!1)};return(e,t)=>{const a=m,l=g;return i(),u(l,{class:"contact-model","esc-to-close":!1,"mask-closable":!1,"title-align":"start",visible:b(o),"onUpdate:visible":t[0]||(t[0]=e=>f(o)?o.value=e:null),onClose:r},{title:c((()=>[xt])),footer:c((()=>[d("div",Rt,[p(a,{onClick:r,type:"primary"},{default:c((()=>[_(" 我已加入 ")])),_:1})])])),default:c((()=>[jt,At,Mt,Et,Pt,It,Lt,zt,Dt,Vt])),_:1},8,["visible"])}}});function Ut(e=16){return Number(Math.random().toString().substring(3,e)+Date.now()).toString(36)}function Ht(e){return{id:Ut(),date:Date.now().valueOf(),role:"user",content:"",...e}}const Bt=r("__AI_1024_STORE_CHAT",(()=>{const e=bt(),a=t(new AbortController),o={id:Ut(),topic:"",sendMemory:!0,messages:[],lastUpdate:(new Date).getTime(),lastSummarizeIndex:0},r=t(),s=t([]),i=t(),u=t(!1);n((()=>{i.value=s.value.find((({id:e})=>e===r.value))}));const c=()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort());const l=Ut();s.value.unshift(R({...o,topic:"",id:l})),r.value=l},d=e=>{var t;return null==(t=i.value)?void 0:t.messages.find((({id:t})=>e===t))},p=async(t,l,o=!0)=>{var r;if(!(null==t?void 0:t.length))return void w.error("请输入您的消息");const n=await(async t=>{var a;e.chatModel;const l=((null==(a=i.value)?void 0:a.messages)||[]).filter((e=>!e.isError)),o=R(l.concat(t)).map((({role:e,content:t})=>({role:e,content:t})));return o.length>20?o.slice(o.length-20,o.length):o})({role:"user",content:t}),s={card:(null==(r=e.cardInfo)?void 0:r.enable)?e.card:void 0,messages:n,temperature:e.temperature,model:e.chatModel,is_stream:!0},c=Ht({role:"user",content:t});o&&i.value.messages.push(c);const p=Ht({role:"assistant",streaming:!0,content:""});i.value.messages.push(p),u.value=!0,async function(e,t){const a=new AbortController;(null==t?void 0:t.onController)&&t.onController(a);const l=`${bt().bootstrap.api}/v1/chat/completions`;await V.post(l,e,{responseType:"stream",timeout:18e4,headers:{Accept:"application/json","Content-Type":"application/json"},signal:a.signal,onDownloadProgress(e){var a,l,o,r;200===(null==(l=null==(a=null==e?void 0:e.event)?void 0:a.target)?void 0:l.status)&&(null==t||t.onMessage(null==(r=null==(o=null==e?void 0:e.event)?void 0:o.target)?void 0:r.responseText,!1))}}).then((e=>{null==t||t.onMessage(null==e?void 0:e.data,!0)})).catch((e=>{var a;null==t||t.onError(e,null==(a=null==e?void 0:e.response)?void 0:a.status)}))}(s,{onController(e){a.value=e},onMessage(e,t){var a;if(d(p.id).content=e,l&&l(t),t&&(u.value=!1,d(p.id).streaming=!1,d(p.id).date=(new Date).valueOf(),!(null==(a=i.value)?void 0:a.topic))){const e=c.content.trim().replace(/\r/g,"");i.value.topic=e.length>30?e.slice(0,30):e}},onError(e,t){var a;u.value=!1,V.isCancel(e)||(401===t?d(p.id).content="请输入积分卡":d(p.id).content+=void 0!==t?`\n\n\`${(null==(a=null==e?void 0:e.response)?void 0:a.data)||"出错了，稍后重试吧"}\``:"\n\n`网络异常, 请稍后重试!`"),d(p.id).streaming=!1,d(p.id).isError=!0,d(p.id).date=(new Date).valueOf(),l&&l(!0)}})};return l((()=>{var e;u.value=!1,(null==(e=s.value)?void 0:e.length)<1?c():s.value.forEach((e=>{e.messages.forEach((e=>{e.streaming=!1}))}))})),{session:i,sessions:s,fetching:u,currentChat:r,abortController:a,newChatAction:c,clearSessions:()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort()),g.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除所有会话信息, 此操作不可逆!!!",onOk(){s.value=[],c()}})},removeChatAction:e=>{g.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除当前选择会话?",onOk(){var t,l;const o=s.value.findIndex((t=>t.id===e));e!==r.value?s.value.splice(o,1):(s.value.length>1&&(r.value=s.value[0].id),s.value.splice(o,1),(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),0===s.value.length&&c())}})},sendMessageAction:p,messageRetryAction:(e,t)=>{var a,l;null==(a=i.value)||a.messages.splice(e,1);const o=null==(l=i.value)?void 0:l.messages[e-1];p((null==o?void 0:o.content)||"",t,!1)},changeCurrentChatAction:e=>{var t,l,o,n;(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),null==(n=null==(o=i.value)?void 0:o.messages)||n.forEach((e=>e.streaming=!1)),r.value=e},handleChangeSessionTopicAction:e=>{var t;i.value.topic=e||(null==(t=i.value)?void 0:t.topic)||""}}}),{persist:{storage:localStorage}}),Nt=s({__name:"ChangeSessionTopic",setup(e){const a=t(!1),l=t(""),o=Bt(),r=()=>{o.handleChangeSessionTopicAction(l.value)},n=()=>{var e;l.value=(null==(e=o.session)?void 0:e.topic)||"新的聊天"};return(e,t)=>{const o=P,s=g;return i(),k(O,null,[d("div",{onClick:t[0]||(t[0]=e=>a.value=!0)},[$(e.$slots,"default")]),p(s,{onBeforeOpen:n,visible:b(a),"onUpdate:visible":t[2]||(t[2]=e=>f(a)?a.value=e:null),title:"修改会话标题","hide-cancel":"","modal-style":{"max-width":"80%"},onOk:r},{default:c((()=>[p(o,{"max-length":30,modelValue:b(l),"onUpdate:modelValue":t[1]||(t[1]=e=>f(l)?l.value=e:null),placeholder:"请输入当前会话标题"},null,8,["modelValue"])])),_:1},8,["visible"])],64)}}}),Wt={class:"h-full flex flex-col items-stretch overflow-hidden"},Gt={class:"h-14 flex items-center px-2 gap-x-2 bg-white dark:bg-dark"},Ft={class:"flex-1 truncate"},Qt={class:"flex items-center justify-between p-4 bg-white dark:bg-dark text-sm"},qt=wt(s({__name:"MessageList",props:{isDrawer:Boolean},setup(e){const t=lt(),{isMobileScreen:a}=at(),l=Bt(),o=e=>{t.toggleCollapsedAction(!1),l.changeCurrentChatAction(String(e))},r=(e,a)=>{({newChat(){l.newChatAction(),t.toggleCollapsedAction(!1)},close(){t.toggleCollapsedAction(!1)},editor(){w.info("编辑")},del(){l.removeChatAction(a)}})[e]()};return(n,s)=>{const f=y("icon-plus"),v=m,g=y("icon-close"),w=U,h=y("icon-close-circle"),C=y("icon-edit"),T=Nt,x=F,j=Q,M=H,E=B,P=U,I=ht,z=y("icon-robot-add"),D=N,V=W;return i(),k(O,null,[p(V,{width:200,class:"chat-message_list"},{default:c((()=>[d("div",Wt,[d("div",Gt,[p(v,{class:"flex-1",type:"primary",onClick:s[0]||(s[0]=e=>r("newChat"))},{icon:c((()=>[p(f)])),default:c((()=>[_(" New Chat ")])),_:1}),b(a)?(i(),u(v,{key:0,onClick:s[1]||(s[1]=e=>r("close"))},{icon:c((()=>[p(g)])),_:1})):A("",!0)]),p(w,{class:"m-0"}),p(E,{"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full px-0 flex flex-col gap-y-2"},{default:c((()=>[p(M,{"default-open-keys":["0"],"default-selected-keys":["0_1"],"selected-keys":[b(l).currentChat],onMenuItemClick:o},{default:c((()=>[(i(!0),k(O,null,L(b(l).sessions,(e=>(i(),u(j,{class:"chat-item",key:e.id},{default:c((()=>[d("span",Ft,S(e.topic||"新的聊天"),1),p(x,{size:"mini",class:"actions"},{default:c((()=>[p(v,{onClick:G((t=>r("del",e.id)),["stop"]),class:"flex items-center justify-center"},{icon:c((()=>[p(h,{class:"m-0"})])),_:2},1032,["onClick"]),p(T,null,{default:c((()=>[p(v,{class:"flex items-center justify-center"},{icon:c((()=>[p(C,{class:"m-0"})])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["selected-keys"])])),_:1}),p(P,{class:"my-2"}),p(I,{class:"is-chat"}),d("div",Qt,[p(D,{type:"primary",onClick:b(l).clearSessions},{icon:c((()=>[p(z)])),default:c((()=>[_(" 清除会话 ")])),_:1},8,["onClick"]),p(D,{onClick:s[2]||(s[2]=()=>b(t).changeShowContactAction(!0)),type:"primary"},{icon:c((()=>[p(z)])),default:c((()=>[_(" 加入群聊 ")])),_:1})])])])),_:1}),e.isDrawer?A("",!0):(i(),u(w,{key:0,class:"m-0 h-full",direction:"vertical"}))],64)}}}),[["__scopeId","data-v-7184c3bf"]]),Kt=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"})),Yt=s({__name:"MessageListDrawer",setup:e=>(e,t)=>{const a=q;return i(),u(a,{width:"100%","hide-cancel":"",placement:"left",header:!1,footer:!1,class:"message-drawer","drawer-style":{maxWidth:"350px"}},{default:c((()=>[p(qt,{"is-drawer":""})])),_:1})}}),Jt={class:"max-w-4xl w-full mx-auto"},Xt={class:"setting-card dark:bg-dark"},Zt={class:"text-primary"},ea={class:"setting-card dark:bg-dark"},ta={class:"setting-card dark:bg-dark"},aa={class:"setting-card dark:bg-dark"},la={class:"flex flex-wrap gap-y-2 items-center"},oa={class:"font-medium pl-4 text-primary"},ra=s({__name:"SettingsView",setup(e){const t=bt(),a={light:"浅色模式",dark:"深色模式",auto:"跟随系统"},l=lt(),{isMobileScreen:o}=at(),r=e=>{l.changeModeAction(e)};return(e,n)=>{const s=K,_=St,f=Ot,v=Y,m=J,g=y("icon-sun"),w=X,h=y("icon-moon"),k=y("icon-relation"),O=Z,C=ee,T=B;return i(),u(T,{"outer-style":"flex: 1; overflow: hidden;","outer-class":["settings-wrapper",{"is-mobile":b(o)}],class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:c((()=>[d("div",Jt,[p(C,{ref:"formRef","label-col-props":{span:12},"label-align":"left",model:{},class:"w-full mt-0 flex flex-col gap-y-3"},{default:c((()=>[d("div",Xt,[p(s,{"label-col-flex":"1","label-attrs":{align:"left"},class:"mb-0 font-medium pl-4 dark:text-light-900 nowrap",field:"theme",label:"Version"},{default:c((()=>[d("span",Zt,"v"+S(b("1.0.1")),1)])),_:1})]),d("div",ea,[p(s,{class:"mb-0",field:"card",label:"积分卡"},{default:c((()=>[p(_,{class:"w-full"})])),_:1})]),d("div",ta,[p(s,{class:"mb-0",field:"modelConfig.model",label:"模型(Model)"},{default:c((()=>[p(f,{class:"w-full"})])),_:1}),p(s,{class:"mb-0",field:"modelConfig.temperature",label:b(o)?"随机性 (temperature)":`随机性 (temperature): ${b(t).temperature}`},{default:c((()=>[b(o)?(i(),u(v,{key:0,max:2,step:.1,min:.1,precision:.1,"model-value":b(t).temperature,onChange:b(t).changeTemperatureAction,mode:"button"},null,8,["step","min","precision","model-value","onChange"])):(i(),u(m,{key:1,"model-value":b(t).temperature,onChange:b(t).changeTemperatureAction,step:.1,min:.1,max:2},null,8,["model-value","onChange","step","min"]))])),_:1},8,["label"])]),d("div",aa,[p(s,{class:"mb-0",field:"theme",label:"主题"},{default:c((()=>[d("div",la,[p(O,{"model-value":b(l).themeMode,type:"button",onChange:r},{default:c((()=>[p(w,{value:"light"},{default:c((()=>[p(g)])),_:1}),p(w,{value:"dark"},{default:c((()=>[p(h)])),_:1}),p(w,{value:"auto"},{default:c((()=>[p(k)])),_:1})])),_:1},8,["model-value"]),d("span",oa,S(a[b(l).themeMode]),1)])])),_:1}),A("",!0)])])),_:1},512)])])),_:1},8,["outer-class"])}}}),na=s({__name:"SettingDrawer",setup(e){const a=t(!1);return(e,t)=>{const l=m,o=q;return i(),k(O,null,[p(l,{onClick:t[0]||(t[0]=G((e=>a.value=!0),["stop"]))},{default:c((()=>[_("系统设置")])),_:1}),p(o,{visible:b(a),"onUpdate:visible":t[1]||(t[1]=e=>f(a)?a.value=e:null),width:"100%","render-to-body":!1,class:"settings-drawer",title:"设置中心","cancel-text":"关闭","drawer-style":{maxWidth:"500px"}},{default:c((()=>[p(ra)])),_:1},8,["visible"])],64)}}}),sa=e=>(ie("data-v-436087f0"),e=e(),ue(),e),ia=sa((()=>d("img",{class:"w-8 h-8",src:tt,alt:"1024 智能 AI"},null,-1))),ua=sa((()=>d("h1",{class:"text-base m-0"},"1024 智能 AI",-1))),ca=sa((()=>d("i",{class:"flex-1"},null,-1))),da=wt(s({__name:"App",setup(e){const{VITE_FEATURES:a}={VITE_BASE_URL:"/",VITE_PORT:"3000",VITE_DROP_CONSOLE:"true",VITE_FEATURES:"CHAT",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},l=ae(),o=le(),{isMobileScreen:r}=at(),n=h((()=>l.name)),s=t(!1),v=lt(),g=e=>{try{o.push({name:e})}catch(t){w.error("路由未实现~")}},S=e=>{s.value=!1,o.push(e)};return(e,t)=>{const o=y("icon-menu"),w=m,h=y("RouterLink"),C=y("icon-message"),T=Q,x=y("icon-pen-fill"),j=y("icon-apps"),M=y("icon-question-circle"),E=y("icon-info-circle"),P=H,I=y("icon-right"),L=Ot,z=St,D=oe,V=y("icon-more"),R=ht,$=re,B=ne,N=U,W=y("RouterView"),G=se,F=it;return i(),k(O,null,[p(G,{class:"w-full h-full bg-[var(--color-neutral-1)]"},{default:c((()=>{var m;return[p(B,{class:te(["h-14 flex items-center bg-white dark:bg-dark pr-2",{"pl-2":!(null==(m=e.$route.meta)?void 0:m.hideLogoText)&&b(r)}])},{default:c((()=>{var m,y;return[!(null==(m=e.$route.meta)?void 0:m.hideLogoText)&&b(r)?(i(),u(w,{key:0,onClick:b(v).toggleCollapsedAction},{icon:c((()=>[p(o)])),_:1},8,["onClick"])):A("",!0),p(h,{to:"/",class:te(["header-logo",[{"is-mobile":b(r)},(null==(y=e.$route.meta)?void 0:y.hideLogoText)?"justify-start pl-4":"justify-center"]])},{default:c((()=>[ia,ua])),_:1},8,["class"]),b(r)?A("",!0):(i(),u(P,{key:1,onMenuItemClick:g,mode:"horizontal","selected-keys":[b(n)],class:"header-menu"},{default:c((()=>[b(a).includes("CHAT")?(i(),u(T,{key:"Chat",class:"ml-auto"},{icon:c((()=>[p(C)])),default:c((()=>[_(" 聊天 ")])),_:1})):A("",!0),b(a).includes("DRAW")?(i(),u(T,{key:"Draw"},{icon:c((()=>[p(x)])),default:c((()=>[_(" 绘图 ")])),_:1})):A("",!0),b(a).includes("TOOLS")?(i(),u(T,{key:"Tools"},{icon:c((()=>[p(j)])),default:c((()=>[_(" 工具 ")])),_:1})):A("",!0),p(T,{key:"Tutorial"},{icon:c((()=>[p(M)])),default:c((()=>[_(" 使用说明 ")])),_:1}),p(T,{key:"About"},{icon:c((()=>[p(E)])),default:c((()=>[_(" 关于我们 ")])),_:1})])),_:1},8,["selected-keys"])),ca,b(r)||b(l).meta.hideSetup?A("",!0):(i(),u(D,{key:2,class:"mr-2"},{default:c((()=>[p(w,{class:"px-1",onClick:b(v).toggleHeaderCollapsedAction},{default:c((()=>[p(I,{class:te(["header-collapsed",{"is-collapsed":!b(v).headerSettingCollapsed}])},null,8,["class"])])),_:1},8,["onClick"]),d("div",{class:te(["flex flex-nowrap overflow-hidden transition-all",b(v).headerSettingCollapsed?"Draw"!==e.$route.name?"w-[28.5rem]":"w-60":"w-0"])},["Draw"!==e.$route.name?(i(),u(L,{key:0,class:"w-48 mr-2"})):A("",!0),p(z,{class:"w-60"})],2)])),_:1})),p($,{trigger:"click","popup-visible":b(s),"onUpdate:popupVisible":t[3]||(t[3]=e=>f(s)?s.value=e:null),"content-class":"mr-2"},{content:c((()=>["Chat"!==b(l).name||b(r)?(i(),u(R,{key:0})):A("",!0),d("div",{class:te(["grid gap-3 grid-cols-2",b(r)?"grid-cols-2":"grid-cols-1"])},[b(r)?(i(),k(O,{key:0},["Chat"!==b(l).name?(i(),u(w,{key:0,onClick:t[0]||(t[0]=e=>S("chat"))},{default:c((()=>[_(" 聊天 ")])),_:1})):A("",!0),"Tutorial"!==b(l).name?(i(),u(w,{key:1,onClick:t[1]||(t[1]=e=>S("/tutorial"))},{default:c((()=>[_(" 使用说明 ")])),_:1})):A("",!0),"About"!==b(l).name?(i(),u(w,{key:2,onClick:t[2]||(t[2]=e=>S("/about"))},{default:c((()=>[_(" 关于我们 ")])),_:1})):A("",!0)],64)):A("",!0),p(na),p(w,{target:"_blank",href:"https://www.houfaka.com/links/193B8193"},{default:c((()=>[_(" 购买会员 ")])),_:1})],2)])),default:c((()=>[p(w,null,{default:c((()=>[p(V)])),_:1})])),_:1},8,["popup-visible"])]})),_:1},8,["class"]),p(N,{class:"m-0"}),p(G,{class:"flex-1 overflow-hidden relative"},{default:c((()=>[b(r)?A("",!0):(i(),u(W,{key:0,name:"sider"})),p(G,{class:"flex-1 overflow-hidden"},{default:c((()=>[p(W)])),_:1})])),_:1})]})),_:1}),p(Yt,{visible:b(v).collapsed,"onUpdate:visible":t[4]||(t[4]=e=>b(v).collapsed=e)},null,8,["visible"]),p($t),p(F)],64)}}}),[["__scopeId","data-v-436087f0"]]),pa=(e,t)=>{const a=t.value,l=new Date(a),o=`${l.getFullYear()}-${("0"+(l.getMonth()+1)).slice(-2)}-${("0"+l.getDate()).slice(-2)} ${("0"+l.getHours()).slice(-2)}:${("0"+l.getMinutes()).slice(-2)}:${("0"+l.getSeconds()).slice(-2)}`;e.textContent=o},_a={mounted:pa,updated:pa},ba=(e,t)=>{const{value:a}=t,l=lt(),o=ce({size:200,padding:16,data:a,background:"dark"===l.themeMode?"#232324":"#999999",foreground:"dark"===l.themeMode?"#f4f4f4":"#000000"});e.innerHtml="",e.appendChild(o)},fa={mounted:ba,updated:ba},va={},ma=function(e,t,a){if(!t||0===t.length)return e();const l=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in va)return;va[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(!!a)for(let a=l.length-1;a>=0;a--){const o=l[a];if(o.href===e&&(!t||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${e}"]${o}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},{VITE_FEATURES:ga}={VITE_BASE_URL:"/",VITE_PORT:"3000",VITE_DROP_CONSOLE:"true",VITE_FEATURES:"CHAT",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},wa=[{path:"/",name:"Home",components:{default:()=>ma((()=>import("./HomeView-ebd93f9f.js")),["static/js/HomeView-ebd93f9f.js","static/js/.pnpm-22857cbc.js","static/css/.pnpm-dcab1434.css","static/css/HomeView-f07e170a.css"])},meta:{hideSetup:!0,hideLogoText:!0}},{path:"/tutorial",name:"Tutorial",component:()=>ma((()=>import("./TutorialView-ce453e19.js")),["static/js/TutorialView-ce453e19.js","static/js/.pnpm-22857cbc.js","static/css/.pnpm-dcab1434.css"])},{path:"/about",name:"About",component:()=>ma((()=>import("./AboutView-daa052ad.js")),["static/js/AboutView-daa052ad.js","static/js/.pnpm-22857cbc.js","static/css/.pnpm-dcab1434.css","static/css/AboutView-30426d27.css"])}];ga.includes("CHAT")&&wa.push({path:"/chat",name:"Chat",components:{sider:()=>ma((()=>Promise.resolve().then((()=>Kt))),void 0),default:()=>ma((()=>import("./ChatView-dd1f3f42.js")),["static/js/ChatView-dd1f3f42.js","static/js/.pnpm-22857cbc.js","static/css/.pnpm-dcab1434.css","static/css/ChatView-876098da.css"])}}),ga.includes("TOOLS")&&wa.push({path:"/tools",name:"Tools",component:()=>ma((()=>import("./ToolsView-5aa513c0.js")),["static/js/ToolsView-5aa513c0.js","static/js/.pnpm-22857cbc.js","static/css/.pnpm-dcab1434.css","static/css/ToolsView-5828883b.css"])}),ga.includes("DRAW")&&wa.push({path:"/draw",name:"Draw",component:()=>ma((()=>import("./DrawView-6060a3f7.js")),["static/js/DrawView-6060a3f7.js","static/js/.pnpm-22857cbc.js","static/css/.pnpm-dcab1434.css","static/css/DrawView-e9eb73f3.css"])});const ha=de({history:pe("/"),routes:wa}),ya=_e();ya.use(be);const Sa=fe(da);var ka;Sa.use(ya),Sa.use(ha),Sa.use(ve),(ka=Sa).directive("qr",fa),ka.directive("date-time",_a),Sa.mount("#app");export{_t as D,pt as I,ut as S,tt as _,e as __vite_legacy_guard,wt as a,Ct as b,Tt as c,bt as d,at as e,Fe as f,Bt as u};
