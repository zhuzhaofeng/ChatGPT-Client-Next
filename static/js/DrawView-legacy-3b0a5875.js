System.register(["./.pnpm-legacy-1e1223b8.js","./index-legacy-a18ac003.js"],(function(a,e){"use strict";var t,l,o,r,s,i,d,n,c,u,m,p,w,b,v,f,g,x,y,h,_,k,V,z,j,C,A,D,E,S,U,I,T,B,F,L,M,O,R,G,J,P,W,X,Z,$,q,H,K,N=document.createElement("style");return N.textContent=".draw-view[data-v-6a846abb]{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important;border-radius:.5rem!important;margin-left:auto!important;margin-right:auto!important;max-width:56rem!important;padding:2.5rem!important;--tw-shadow: 0 10px 15px -3px rgb(0 0 0/.1),0 4px 6px -4px rgb(0 0 0/.1) !important;--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color) !important;-webkit-box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)!important;width:100%!important}.dark .draw-view[data-v-6a846abb]{--tw-bg-opacity: 1 !important;background-color:rgba(35,35,36,var(--tw-bg-opacity))!important}.draw-view.is-mobile[data-v-6a846abb]{padding:1rem!important}.draw-view.is-mobile[data-v-6a846abb] .arco-radio-button:before{display:none}.draw-view[data-v-6a846abb] .arco-tabs-nav-tab{-webkit-box-pack:start!important;-ms-flex-pack:start!important;-webkit-justify-content:flex-start!important;justify-content:flex-start!important}.draw-view[data-v-6a846abb] .arco-tabs-nav-tab .arco-tabs-nav-tab-list{width:auto!important}.draw-view[data-v-6a846abb] .arco-image{width:100%!important}.draw-view[data-v-6a846abb] .arco-image .arco-image-img{-o-object-fit:cover!important;object-fit:cover!important;width:100%!important}\n",document.head.appendChild(N),{setters:[a=>{t=a.o,l=a.as,o=a.d,r=a.r,s=a.M,i=a.c,d=a.at,n=a.e,c=a.au,u=a.f,m=a.am,p=a.g,w=a.h,b=a.i,v=a.k,f=a.j,g=a.m,x=a.l,y=a.x,h=a.u,_=a.F,k=a._,V=a.s,z=a.av,j=a.aw,C=a.ax,A=a.B,D=a.ay,E=a.X,S=a.U,U=a.Z,I=a.az,T=a.aA,B=a.aB,F=a.J,L=a.t,M=a.ap,O=a.aC,R=a.y,G=a.T,J=a.aD,P=a.aE,W=a.aF,X=a.aG},a=>{Z=a.d,$=a.r,q=a.e,H=a.D,K=a.a}],execute:function(){const e=o("__AI_1024_STORE_DRAW",(()=>{const a=Z(),e=r(!1),l=r([]);return t((()=>{})),{draws:l,loading:e,imageDrawAction:t=>{e.value=!0,$({...t,card:a.card},{onController(a){},onSuccess(a){e.value=!1,l.value.push({prompt:t.prompt,size:t.size,urls:a.data.map((a=>`data:image/png;base64, ${a.b64_json}`)),date:a.created})},onError(a){e.value=!1,s.error(a?.message??"")}})}}}),{persist:{storage:localStorage,paths:["draws"]}}),N={class:"flex items-center gap-x-5"},Q={class:"text-xs px-2 py-1"},Y={class:"flex flex-col gap-y-1 select-none"};a("default",K(i({__name:"DrawView",setup(a){const{isMobileScreen:o}=q(),i=d({prompt:"",size:"256x256",n:1,response_format:"b64_json"}),Z=r(0),$=n((()=>z(H,2)[Z.value])),K=()=>{const a=z(H,2).length-1,e=Z.value+1>a?0:Z.value+1;Z.value=e},aa=e(),ea=n((()=>aa.loading));(a=>{const e=e=>{a&&(e.returnValue="浏览器正在关闭或刷新页面！")};t((()=>{window.addEventListener("beforeunload",e)})),l((()=>{window.removeEventListener("beforeunload",e)}))})(ea),c((async()=>!ea.value||await new Promise(((a,e)=>{R.warning({title:"提示",okText:"离开",hideCancel:!1,content:"AI已经开始处理您的请求，此时刷新或离开页面，也会造成您的积分扣除，确定刷新或离开吗？",onOk(){a(!0)},onCancel(){e(!1)}})}))));const ta=()=>{i.prompt.trim().length<1?s.error("关键词不能为空"):aa.imageDrawAction(i)},la=n((()=>aa.draws));return(a,e)=>{const t=u("icon-exclamation-circle-fill"),l=j,r=C,s=u("icon-loop"),d=A,n=G,c=u("icon-robot"),z=D,R=E,Z=S,q=U,H=J,aa=P,oa=W,ra=X,sa=I,ia=T,da=B,na=F,ca=m("date-time");return p(),w(na,{"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:b((()=>[v("div",{class:k(["draw-view",{"is-mobile":h(o)}])},[f(l,{type:"info",class:"max-w-max mx-auto rounded-full text-xs"},{icon:b((()=>[f(t)])),default:b((()=>[g(" 根据输入关键词生成~大约需要30s左右时间 ")])),_:1}),v("div",N,[f(r,{class:"h-12 flex items-center",bold:""},{default:b((()=>[g(" 关键词示例 ")])),_:1}),f(d,{type:"text",size:"mini",onClick:K},{default:b((()=>[f(s)])),_:1})]),(p(!0),x(_,null,y(h($),(a=>(p(),x("div",{key:a.tag,class:"flex items-center gap-x-1 mb-2"},[v("mark",Q,L(a.tag),1),f(n,{type:"secondary",copyable:"",class:"mb-0"},{default:b((()=>[g(L(a.keywords),1)])),_:2},1024)])))),128)),f(z,{loading:h(ea),class:"w-full mt-4",size:"large",autofocus:"",modelValue:h(i).prompt,"onUpdate:modelValue":e[0]||(e[0]=a=>h(i).prompt=a),placeholder:"请用中文输入关键词如上，参考形式: 画面主体，细节描述，修饰词","search-button":"",onSearch:ta},{"button-icon":b((()=>[f(c)])),"button-default":b((()=>[g("生成")])),_:1},8,["loading","modelValue"]),f(q,{model:h(i),class:k([{"is-mobile":h(o)},"mt-4 p-4 bg-light-300 dark:bg-dark-900 rounded"]),"label-col-props":{span:h(o)?24:void 0},"auto-label-width":!h(o),"label-align":"left"},{default:b((()=>[f(r,{class:"block",bold:""},{default:b((()=>[g(" 参数设置 ")])),_:1}),f(Z,{label:"图片尺寸",class:"mb-2"},{default:b((()=>[v("div",{class:k(["w-full",{"grid grid-cols-2 gap-y-2":h(o)}])},[f(R,{class:"min-w-max",modelValue:h(i).size,"onUpdate:modelValue":e[1]||(e[1]=a=>h(i).size=a),type:"button",value:"256x256"},{default:b((()=>[g(" 256x256(小图) ")])),_:1},8,["modelValue"]),f(R,{class:"min-w-max",modelValue:h(i).size,"onUpdate:modelValue":e[2]||(e[2]=a=>h(i).size=a),type:"button",value:"512x512"},{default:b((()=>[g(" 512x512(中图) ")])),_:1},8,["modelValue"]),f(R,{class:"min-w-max",modelValue:h(i).size,"onUpdate:modelValue":e[3]||(e[3]=a=>h(i).size=a),type:"button",value:"1024x1024"},{default:b((()=>[g(" 1024x1024(大图) ")])),_:1},8,["modelValue"])],2)])),_:1}),f(Z,{help:"每张图片 20 积分","validate-status":"warning",label:"图片数量",class:"mb-2"},{default:b((()=>[v("div",{class:k(["w-full",{"grid grid-cols-5 gap-y-2":h(o)}])},[(p(),x(_,null,y(10,(a=>f(R,{class:"min-w-max",modelValue:h(i).n,"onUpdate:modelValue":e[4]||(e[4]=a=>h(i).n=a),type:"button",key:a,value:a},{default:b((()=>[g(L(a)+"张 ",1)])),_:2},1032,["modelValue","value"]))),64))],2)])),_:1})])),_:1},8,["model","class","label-col-props","auto-label-width"]),h(la).length?(p(),w(da,{key:0,class:"mt-6",type:"capsule"},{default:b((()=>[f(ia,{key:"1",title:"我的作品"},{default:b((()=>[f(sa,{"default-active-key":[1],accordion:""},{default:b((()=>[(p(!0),x(_,null,y(h(la).reverse(),(a=>(p(),w(ra,{key:a.date},{extra:b((()=>[f(H,{color:"red",size:"small"},{default:b((()=>[g(L(a.urls.length)+"张",1)])),_:2},1024)])),header:b((()=>[v("div",Y,[f(n,{class:"mb-0",ellipsis:{rows:1,expandable:!0}},{default:b((()=>[g(L(a.prompt),1)])),_:2},1024),M(v("small",{style:O({color:"var(--color-text-3)"})},null,4),[[ca,1e3*a.date]])])])),default:b((()=>[f(oa,{infinite:""},{default:b((()=>[v("div",{class:k(["grid gap-3",[h(o)?"grid-cols-2":"grid-cols-5"]])},[(p(!0),x(_,null,y(a.urls,(a=>(p(),w(aa,{key:a,src:a},null,8,["src"])))),128))],2)])),_:2},1024),f(l,{type:"info",class:"max-w-max mx-auto rounded-full text-xs my-4"},{icon:b((()=>[f(t)])),default:b((()=>[g(" 尺寸: "+L(a.size),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):V("",!0)],2)])),_:1})}}}),[["__scopeId","data-v-6a846abb"]]))}}}));
