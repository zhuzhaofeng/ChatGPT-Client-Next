function e(){import.meta.url,import("_").catch((()=>1))}import{r as t,w as a,o as l,a as o,d as r,M as n,b as s,c as i,e as u,f as c,g as d,h as p,i as _,j as b,k as f,t as v,u as m,l as g,F as w,m as h,B as y,D as S,n as O,p as k,C,q as T,s as j,T as x,v as A,I as M,S as E,x as P,y as I,O as z,z as L,A as D,E as V,G as R,H as $,J as U,K as H,L as B,N,P as W,Q as G,R as F,U as Q,V as q,W as K,X as Y,Y as J,Z as X,_ as Z,$ as ee,a0 as te,a1 as ae,a2 as le,a3 as oe,a4 as re,a5 as ne,a6 as se,a7 as ie,a8 as ue,a9 as ce,aa as de,ab as pe,ac as _e,ad as be,ae as fe}from"./.pnpm-ae80df3b.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ve=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_1-3c7fc505.webp"},Symbol.toStringTag,{value:"Module"})),me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_10-cdffa6ab.webp"},Symbol.toStringTag,{value:"Module"})),ge=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_11-d175b882.webp"},Symbol.toStringTag,{value:"Module"})),we=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_12-aa2654f6.webp"},Symbol.toStringTag,{value:"Module"})),he=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_13-1d98f6fe.webp"},Symbol.toStringTag,{value:"Module"})),ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_14-e9f19696.webp"},Symbol.toStringTag,{value:"Module"})),Se=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_15-fe682768.webp"},Symbol.toStringTag,{value:"Module"})),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_16-4a96f5c0.webp"},Symbol.toStringTag,{value:"Module"})),ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_18-f6495ba0.webp"},Symbol.toStringTag,{value:"Module"})),Te=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_19-e69559f6.webp"},Symbol.toStringTag,{value:"Module"})),je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),xe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_20-97cc1b4e.webp"},Symbol.toStringTag,{value:"Module"})),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_21-eb1491fc.webp"},Symbol.toStringTag,{value:"Module"})),Me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_22-bd4d7b79.webp"},Symbol.toStringTag,{value:"Module"})),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_23-4e88c4c3.webp"},Symbol.toStringTag,{value:"Module"})),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_24-9bd1e134.webp"},Symbol.toStringTag,{value:"Module"})),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_25-3405a612.webp"},Symbol.toStringTag,{value:"Module"})),ze=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_26-0cbf4eec.webp"},Symbol.toStringTag,{value:"Module"})),Le=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_27-2a36802d.webp"},Symbol.toStringTag,{value:"Module"})),De=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_28-0964a7b4.webp"},Symbol.toStringTag,{value:"Module"})),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_29-d15bed96.webp"},Symbol.toStringTag,{value:"Module"})),Re=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_3-f6e09394.webp"},Symbol.toStringTag,{value:"Module"})),$e=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_30-72380853.webp"},Symbol.toStringTag,{value:"Module"})),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_31-ea4dbf65.webp"},Symbol.toStringTag,{value:"Module"})),He=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_32-54189dcb.webp"},Symbol.toStringTag,{value:"Module"})),Be=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_33-10c4e4c7.webp"},Symbol.toStringTag,{value:"Module"})),Ne=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_34-ad543579.webp"},Symbol.toStringTag,{value:"Module"})),We=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_35-7742e627.webp"},Symbol.toStringTag,{value:"Module"})),Ge="/static/webp/user_avatar_36-01c052bc.webp",Fe=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"})),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_4-e4407157.webp"},Symbol.toStringTag,{value:"Module"})),qe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_5-ed7e3439.webp"},Symbol.toStringTag,{value:"Module"})),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_6-1d9247ea.webp"},Symbol.toStringTag,{value:"Module"})),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_7-552fc562.webp"},Symbol.toStringTag,{value:"Module"})),Je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_8-5e8cee41.webp"},Symbol.toStringTag,{value:"Module"})),Xe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_9-d4eab830.webp"},Symbol.toStringTag,{value:"Module"})),Ze=Object.assign({"./user_avatar_1.webp":ve,"./user_avatar_10.webp":me,"./user_avatar_11.webp":ge,"./user_avatar_12.webp":we,"./user_avatar_13.webp":he,"./user_avatar_14.webp":ye,"./user_avatar_15.webp":Se,"./user_avatar_16.webp":Oe,"./user_avatar_17.webp":ke,"./user_avatar_18.webp":Ce,"./user_avatar_19.webp":Te,"./user_avatar_2.webp":je,"./user_avatar_20.webp":xe,"./user_avatar_21.webp":Ae,"./user_avatar_22.webp":Me,"./user_avatar_23.webp":Ee,"./user_avatar_24.webp":Pe,"./user_avatar_25.webp":Ie,"./user_avatar_26.webp":ze,"./user_avatar_27.webp":Le,"./user_avatar_28.webp":De,"./user_avatar_29.webp":Ve,"./user_avatar_3.webp":Re,"./user_avatar_30.webp":$e,"./user_avatar_31.webp":Ue,"./user_avatar_32.webp":He,"./user_avatar_33.webp":Be,"./user_avatar_34.webp":Ne,"./user_avatar_35.webp":We,"./user_avatar_36.webp":Fe,"./user_avatar_4.webp":Qe,"./user_avatar_5.webp":qe,"./user_avatar_6.webp":Ke,"./user_avatar_7.webp":Ye,"./user_avatar_8.webp":Je,"./user_avatar_9.webp":Xe});Object.keys(Ze).forEach((e=>{e.replace("./","").replace(".webp",""),Ze[e].default}));var et=(e=>(e.Enter="Enter",e.ShiftEnter="Shift + Enter",e))(et||{});const tt=["gpt-4","gpt-3.5-turbo"],at={"gpt-4":100,"gpt-3.5-turbo":3,"gpt-4-32k-0314":0,"gpt-4-32k":0,"gpt-4-0314":0,"gpt-3.5-turbo-0301":0,"text-davinci-003":0,"text-davinci-002":0,"text-curie-001":0,"text-babbage-001":0,"text-ada-001":0,"text-davinci-001":0,"davinci-instruct-beta":0,davinci:0,"curie-instruct-beta":0,curie:0,ada:0,babbage:0},lt="/v1/images/generations",ot=[{tag:"未来科技",keywords:"高科技、未来技术、智能化、机器人、自动化、人工智能、机器学习"},{tag:"自然生态",keywords:"大自然、环境保护、生态平衡、气候变化、可持续发展、生物多样性"},{tag:"艺术文化",keywords:"艺术创作、绘画、摄影、雕塑、老文明、历史遗迹、传统手工艺、博物馆"},{tag:"时尚美妆",keywords:"时尚、美妆、个人风格、服装设计、时装周、红毯盛典"},{tag:"美食文化",keywords:"食品、美食文化、烹饪技艺、餐饮业、营养健康、美食分享"},{tag:"旅游文化",keywords:"旅游、景点、旅行体验、文化交流、民俗风情、地方特色"},{tag:"数字化生活",keywords:"社交媒体、数字化、网络文化、在线教育、游戏娱乐、移动支付"},{tag:"娱乐休闲",keywords:"电影、电视剧、综艺节目、音乐会、演唱会、运动会"},{tag:"商业经济",keywords:"商业、经济、金融、股票、基金、保险、创业、创新、投资、贸易"},{tag:"教育培训",keywords:"教育、培训、学习、教育科技、校园生活、学生社团、研究生活"},{tag:"科学研究",keywords:"科学、研究、实验室、科学家、科学成果、学术交流、科学普及"},{tag:"数字艺术",keywords:"数码艺术、VR艺术、游戏美术、互动媒体、AR/VR技术"}];function rt(e){const r=t(window.innerWidth),n=t(),s=()=>{n.value=r.value<844};a(n,(()=>{e&&e(n.value)}),{immediate:!0}),s();const i=()=>{r.value=window.innerWidth,s()};return l((()=>{window.addEventListener("resize",i)})),o((()=>{window.removeEventListener("resize",i)})),{screenWidth:r,isMobileScreen:n}}const nt=r("__AI_1024_STORE_CONFIG",(()=>{const e=t({$schema:"",api:"",modules:["CHAT"]});l((()=>{d.value=et.Enter,tt.includes(r.value)||(r.value="gpt-3.5-turbo"),fetch("/bootstrap.json").then((e=>e.json())).then((t=>{e.value=t,_(u.value)}))}));const a=t(!1),o=t("light"),r=t("gpt-3.5-turbo"),i=t(!1),u=t(""),c=t(),d=t(et.ShiftEnter),p=t(.7);function _(t){i.value=!0,u.value=t;const a=`${e.value.api}/v1/card?card=${t}`;fetch(a).then((e=>e.json())).then((e=>{200!==e.code?(u.value&&n.error(e.msg),c.value=void 0):c.value=e.data})).finally((()=>{i.value=!1}))}rt((e=>{a.value=e})),s((()=>{"dark"===o.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{card:u,cardInfo:c,bootstrap:e,collapsed:a,themeMode:o,chatModel:r,submitKey:d,temperature:p,setupCardLoading:i,setupCardAction:_,changeModeAction:function(e){o.value=e},toggleCollapsedAction:()=>{a.value=!a.value},changeChatModelAction:function(e){r.value=e},changeSubmitKeyAction:function(e){d.value=e},changeTemperatureAction:function(e){p.value=e<.1?.1:e>2?2:e}}}),{persist:[{storage:localStorage,paths:["themeMode","chatModel","card","submitKey","temperature","cardInfo"]}]}),st={class:"flex items-center gap-x-4 text-primary"},it={class:"text-primary"},ut={class:"text-info"},ct={key:1,class:"text-primary"},dt=(e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a},pt=dt(i({__name:"PointsCard",setup(e){const t=nt(),a=u((()=>t.setupCardLoading));return(e,l)=>{const o=c("icon-refresh"),r=y,n=S,s=O,i=k,u=C;return d(),p(u,{class:"points-card",loading:m(a),bordered:!1},{default:_((()=>[b(i,{size:"mini",column:1},{default:_((()=>[b(n,{label:"账号"},{default:_((()=>[f("span",st,[f("span",null,v(m(t).cardInfo?"会员":"游客"),1),b(r,{size:"mini",type:"text",onClick:l[0]||(l[0]=e=>m(t).setupCardAction(m(t).card)),shape:"circle"},{default:_((()=>[b(o)])),_:1})])])),_:1}),b(n,{label:"状态"},{default:_((()=>{var e;return[b(s,{size:"small",status:"processing",text:m(t).cardInfo?(null==(e=m(t).cardInfo)?void 0:e.enable)?"正常":"禁用":"正常"},null,8,["text"])]})),_:1}),b(n,{label:"积分"},{default:_((()=>{var e,a;return[m(t).cardInfo?(d(),g(w,{key:0},[f("span",it,v((null==(e=m(t).cardInfo)?void 0:e.remain_points)||0),1),h(" / "),f("span",ut,v((null==(a=m(t).cardInfo)?void 0:a.points)||0),1)],64)):(d(),g("span",ct,"每日五次免费调用"))]})),_:1})])),_:1})])),_:1},8,["loading"])}}}),[["__scopeId","data-v-4ec5a039"]]),_t={class:"flex items-center"},bt=i({__name:"SetupCard",setup(e){const a=nt(),o=t(""),r=u((()=>a.setupCardLoading)),n=()=>{o.value!==a.card&&a.setupCardAction(o.value)};return l((()=>{o.value=a.card})),(e,t)=>{const l=x,s=c("icon-info-circle"),i=A,u=M,v=E;return d(),p(v,{loading:m(r)},{default:_((()=>[b(u,{error:!m(a).cardInfo&&!!m(a).card,modelValue:m(o),"onUpdate:modelValue":t[0]||(t[0]=e=>T(o)?o.value=e:null),type:"password",onBlur:n,"allow-clear":"",placeholder:"请输入积分卡"},{suffix:_((()=>[f("div",_t,[m(o)?(d(),p(l,{key:0,class:"mb-0",copyable:"","copy-text":m(o)},null,8,["copy-text"])):j("",!0),!m(a).cardInfo&&m(a).card?(d(),p(i,{key:1,content:"您的积分不足、积分卡已过期或输入错误。请检查并重新输入。",position:"bottom","content-style":{maxWidth:"240px","margin-right":"16px"}},{default:_((()=>[b(s,{class:"cursor-pointer text-danger"})])),_:1})):j("",!0)])])),_:1},8,["error","modelValue"])])),_:1},8,["loading"])}}}),ft={class:"text-info"},vt=i({__name:"ChangeChatModel",setup(e){const t=nt(),a=async e=>{String(e).indexOf("gpt-4")>-1?await new Promise(((a,l)=>{I.warning({title:"提示",okText:"继续",hideCancel:!1,content:()=>b("div",{class:"whitespace-pre-wrap flex flex-col gap-y-1 leading-5 indent"},[h("请注意：由于 GPT-4 模型的成本较高，因此问题字数应保持在 1000 个 token 以下（大约 500 个汉字）。如果超出该限制，将自动截断。为了避免 AI 回答内容截断，建议尽量让 AI 一次性回复完整个问题。如果 AI 回答的内容过长，也会造成内容截断，进而引起回复不连贯。如果要使用GPT-4建议在新的会话中使用，是否确认切换至 GPT-4？")]),onOk(){a(),t.changeChatModelAction(e)},onCancel(){l()}})})):t.changeChatModelAction(e)};return(e,l)=>{const o=z,r=L;return d(),p(r,{"model-value":m(t).chatModel,onChange:a,"allow-clear":!1,placeholder:"Please select model..."},{label:_((({data:e})=>[h(v(e.value),1)])),default:_((()=>[(d(!0),g(w,null,P("ALL_MODELS"in e?e.ALL_MODELS:m(tt),(t=>(d(),p(o,{key:t,value:t},{default:_((()=>[h(v(t)+" ",1),f("small",ft,"("+v(("POINTS_MAP"in e?e.POINTS_MAP:m(at))[t])+"积分一次)",1)])),_:2},1032,["value"])))),128))])),_:1},8,["model-value"])}}}),mt="/static/svg/openai-66faffcb.svg",gt=r("__AI_1024_STORE_LAYOUT",(()=>{const e=t(!0),a=t(!1),l=t(!0),o=t("light");rt((()=>{a.value=!1}));s((()=>{"dark"===o.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{collapsed:a,themeMode:o,isShowContact:e,changeModeAction:function(e){o.value=e},toggleCollapsedAction:e=>{a.value=void 0!==e?e:!a.value},headerSettingCollapsed:l,changeShowContactAction:t=>{e.value=t},toggleHeaderCollapsedAction:()=>{l.value=!l.value}}}),{persist:[{storage:localStorage,paths:["themeMode","headerSettingCollapsed"]},{storage:sessionStorage,paths:["isShowContact"]}]}),wt="/QQ.png",ht="/WeChat.png",yt=f("div",{class:"header-logo gap-x-2"},[f("img",{class:"w-6 h-6",src:mt,alt:"1024 智能 AI"}),f("h1",{class:"text-base m-0"},"1024 智能 AI")],-1),St=f("div",null,[h(" 一款"),f("mark",null,"便捷的"),h("、"),f("mark",null,"免登录"),h("和"),f("mark",null,"无需魔法"),h("的ChatGPT工具 ")],-1),Ot=f("div",null,[h(" 网址经常变更，所以使用前一定要记得先加群！！！ 群内不定时 "),f("mark",null,"发放免费积分卡")],-1),kt=f("div",null,[h(" 积分卡购买地址： "),f("a",{href:"https://www.houfaka.com/links/193B8193",target:"_blank"}," https://www.houfaka.com/links/193B8193 ")],-1),Ct=f("br",null,null,-1),Tt=f("div",null,[h(" 平时如没有特殊需要，建议使用 "),f("b",null,"gpt-3.5-turbo"),h("即可，"),f("b",null,"gpt-3.5-turbo"),h("完全能应对大部分场景 ")],-1),jt=f("div",null,[f("b",null,"gpt-4.0"),h(" 成本非常昂贵，是"),f("b",null,"gpt-3.5-turbo"),h("的 "),f("b",null,"30-60倍"),h("，反应时间也不如 "),f("b",null,"gpt-3.5-turbo")],-1),xt=f("br",null,null,-1),At=f("div",null," 大家多多支持，你们的支持才是我们的动力，即将推出语音聊天与绘画功能，敬请期待！！！ ",-1),Mt=f("br",null,null,-1),Et=f("div",{class:"grid grid-cols-2"},[f("div",{class:"flex flex-col items-center gap-y-2 py-2"},[f("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"QQ",src:wt}),f("span",{class:""},"QQ群")]),f("div",{class:"flex flex-col items-center gap-y-2 py-2"},[f("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"WeChat",src:ht}),f("span",{class:""},"微信群")])],-1),Pt={class:"flex items-center justify-center"},It=i({__name:"ContactModel",setup(e){const l=gt(),o=t(!1);a((()=>l.isShowContact),(e=>{o.value=e}),{immediate:!0});const r=()=>{o.value=!1,l.changeShowContactAction(!1)};return(e,t)=>{const a=y,l=I;return d(),p(l,{class:"contact-model","esc-to-close":!1,"mask-closable":!1,"title-align":"start",visible:m(o),"onUpdate:visible":t[0]||(t[0]=e=>T(o)?o.value=e:null),onClose:r},{title:_((()=>[yt])),footer:_((()=>[f("div",Pt,[b(a,{onClick:r,type:"primary"},{default:_((()=>[h(" 我已加入 ")])),_:1})])])),default:_((()=>[St,Ot,kt,Ct,Tt,jt,xt,At,Mt,Et])),_:1},8,["visible"])}}});function zt(e=16){return Number(Math.random().toString().substring(3,e)+Date.now()).toString(36)}function Lt(e){return{id:zt(),date:Date.now().valueOf(),role:"user",content:"",...e}}const Dt=r("__AI_1024_STORE_CHAT",(()=>{const e=nt(),a=t(new AbortController),o={id:zt(),topic:"",sendMemory:!0,messages:[],lastUpdate:(new Date).getTime(),lastSummarizeIndex:0},r=t(),i=t([]),u=t(),c=t(!1);s((()=>{u.value=i.value.find((({id:e})=>e===r.value))}));const d=()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort());const l=zt();i.value.unshift(V({...o,topic:"",id:l})),r.value=l},p=e=>{var t;return null==(t=u.value)?void 0:t.messages.find((({id:t})=>e===t))},_=async(t,l,o=!0)=>{var r;if(!(null==t?void 0:t.length))return void n.error("请输入您的消息");const s=await(async t=>{var a;e.chatModel;const l=((null==(a=u.value)?void 0:a.messages)||[]).filter((e=>!e.isError)),o=V(l.concat(t)).map((({role:e,content:t})=>({role:e,content:t})));return o.length>20?o.slice(o.length-20,o.length):o})({role:"user",content:t}),i={card:(null==(r=e.cardInfo)?void 0:r.enable)?e.card:void 0,messages:s,temperature:e.temperature,model:e.chatModel,is_stream:!0},d=Lt({role:"user",content:t});o&&u.value.messages.push(d);const _=Lt({role:"assistant",streaming:!0,content:""});u.value.messages.push(_),c.value=!0,async function(e,t){const a=new AbortController;(null==t?void 0:t.onController)&&t.onController(a);const l=`${nt().bootstrap.api}/v1/chat/completions`;await D.post(l,e,{responseType:"stream",timeout:3e4,headers:{Accept:"application/json","Content-Type":"application/json"},signal:a.signal,onDownloadProgress(e){var a,l;null==t||t.onMessage(null==(l=null==(a=null==e?void 0:e.event)?void 0:a.target)?void 0:l.responseText,!1)}}).then((e=>{null==t||t.onMessage(null==e?void 0:e.data,!0)})).catch((e=>{var a;null==t||t.onError(e,null==(a=null==e?void 0:e.response)?void 0:a.status)}))}(i,{onController(e){a.value=e},onMessage(e,t){var a;if(p(_.id).content=e,l&&l(t),t&&(c.value=!1,p(_.id).streaming=!1,p(_.id).date=(new Date).valueOf(),!(null==(a=u.value)?void 0:a.topic))){const e=d.content.trim().replace(/\r/g,"");u.value.topic=e.length>30?e.slice(0,30):e}},onError(e,t){c.value=!1,D.isCancel(e)||(401===t?p(_.id).content="请输入积分卡":p(_.id).content+=void 0!==t?`\n\n\`${(null==e?void 0:e.message)||"出错了，稍后重试吧"}\``:"\n\n`网络异常, 请稍后重试!`"),p(_.id).streaming=!1,p(_.id).isError=!0,p(_.id).date=(new Date).valueOf(),l&&l(!0)}})};return l((()=>{var e;c.value=!1,(null==(e=i.value)?void 0:e.length)<1?d():i.value.forEach((e=>{e.messages.forEach((e=>{e.streaming=!1}))}))})),{session:u,sessions:i,fetching:c,currentChat:r,abortController:a,newChatAction:d,clearSessions:()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort()),I.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除所有会话信息, 此操作不可逆!!!",onOk(){i.value=[],d()}})},removeChatAction:e=>{I.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除当前选择会话?",onOk(){var t,l;const o=i.value.findIndex((t=>t.id===e));e!==r.value?i.value.splice(o,1):(i.value.length>1&&(r.value=i.value[0].id),i.value.splice(o,1),(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),0===i.value.length&&d())}})},sendMessageAction:_,messageRetryAction:(e,t)=>{var a,l;null==(a=u.value)||a.messages.splice(e,1);const o=null==(l=u.value)?void 0:l.messages[e-1];_((null==o?void 0:o.content)||"",t,!1)},changeCurrentChatAction:e=>{var t,l,o,n;(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),null==(n=null==(o=u.value)?void 0:o.messages)||n.forEach((e=>e.streaming=!1)),r.value=e},handleChangeSessionTopicAction:e=>{var t;u.value.topic=e||(null==(t=u.value)?void 0:t.topic)||""}}}),{persist:{storage:localStorage}}),Vt=i({__name:"ChangeSessionTopic",setup(e){const a=t(!1),l=t(""),o=Dt(),r=()=>{o.handleChangeSessionTopicAction(l.value)},n=()=>{var e;l.value=(null==(e=o.session)?void 0:e.topic)||"新的聊天"};return(e,t)=>{const o=M,s=I;return d(),g(w,null,[f("div",{onClick:t[0]||(t[0]=e=>a.value=!0)},[R(e.$slots,"default")]),b(s,{onBeforeOpen:n,visible:m(a),"onUpdate:visible":t[2]||(t[2]=e=>T(a)?a.value=e:null),title:"修改会话标题","hide-cancel":"","modal-style":{"max-width":"80%"},onOk:r},{default:_((()=>[b(o,{"max-length":30,modelValue:m(l),"onUpdate:modelValue":t[1]||(t[1]=e=>T(l)?l.value=e:null),placeholder:"请输入当前会话标题"},null,8,["modelValue"])])),_:1},8,["visible"])],64)}}}),Rt={class:"h-full flex flex-col items-stretch overflow-hidden"},$t={class:"h-14 flex items-center px-2 gap-x-2 bg-white dark:bg-dark"},Ut={class:"flex-1 truncate"},Ht={class:"flex items-center justify-between p-4 bg-white dark:bg-dark text-sm"},Bt=dt(i({__name:"MessageList",props:{isDrawer:Boolean},setup(e){const t=gt(),{isMobileScreen:a}=rt(),l=Dt(),o=e=>{t.toggleCollapsedAction(!1),l.changeCurrentChatAction(String(e))},r=(e,a)=>{({newChat(){l.newChatAction(),t.toggleCollapsedAction(!1)},close(){t.toggleCollapsedAction(!1)},editor(){n.info("编辑")},del(){l.removeChatAction(a)}})[e]()};return(n,s)=>{const i=c("icon-plus"),u=y,S=c("icon-close"),O=$,k=c("icon-close-circle"),C=c("icon-edit"),T=Vt,x=G,A=F,M=U,E=H,I=$,z=pt,L=c("icon-robot-add"),D=B,V=N;return d(),g(w,null,[b(V,{width:200,class:"chat-message_list"},{default:_((()=>[f("div",Rt,[f("div",$t,[b(u,{class:"flex-1",type:"primary",onClick:s[0]||(s[0]=e=>r("newChat"))},{icon:_((()=>[b(i)])),default:_((()=>[h(" New Chat ")])),_:1}),m(a)?(d(),p(u,{key:0,onClick:s[1]||(s[1]=e=>r("close"))},{icon:_((()=>[b(S)])),_:1})):j("",!0)]),b(O,{class:"m-0"}),b(E,{"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full px-0 flex flex-col gap-y-2"},{default:_((()=>[b(M,{"default-open-keys":["0"],"default-selected-keys":["0_1"],"selected-keys":[m(l).currentChat],onMenuItemClick:o},{default:_((()=>[(d(!0),g(w,null,P(m(l).sessions,(e=>(d(),p(A,{class:"chat-item",key:e.id},{default:_((()=>[f("span",Ut,v(e.topic||"新的聊天"),1),b(x,{size:"mini",class:"actions"},{default:_((()=>[b(u,{onClick:W((t=>r("del",e.id)),["stop"]),class:"flex items-center justify-center"},{icon:_((()=>[b(k,{class:"m-0"})])),_:2},1032,["onClick"]),b(T,null,{default:_((()=>[b(u,{class:"flex items-center justify-center"},{icon:_((()=>[b(C,{class:"m-0"})])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["selected-keys"])])),_:1}),b(I,{class:"my-2"}),b(z,{class:"is-chat"}),f("div",Ht,[b(D,{type:"primary",onClick:m(l).clearSessions},{icon:_((()=>[b(L)])),default:_((()=>[h(" 清除会话 ")])),_:1},8,["onClick"]),b(D,{onClick:s[2]||(s[2]=()=>m(t).changeShowContactAction(!0)),type:"primary"},{icon:_((()=>[b(L)])),default:_((()=>[h(" 加入群聊 ")])),_:1})])])])),_:1}),e.isDrawer?j("",!0):(d(),p(O,{key:0,class:"m-0 h-full",direction:"vertical"}))],64)}}}),[["__scopeId","data-v-7184c3bf"]]),Nt=Object.freeze(Object.defineProperty({__proto__:null,default:Bt},Symbol.toStringTag,{value:"Module"})),Wt=i({__name:"MessageListDrawer",setup:e=>(e,t)=>{const a=Q;return d(),p(a,{width:"100%","hide-cancel":"",placement:"left",header:!1,footer:!1,class:"message-drawer","drawer-style":{maxWidth:"350px"}},{default:_((()=>[b(Bt,{"is-drawer":""})])),_:1})}}),Gt={class:"max-w-4xl w-full mx-auto"},Ft={class:"setting-card dark:bg-dark"},Qt={class:"text-primary"},qt={class:"setting-card dark:bg-dark"},Kt={class:"setting-card dark:bg-dark"},Yt={class:"setting-card dark:bg-dark"},Jt={class:"flex flex-wrap gap-y-2 items-center"},Xt={class:"font-medium pl-4 text-primary"},Zt=i({__name:"SettingsView",setup(e){const t=nt(),a={light:"浅色模式",dark:"深色模式",auto:"跟随系统"},l=gt(),{isMobileScreen:o}=rt(),r=e=>{l.changeModeAction(e)};return(e,n)=>{const s=q,i=bt,u=vt,g=K,w=Y,h=c("icon-sun"),y=J,S=c("icon-moon"),O=c("icon-relation"),k=X,C=Z,T=H;return d(),p(T,{"outer-style":"flex: 1; overflow: hidden;","outer-class":["settings-wrapper",{"is-mobile":m(o)}],class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:_((()=>[f("div",Gt,[b(C,{ref:"formRef","label-col-props":{span:12},"label-align":"left",model:{},class:"w-full mt-0 flex flex-col gap-y-3"},{default:_((()=>[f("div",Ft,[b(s,{"label-col-flex":"1","label-attrs":{align:"left"},class:"mb-0 font-medium pl-4 dark:text-light-900 nowrap",field:"theme",label:"Version"},{default:_((()=>[f("span",Qt,"v"+v(m("1.0.1")),1)])),_:1})]),f("div",qt,[b(s,{class:"mb-0",field:"card",label:"积分卡"},{default:_((()=>[b(i,{class:"w-full"})])),_:1})]),f("div",Kt,[b(s,{class:"mb-0",field:"modelConfig.model",label:"模型(Model)"},{default:_((()=>[b(u,{class:"w-full"})])),_:1}),b(s,{class:"mb-0",field:"modelConfig.temperature",label:m(o)?"随机性 (temperature)":`随机性 (temperature): ${m(t).temperature}`},{default:_((()=>[m(o)?(d(),p(g,{key:0,max:2,step:.1,min:.1,precision:.1,"model-value":m(t).temperature,onChange:m(t).changeTemperatureAction,mode:"button"},null,8,["step","min","precision","model-value","onChange"])):(d(),p(w,{key:1,"model-value":m(t).temperature,onChange:m(t).changeTemperatureAction,step:.1,min:.1,max:2},null,8,["model-value","onChange","step","min"]))])),_:1},8,["label"])]),f("div",Yt,[b(s,{class:"mb-0",field:"theme",label:"主题"},{default:_((()=>[f("div",Jt,[b(k,{"model-value":m(l).themeMode,type:"button",onChange:r},{default:_((()=>[b(y,{value:"light"},{default:_((()=>[b(h)])),_:1}),b(y,{value:"dark"},{default:_((()=>[b(S)])),_:1}),b(y,{value:"auto"},{default:_((()=>[b(O)])),_:1})])),_:1},8,["model-value"]),f("span",Xt,v(a[m(l).themeMode]),1)])])),_:1}),j("",!0)])])),_:1},512)])])),_:1},8,["outer-class"])}}}),ea=i({__name:"SettingDrawer",setup(e){const a=t(!1);return(e,t)=>{const l=y,o=Q;return d(),g(w,null,[b(l,{onClick:t[0]||(t[0]=W((e=>a.value=!0),["stop"]))},{default:_((()=>[h("系统设置")])),_:1}),b(o,{visible:m(a),"onUpdate:visible":t[1]||(t[1]=e=>T(a)?a.value=e:null),width:"100%","render-to-body":!1,class:"settings-drawer",title:"设置中心","cancel-text":"关闭","drawer-style":{maxWidth:"500px"}},{default:_((()=>[b(Zt)])),_:1},8,["visible"])],64)}}}),ta=e=>(se("data-v-437b5c5c"),e=e(),ie(),e),aa=ta((()=>f("img",{class:"w-8 h-8",src:mt,alt:"1024 智能 AI"},null,-1))),la=ta((()=>f("h1",{class:"text-base m-0"},"1024 智能 AI",-1))),oa=ta((()=>f("i",{class:"flex-1"},null,-1))),ra=dt(i({__name:"App",setup(e){const{VITE_FEATURES:a}={VITE_BASE_URL:"/",VITE_PORT:"3000",VITE_DROP_CONSOLE:"true",VITE_FEATURES:"CHAT",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},l=te(),o=ae(),{isMobileScreen:r}=rt(),s=u((()=>l.name)),i=t(!1),v=gt(),S=e=>{try{o.push({name:e})}catch(t){n.error("路由未实现~")}},O=e=>{i.value=!1,o.push(e)};return(e,t)=>{const o=c("icon-menu"),n=y,u=c("RouterLink"),k=c("icon-message"),C=F,x=c("icon-pen-fill"),A=c("icon-apps"),M=c("icon-question-circle"),E=c("icon-info-circle"),P=U,I=c("icon-right"),z=vt,L=bt,D=le,V=c("icon-more"),R=pt,H=oe,B=re,N=$,W=c("RouterView"),G=ne;return d(),g(w,null,[b(G,{class:"w-full h-full bg-[var(--color-neutral-1)]"},{default:_((()=>{var c;return[b(B,{class:ee(["h-14 flex items-center bg-white dark:bg-dark pr-2",{"pl-2":!(null==(c=e.$route.meta)?void 0:c.hideLogoText)&&m(r)}])},{default:_((()=>{var c,y;return[!(null==(c=e.$route.meta)?void 0:c.hideLogoText)&&m(r)?(d(),p(n,{key:0,onClick:m(v).toggleCollapsedAction},{icon:_((()=>[b(o)])),_:1},8,["onClick"])):j("",!0),b(u,{to:"/",class:ee(["header-logo",[{"is-mobile":m(r)},(null==(y=e.$route.meta)?void 0:y.hideLogoText)?"justify-start pl-4":"justify-center"]])},{default:_((()=>[aa,la])),_:1},8,["class"]),m(r)?j("",!0):(d(),p(P,{key:1,onMenuItemClick:S,mode:"horizontal","selected-keys":[m(s)],class:"header-menu"},{default:_((()=>[m(a).includes("CHAT")?(d(),p(C,{key:"Chat",class:"ml-auto"},{icon:_((()=>[b(k)])),default:_((()=>[h(" 聊天 ")])),_:1})):j("",!0),m(a).includes("DRAW")?(d(),p(C,{key:"Draw"},{icon:_((()=>[b(x)])),default:_((()=>[h(" 绘图 ")])),_:1})):j("",!0),m(a).includes("TOOLS")?(d(),p(C,{key:"Tools"},{icon:_((()=>[b(A)])),default:_((()=>[h(" 工具 ")])),_:1})):j("",!0),b(C,{key:"Tutorial"},{icon:_((()=>[b(M)])),default:_((()=>[h(" 使用说明 ")])),_:1}),b(C,{key:"About"},{icon:_((()=>[b(E)])),default:_((()=>[h(" 关于我们 ")])),_:1})])),_:1},8,["selected-keys"])),oa,m(r)||m(l).meta.hideSetup?j("",!0):(d(),p(D,{key:2,class:"mr-2"},{default:_((()=>[b(n,{class:"px-1",onClick:m(v).toggleHeaderCollapsedAction},{default:_((()=>[b(I,{class:ee(["header-collapsed",{"is-collapsed":!m(v).headerSettingCollapsed}])},null,8,["class"])])),_:1},8,["onClick"]),f("div",{class:ee(["flex flex-nowrap overflow-hidden transition-all",m(v).headerSettingCollapsed?"Draw"!==e.$route.name?"w-[28.5rem]":"w-60":"w-0"])},["Draw"!==e.$route.name?(d(),p(z,{key:0,class:"w-48 mr-2"})):j("",!0),b(L,{class:"w-60"})],2)])),_:1})),b(H,{trigger:"click","popup-visible":m(i),"onUpdate:popupVisible":t[3]||(t[3]=e=>T(i)?i.value=e:null),"content-class":"mr-2"},{content:_((()=>["Chat"!==m(l).name||m(r)?(d(),p(R,{key:0})):j("",!0),f("div",{class:ee(["grid gap-3 grid-cols-2",m(r)?"grid-cols-2":"grid-cols-1"])},[m(r)?(d(),g(w,{key:0},["Chat"!==m(l).name?(d(),p(n,{key:0,onClick:t[0]||(t[0]=e=>O("chat"))},{default:_((()=>[h(" 聊天 ")])),_:1})):j("",!0),"Tutorial"!==m(l).name?(d(),p(n,{key:1,onClick:t[1]||(t[1]=e=>O("/tutorial"))},{default:_((()=>[h(" 使用说明 ")])),_:1})):j("",!0),"About"!==m(l).name?(d(),p(n,{key:2,onClick:t[2]||(t[2]=e=>O("/about"))},{default:_((()=>[h(" 关于我们 ")])),_:1})):j("",!0)],64)):j("",!0),b(ea),b(n,{target:"_blank",href:"https://www.houfaka.com/links/193B8193"},{default:_((()=>[h(" 购买会员 ")])),_:1})],2)])),default:_((()=>[b(n,null,{default:_((()=>[b(V)])),_:1})])),_:1},8,["popup-visible"])]})),_:1},8,["class"]),b(N,{class:"m-0"}),b(G,{class:"flex-1 overflow-hidden relative"},{default:_((()=>[m(r)?j("",!0):(d(),p(W,{key:0,name:"sider"})),b(G,{class:"flex-1 overflow-hidden"},{default:_((()=>[b(W)])),_:1})])),_:1})]})),_:1}),b(Wt,{visible:m(v).collapsed,"onUpdate:visible":t[4]||(t[4]=e=>m(v).collapsed=e)},null,8,["visible"]),b(It)],64)}}}),[["__scopeId","data-v-437b5c5c"]]),na=(e,t)=>{const a=t.value,l=new Date(a),o=`${l.getFullYear()}-${("0"+(l.getMonth()+1)).slice(-2)}-${("0"+l.getDate()).slice(-2)} ${("0"+l.getHours()).slice(-2)}:${("0"+l.getMinutes()).slice(-2)}:${("0"+l.getSeconds()).slice(-2)}`;e.textContent=o},sa={mounted:na,updated:na},ia=(e,t)=>{const{value:a}=t,l=gt(),o=ue({size:200,padding:16,data:a,background:"dark"===l.themeMode?"#232324":"#999999",foreground:"dark"===l.themeMode?"#f4f4f4":"#000000"});e.innerHtml="",e.appendChild(o)},ua={mounted:ia,updated:ia},ca={},da=function(e,t,a){if(!t||0===t.length)return e();const l=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in ca)return;ca[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(!!a)for(let a=l.length-1;a>=0;a--){const o=l[a];if(o.href===e&&(!t||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${e}"]${o}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},{VITE_FEATURES:pa}={VITE_BASE_URL:"/",VITE_PORT:"3000",VITE_DROP_CONSOLE:"true",VITE_FEATURES:"CHAT",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1},_a=[{path:"/",name:"Home",components:{default:()=>da((()=>import("./HomeView-f93365ee.js")),["static/js/HomeView-f93365ee.js","static/js/.pnpm-ae80df3b.js","static/css/.pnpm-4f44b0c6.css","static/css/HomeView-f07e170a.css"])},meta:{hideSetup:!0,hideLogoText:!0}},{path:"/tutorial",name:"Tutorial",component:()=>da((()=>import("./TutorialView-9565c1c3.js")),["static/js/TutorialView-9565c1c3.js","static/js/.pnpm-ae80df3b.js","static/css/.pnpm-4f44b0c6.css"])},{path:"/about",name:"About",component:()=>da((()=>import("./AboutView-7925732b.js")),["static/js/AboutView-7925732b.js","static/js/.pnpm-ae80df3b.js","static/css/.pnpm-4f44b0c6.css","static/css/AboutView-30426d27.css"])}];pa.includes("CHAT")&&_a.push({path:"/chat",name:"Chat",components:{sider:()=>da((()=>Promise.resolve().then((()=>Nt))),void 0),default:()=>da((()=>import("./ChatView-0fbeab5a.js")),["static/js/ChatView-0fbeab5a.js","static/js/.pnpm-ae80df3b.js","static/css/.pnpm-4f44b0c6.css","static/css/ChatView-876098da.css"])}}),pa.includes("TOOLS")&&_a.push({path:"/tools",name:"Tools",component:()=>da((()=>import("./ToolsView-4db63c0c.js")),["static/js/ToolsView-4db63c0c.js","static/js/.pnpm-ae80df3b.js","static/css/.pnpm-4f44b0c6.css","static/css/ToolsView-5828883b.css"])}),pa.includes("DRAW")&&_a.push({path:"/draw",name:"Draw",component:()=>da((()=>import("./DrawView-be960004.js")),["static/js/DrawView-be960004.js","static/js/.pnpm-ae80df3b.js","static/css/.pnpm-4f44b0c6.css","static/css/DrawView-e9eb73f3.css"])});const ba=ce({history:de("/"),routes:_a}),fa=pe();fa.use(_e);const va=be(ra);var ma;va.use(fa),va.use(ba),va.use(fe),(ma=va).directive("qr",ua),ma.directive("date-time",sa),va.mount("#app");export{ot as D,lt as I,et as S,mt as _,e as __vite_legacy_guard,dt as a,wt as b,ht as c,nt as d,rt as e,Ge as f,Dt as u};
