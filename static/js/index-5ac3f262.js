function e(){import.meta.url,import("_").catch((()=>1))}import{r as t,w as a,o as l,a as r,d as o,M as n,b as s,c as i,e as u,f as c,g as d,h as p,i as _,j as b,k as f,n as v,u as m,t as g,l as w,F as h,m as y,B as S,D as k,p as O,q as C,C as j,s as x,v as T,x as M,T as A,I as E,S as P,y as z,N as I,O as L,z as V,A as D,E as $,G as R,H as U,J as N,K as W,L as H,P as B,Q,R as q,U as K,V as F,W as G,X as J,Y,Z as X,_ as Z,$ as ee,a0 as te,a1 as ae,a2 as le,a3 as re,a4 as oe,a5 as ne,a6 as se,a7 as ie,a8 as ue,a9 as ce,aa as de,ab as pe,ac as _e,ad as be,ae as fe,af as ve,ag as me}from"./.pnpm-d6690a6d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ge=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_1-3c7fc505.webp"},Symbol.toStringTag,{value:"Module"})),we=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_10-cdffa6ab.webp"},Symbol.toStringTag,{value:"Module"})),he=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_11-d175b882.webp"},Symbol.toStringTag,{value:"Module"})),ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_12-aa2654f6.webp"},Symbol.toStringTag,{value:"Module"})),Se=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_13-1d98f6fe.webp"},Symbol.toStringTag,{value:"Module"})),ke=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_14-e9f19696.webp"},Symbol.toStringTag,{value:"Module"})),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_15-fe682768.webp"},Symbol.toStringTag,{value:"Module"})),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_16-4a96f5c0.webp"},Symbol.toStringTag,{value:"Module"})),je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),xe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_18-f6495ba0.webp"},Symbol.toStringTag,{value:"Module"})),Te=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_19-e69559f6.webp"},Symbol.toStringTag,{value:"Module"})),Me=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_2-8f514ef4.webp"},Symbol.toStringTag,{value:"Module"})),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_20-97cc1b4e.webp"},Symbol.toStringTag,{value:"Module"})),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_21-eb1491fc.webp"},Symbol.toStringTag,{value:"Module"})),Pe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_22-bd4d7b79.webp"},Symbol.toStringTag,{value:"Module"})),ze=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_23-4e88c4c3.webp"},Symbol.toStringTag,{value:"Module"})),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_24-9bd1e134.webp"},Symbol.toStringTag,{value:"Module"})),Le=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_25-3405a612.webp"},Symbol.toStringTag,{value:"Module"})),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_26-0cbf4eec.webp"},Symbol.toStringTag,{value:"Module"})),De=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_27-2a36802d.webp"},Symbol.toStringTag,{value:"Module"})),$e=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_28-0964a7b4.webp"},Symbol.toStringTag,{value:"Module"})),Re=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_29-d15bed96.webp"},Symbol.toStringTag,{value:"Module"})),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_3-f6e09394.webp"},Symbol.toStringTag,{value:"Module"})),Ne=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_30-72380853.webp"},Symbol.toStringTag,{value:"Module"})),We=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_31-ea4dbf65.webp"},Symbol.toStringTag,{value:"Module"})),He=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_32-54189dcb.webp"},Symbol.toStringTag,{value:"Module"})),Be=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_33-10c4e4c7.webp"},Symbol.toStringTag,{value:"Module"})),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_34-ad543579.webp"},Symbol.toStringTag,{value:"Module"})),qe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_35-7742e627.webp"},Symbol.toStringTag,{value:"Module"})),Ke="/static/webp/user_avatar_36-01c052bc.webp",Fe=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"})),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_4-e4407157.webp"},Symbol.toStringTag,{value:"Module"})),Je=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_5-ed7e3439.webp"},Symbol.toStringTag,{value:"Module"})),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_6-1d9247ea.webp"},Symbol.toStringTag,{value:"Module"})),Xe=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_7-552fc562.webp"},Symbol.toStringTag,{value:"Module"})),Ze=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_8-5e8cee41.webp"},Symbol.toStringTag,{value:"Module"})),et=Object.freeze(Object.defineProperty({__proto__:null,default:"/static/webp/user_avatar_9-d4eab830.webp"},Symbol.toStringTag,{value:"Module"})),tt=Object.assign({"./user_avatar_1.webp":ge,"./user_avatar_10.webp":we,"./user_avatar_11.webp":he,"./user_avatar_12.webp":ye,"./user_avatar_13.webp":Se,"./user_avatar_14.webp":ke,"./user_avatar_15.webp":Oe,"./user_avatar_16.webp":Ce,"./user_avatar_17.webp":je,"./user_avatar_18.webp":xe,"./user_avatar_19.webp":Te,"./user_avatar_2.webp":Me,"./user_avatar_20.webp":Ae,"./user_avatar_21.webp":Ee,"./user_avatar_22.webp":Pe,"./user_avatar_23.webp":ze,"./user_avatar_24.webp":Ie,"./user_avatar_25.webp":Le,"./user_avatar_26.webp":Ve,"./user_avatar_27.webp":De,"./user_avatar_28.webp":$e,"./user_avatar_29.webp":Re,"./user_avatar_3.webp":Ue,"./user_avatar_30.webp":Ne,"./user_avatar_31.webp":We,"./user_avatar_32.webp":He,"./user_avatar_33.webp":Be,"./user_avatar_34.webp":Qe,"./user_avatar_35.webp":qe,"./user_avatar_36.webp":Fe,"./user_avatar_4.webp":Ge,"./user_avatar_5.webp":Je,"./user_avatar_6.webp":Ye,"./user_avatar_7.webp":Xe,"./user_avatar_8.webp":Ze,"./user_avatar_9.webp":et});Object.keys(tt).forEach((e=>{e.replace("./","").replace(".webp",""),tt[e].default}));var at=(e=>(e.Enter="Enter",e.ShiftEnter="Shift + Enter",e))(at||{});const lt=["gpt-4-0314","gpt-4","gpt-3.5-turbo-0301","gpt-3.5-turbo"],rt={"gpt-4-32k-0314":32768,"gpt-4-32k":32768,"gpt-4-0314":1e3,"gpt-4":1e3,"gpt-3.5-turbo-0301":4096,"gpt-3.5-turbo":4096,"text-davinci-003":4097,"text-davinci-002":8001,"text-davinci-001":8001,"text-curie-001":2049,"text-babbage-001":2049,"text-ada-001":2049,"davinci-instruct-beta":2049,davinci:2049,"curie-instruct-beta":2049,curie:2049,ada:2049,babbage:2049},ot="/v1/chat/completions",nt=[{tag:"未来科技",keywords:"高科技、未来技术、智能化、机器人、自动化、人工智能、机器学习"},{tag:"自然生态",keywords:"大自然、环境保护、生态平衡、气候变化、可持续发展、生物多样性"},{tag:"艺术文化",keywords:"艺术创作、绘画、摄影、雕塑、老文明、历史遗迹、传统手工艺、博物馆"},{tag:"时尚美妆",keywords:"时尚、美妆、个人风格、服装设计、时装周、红毯盛典"},{tag:"美食文化",keywords:"食品、美食文化、烹饪技艺、餐饮业、营养健康、美食分享"},{tag:"旅游文化",keywords:"旅游、景点、旅行体验、文化交流、民俗风情、地方特色"},{tag:"数字化生活",keywords:"社交媒体、数字化、网络文化、在线教育、游戏娱乐、移动支付"},{tag:"娱乐休闲",keywords:"电影、电视剧、综艺节目、音乐会、演唱会、运动会"},{tag:"商业经济",keywords:"商业、经济、金融、股票、基金、保险、创业、创新、投资、贸易"},{tag:"教育培训",keywords:"教育、培训、学习、教育科技、校园生活、学生社团、研究生活"},{tag:"科学研究",keywords:"科学、研究、实验室、科学家、科学成果、学术交流、科学普及"},{tag:"数字艺术",keywords:"数码艺术、VR艺术、游戏美术、互动媒体、AR/VR技术"}];function st(e){const o=t(window.innerWidth),n=t(),s=()=>{n.value=o.value<844};a(n,(()=>{e&&e(n.value)}),{immediate:!0}),s();const i=()=>{o.value=window.innerWidth,s()};return l((()=>{window.addEventListener("resize",i)})),r((()=>{window.removeEventListener("resize",i)})),{screenWidth:o,isMobileScreen:n}}const it=o("__AI_1024_STORE_CONFIG",(()=>{const e=t({$schema:"",api:"",modules:["CHAT"]});l((()=>{d.value=at.Enter,lt.includes(o.value)||(o.value="gpt-3.5-turbo"),fetch("/bootstrap.json").then((e=>e.json())).then((t=>{e.value=t,_(u.value)}))}));const a=t(!1),r=t("light"),o=t("gpt-3.5-turbo"),i=t(!1),u=t(""),c=t(),d=t(at.ShiftEnter),p=t(.7);function _(t){i.value=!0,u.value=t;const a=`${e.value.api}/v1/card?card=${t}`;fetch(a).then((e=>e.json())).then((e=>{200!==e.code?(u.value&&n.error(e.msg),c.value=void 0):c.value=e.data})).finally((()=>{i.value=!1}))}st((e=>{a.value=e})),s((()=>{"dark"===r.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{card:u,cardInfo:c,bootstrap:e,collapsed:a,themeMode:r,chatModel:o,submitKey:d,temperature:p,setupCardLoading:i,setupCardAction:_,changeModeAction:function(e){r.value=e},toggleCollapsedAction:()=>{a.value=!a.value},changeChatModelAction:function(e){o.value=e},changeSubmitKeyAction:function(e){d.value=e},changeTemperatureAction:function(e){p.value=e<.1?.1:e>2?2:e}}}),{persist:[{storage:localStorage,paths:["themeMode","chatModel","card","submitKey","temperature","cardInfo"]}]}),ut={class:"text-primary"},ct={class:"text-info"},dt={key:1,class:"text-primary"},pt=(e,t)=>{const a=e.__vccOpts||e;for(const[l,r]of t)a[l]=r;return a},_t=pt(i({__name:"PointsCard",setup(e){const t=it(),a=u((()=>t.setupCardLoading));return(e,l)=>{const r=c("icon-refresh"),o=S,n=k,s=O,i=C,u=j;return d(),p(u,{class:"points-card",loading:m(a),bordered:!1},{default:_((()=>[b(i,{size:"mini",column:1},{default:_((()=>[b(n,{label:"账号"},{default:_((()=>[f("span",{class:v(["flex items-center gap-x-4",[m(t).cardInfo?"text-primary":"text-danger"]])},[f("span",null,g(m(t).cardInfo?"会员":"游客"),1),b(o,{size:"mini",type:"text",onClick:l[0]||(l[0]=e=>m(t).setupCardAction(m(t).card)),shape:"circle"},{default:_((()=>[b(r)])),_:1})],2)])),_:1}),b(n,{label:"状态"},{default:_((()=>{var e,a;return[b(s,{size:"small",status:(null==(e=m(t).cardInfo)?void 0:e.enable)?"processing":"danger",text:m(t).cardInfo?(null==(a=m(t).cardInfo)?void 0:a.enable)?"正常":"禁用":"正常"},null,8,["status","text"])]})),_:1}),b(n,{label:"积分"},{default:_((()=>{var e,a;return[m(t).cardInfo?(d(),w(h,{key:0},[f("span",ut,g((null==(e=m(t).cardInfo)?void 0:e.remain_points)||0),1),y(" / "),f("span",ct,g((null==(a=m(t).cardInfo)?void 0:a.points)||0),1)],64)):(d(),w("span",dt,"每日五次免费调用"))]})),_:1})])),_:1})])),_:1},8,["loading"])}}}),[["__scopeId","data-v-89015793"]]),bt=i({__name:"SetupCard",setup(e){const a=it(),r=t(""),o=u((()=>a.setupCardLoading)),n=x((e=>{a.setupCardAction(e)}),500);return l((()=>{r.value=a.card})),(e,t)=>{const l=c("icon-info-circle"),s=A,i=E,u=P;return d(),p(u,{loading:m(o)},{default:_((()=>[b(i,{error:!m(a).cardInfo&&!!m(a).card,modelValue:m(r),"onUpdate:modelValue":t[0]||(t[0]=e=>T(r)?r.value=e:null),onInput:m(n),"allow-clear":"",placeholder:"请输入积分卡"},M({_:2},[!m(a).cardInfo&&m(a).card?{name:"suffix",fn:_((()=>[b(s,{content:"您的积分不足、积分卡已过期或输入错误。请检查并重新输入。",position:"bottom","content-style":{maxWidth:"240px","margin-right":"16px"}},{default:_((()=>[b(l,{class:"cursor-pointer text-danger"})])),_:1})])),key:"0"}:void 0]),1032,["error","modelValue","onInput"])])),_:1},8,["loading"])}}}),ft=i({__name:"ChangeChatModel",setup(e){const t=it(),a=e=>{String(e).indexOf("gpt-4")>-1&&(I.clear(),I.warning({title:"提示",closeIconElement:()=>b(S,{size:"mini"},{default:()=>[y("关闭")]}),duration:0,content:()=>b("div",{class:"whitespace-pre-wrap flex flex-col gap-y-1 leading-5"},[b("strong",null,[y("gpt-4成本昂贵")]),b("span",null,[y("问题字数应该保持在1000token以下(大约500个汉字)")]),b("span",null,[y("尽量让ai一次性回复完。如果AI回答的内容过长，会造成内容截断，可以让AI继续回答，但是会消耗积分。")])]),closable:!0})),t.changeChatModelAction(e)};return(e,l)=>{const r=L,o=V;return d(),p(o,{"model-value":m(t).chatModel,onChange:a,"allow-clear":!1,placeholder:"Please select model..."},{default:_((()=>[(d(!0),w(h,null,z("ALL_MODELS"in e?e.ALL_MODELS:m(lt),(e=>(d(),p(r,{key:e,value:e},{default:_((()=>[y(g(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["model-value"])}}}),vt="/static/svg/openai-66faffcb.svg",mt=o("__AI_1024_STORE_LAYOUT",(()=>{const e=t(!0),a=t(!1),l=t(!0),r=t("light");st((()=>{a.value=!1}));s((()=>{"dark"===r.value?(document.documentElement.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.documentElement.classList.remove("dark"),document.body.removeAttribute("arco-theme"))}));return{collapsed:a,themeMode:r,isShowContact:e,changeModeAction:function(e){r.value=e},toggleCollapsedAction:e=>{a.value=void 0!==e?e:!a.value},headerSettingCollapsed:l,changeShowContactAction:t=>{e.value=t},toggleHeaderCollapsedAction:()=>{l.value=!l.value}}}),{persist:[{storage:localStorage,paths:["themeMode","headerSettingCollapsed"]},{storage:sessionStorage,paths:["isShowContact"]}]}),gt="/QQ.png",wt="/WeChat.png",ht=f("div",{class:"header-logo gap-x-2"},[f("img",{class:"w-6 h-6",src:vt,alt:"1024 智能 AI"}),f("h1",{class:"text-base m-0"},"1024 智能 AI")],-1),yt=f("div",null,[y(" 一款"),f("mark",null,"便捷的"),y("、"),f("mark",null,"免登录"),y("和"),f("mark",null,"无需魔法"),y("的ChatGPT工具 ")],-1),St=f("div",null,[y(" 网址经常变更，所以使用前一定要记得先加群！！！ 群内不定时 "),f("mark",null,"发放免费积分卡")],-1),kt=f("div",null,[y(" 积分卡购买地址： "),f("a",{href:"https://www.houfaka.com/links/193B8193",target:"_blank"}," https://www.houfaka.com/links/193B8193 ")],-1),Ot=f("br",null,null,-1),Ct=f("div",null,[y(" 平时如没有特殊需要，建议使用 "),f("b",null,"gpt-3.5-turbo"),y("即可，"),f("b",null,"gpt-3.5-turbo"),y("完全能应对大部分场景 ")],-1),jt=f("div",null,[f("b",null,"gpt-4.0"),y(" 成本非常昂贵，是"),f("b",null,"gpt-3.5-turbo"),y("的 "),f("b",null,"30-60倍"),y("，反应时间也不如 "),f("b",null,"gpt-3.5-turbo")],-1),xt=f("br",null,null,-1),Tt=f("div",null," 大家多多支持，你们的支持才是我们的动力，即将推出语音聊天与绘画功能，敬请期待！！！ ",-1),Mt=f("br",null,null,-1),At=f("div",{class:"grid grid-cols-2"},[f("div",{class:"flex flex-col items-center gap-y-2 py-2"},[f("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"QQ",src:gt}),f("span",{class:""},"QQ群")]),f("div",{class:"flex flex-col items-center gap-y-2 py-2"},[f("img",{class:"max-w-11/12 border-solid border border-gray-200 p-1",alt:"WeChat",src:wt}),f("span",{class:""},"微信群")])],-1),Et={class:"flex items-center justify-center"},Pt=i({__name:"ContactModel",setup(e){const l=mt(),r=t(!1);a((()=>l.isShowContact),(e=>{r.value=e}),{immediate:!0});const o=()=>{r.value=!1,l.changeShowContactAction(!1)};return(e,t)=>{const a=S,l=D;return d(),p(l,{class:"contact-model","esc-to-close":!1,"mask-closable":!1,"title-align":"start",visible:m(r),"onUpdate:visible":t[0]||(t[0]=e=>T(r)?r.value=e:null),onClose:o},{title:_((()=>[ht])),footer:_((()=>[f("div",Et,[b(a,{onClick:o,type:"primary"},{default:_((()=>[y(" 我已加入 ")])),_:1})])])),default:_((()=>[yt,St,kt,Ot,Ct,jt,xt,Tt,Mt,At])),_:1},8,["visible"])}}});function zt(e=16){return Number(Math.random().toString().substring(3,e)+Date.now()).toString(36)}function It(e){return{id:zt(),date:Date.now().valueOf(),role:"user",content:"",...e}}async function Lt(e,t){const a=new AbortController,l=setTimeout((()=>a.abort()),18e4);try{const r=`${it().bootstrap.api}${ot}`,o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:a.signal});clearTimeout(l);if(o.ok);else if(401===o.status)null==t||t.onError(new Error("Anauthorized"),o.status);else if(500===o.status){const e=await o.text();null==t||t.onError(new Error(e),o.status)}else null==t||t.onError(new Error("Stream Error"),o.status)}catch(r){null==t||t.onError(r)}}const Vt=o("__AI_1024_STORE_CHAT",(()=>{const e=it(),a=t(new AbortController),r={id:zt(),topic:"",sendMemory:!0,messages:[],lastUpdate:(new Date).getTime(),lastSummarizeIndex:0},o=t(),i=t([]),u=t(),c=t(!1);s((()=>{u.value=i.value.find((({id:e})=>e===o.value))}));const d=()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort());const l=zt();i.value.unshift($({...r,topic:"",id:l})),o.value=l},p=e=>{var t;return null==(t=u.value)?void 0:t.messages.find((({id:t})=>e===t))},_=(t,l,r=!0)=>{var o;if(!(null==t?void 0:t.length))return void n.error("请输入您的消息");const s=(t=>{var a;const l=rt[e.chatModel]||2049,r=[],o=((null==(a=u.value)?void 0:a.messages)||[]).filter((e=>!e.isError)),n=$(o.concat(t)).map((({role:e,content:t})=>({role:e,content:t})));let s=0;const i=[];try{n.reverse().forEach((e=>{const t=R(e.content).length;if(i.push(t),!(t<l&&s+t<l))throw new Error;s+=t,r.push(e)}))}catch(d){}const c=s<1?n:r;return c.length>20?c.splice(0,20).reverse():c.reverse()})({role:"user",content:t});if(s.length<1)return void n.error("超出模型允许的最大字数，请删减字符");const i={card:(null==(o=e.cardInfo)?void 0:o.enable)?e.card:void 0,messages:s,temperature:e.temperature,model:e.chatModel,is_stream:!0},d=It({role:"user",content:t});r&&u.value.messages.push(d);const _=It({role:"assistant",streaming:!0,content:""});u.value.messages.push(_),c.value=!0,async function(e,t){var a,l;const r=new AbortController,o=setTimeout((()=>r.abort()),10800);try{const n=`${it().bootstrap.api}${ot}`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",path:n},body:JSON.stringify(e),signal:r.signal});clearTimeout(o);let i="";const u=()=>{null==t||t.onMessage(i,!0),r.abort()};if(s.ok){const e=null==(a=s.body)?void 0:a.getReader(),o=new TextDecoder;for(null==(l=null==t?void 0:t.onController)||l.call(t,r);;){const a=setTimeout((()=>u()),10800),l=await(null==e?void 0:e.read());clearTimeout(a);const r=o.decode(null==l?void 0:l.value);i+=r;const n=!l||l.done;if(null==t||t.onMessage(i,!1),n)break}u()}else if(401===s.status)null==t||t.onError(new Error("Anauthorized"),s.status);else if(500===s.status){const e=await s.text();null==t||t.onError(new Error(e),s.status)}else null==t||t.onError(new Error("Stream Error"),s.status)}catch(n){null==t||t.onError(n)}}(i,{onController(e){a.value=e},onMessage(e,t){var a;if(p(_.id).content=e,l&&l(t),t&&(c.value=!1,p(_.id).streaming=!1,p(_.id).date=(new Date).valueOf(),!(null==(a=u.value)?void 0:a.topic))){const e=d.content.trim().replace(/\r/g,"");u.value.topic=e.length>30?e.slice(0,30):e}},onError(e,t){c.value=!1,"AbortError"===(null==e?void 0:e.name)||(401===t?p(_.id).content="请输入积分卡":p(_.id).content+=void 0!==t?`\n\n\`${(null==e?void 0:e.message)||"出错了，稍后重试吧"}\``:"\n\n`网络异常, 请稍后重试!`"),p(_.id).streaming=!1,p(_.id).isError=!0,p(_.id).date=(new Date).valueOf(),l&&l(!0)}})};return l((()=>{var e;(null==(e=i.value)?void 0:e.length)<1&&d()})),{session:u,sessions:i,fetching:c,currentChat:o,abortController:a,newChatAction:d,clearSessions:()=>{var e,t;(null==(e=a.value)?void 0:e.abort)&&(null==(t=a.value)||t.abort()),D.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除所有会话信息, 此操作不可逆!!!",onOk(){i.value=[],d()}})},removeChatAction:e=>{D.warning({title:"操作提示",hideCancel:!1,alignCenter:!1,content:"是否确认移除当前选择会话?",onOk(){var t,l;const r=i.value.findIndex((({id:e})=>e==e));e!==o.value?i.value.splice(r,1):(i.value.length>1&&(o.value=i.value[0===r?r+1:r-1].id),i.value.splice(r,1),(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),0===i.value.length&&d())}})},sendMessageAction:_,messageRetryAction:(e,t)=>{var a,l;null==(a=u.value)||a.messages.splice(e,1);const r=null==(l=u.value)?void 0:l.messages[e-1];_((null==r?void 0:r.content)||"",t,!1)},changeCurrentChatAction:e=>{var t,l,r,n;(null==(t=a.value)?void 0:t.abort)&&(null==(l=a.value)||l.abort()),null==(n=null==(r=u.value)?void 0:r.messages)||n.forEach((e=>e.streaming=!1)),o.value=e},handleChangeSessionTopicAction:e=>{var t;u.value.topic=e||(null==(t=u.value)?void 0:t.topic)||""}}}),{persist:{storage:localStorage}}),Dt=i({__name:"ChangeSessionTopic",setup(e){const a=t(!1),l=t(""),r=Vt(),o=()=>{r.handleChangeSessionTopicAction(l.value)},n=()=>{var e;l.value=(null==(e=r.session)?void 0:e.topic)||"新的聊天"};return(e,t)=>{const r=E,s=D;return d(),w(h,null,[f("div",{onClick:t[0]||(t[0]=e=>a.value=!0)},[U(e.$slots,"default")]),b(s,{onBeforeOpen:n,visible:m(a),"onUpdate:visible":t[2]||(t[2]=e=>T(a)?a.value=e:null),title:"修改会话标题","hide-cancel":"","modal-style":{"max-width":"80%"},onOk:o},{default:_((()=>[b(r,{"max-length":30,modelValue:m(l),"onUpdate:modelValue":t[1]||(t[1]=e=>T(l)?l.value=e:null),placeholder:"请输入当前会话标题"},null,8,["modelValue"])])),_:1},8,["visible"])],64)}}}),$t={class:"h-full flex flex-col items-stretch overflow-hidden"},Rt={class:"h-14 flex items-center px-2 gap-x-2 bg-white dark:bg-dark"},Ut={class:"flex-1 truncate"},Nt={class:"flex items-center justify-between p-4 bg-white dark:bg-dark"},Wt=pt(i({__name:"MessageList",props:{isDrawer:Boolean},setup(e){const t=mt(),{isMobileScreen:a}=st(),l=Vt(),r=e=>{t.toggleCollapsedAction(!1),l.changeCurrentChatAction(String(e))},o=(e,a)=>{({newChat(){l.newChatAction(),t.toggleCollapsedAction(!1)},close(){t.toggleCollapsedAction(!1)},editor(){n.info("编辑")},del(){l.removeChatAction(a)}})[e]()};return(n,s)=>{const i=c("icon-plus"),u=S,v=c("icon-close"),k=W,O=c("icon-close-circle"),C=c("icon-edit"),j=Dt,x=F,T=G,M=H,A=B,E=W,P=_t,I=c("icon-robot-add"),L=Q,V=q;return d(),w(h,null,[b(V,{width:240,class:"chat-message_list"},{default:_((()=>[f("div",$t,[f("div",Rt,[b(u,{class:"flex-1",type:"primary",onClick:s[0]||(s[0]=e=>o("newChat"))},{icon:_((()=>[b(i)])),default:_((()=>[y(" New Chat ")])),_:1}),m(a)?(d(),p(u,{key:0,onClick:s[1]||(s[1]=e=>o("close"))},{icon:_((()=>[b(v)])),_:1})):N("",!0)]),b(k,{class:"m-0"}),b(A,{"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full px-0 flex flex-col gap-y-2"},{default:_((()=>[b(M,{"default-open-keys":["0"],"default-selected-keys":["0_1"],"selected-keys":[m(l).currentChat],onMenuItemClick:r},{default:_((()=>[(d(!0),w(h,null,z(m(l).sessions,(e=>(d(),p(T,{class:"chat-item",key:e.id},{default:_((()=>[f("span",Ut,g(e.topic||"新的聊天"),1),b(x,{size:"mini",class:"actions"},{default:_((()=>[b(u,{onClick:K((t=>o("del",e.id)),["stop"]),class:"flex items-center justify-center"},{icon:_((()=>[b(O,{class:"m-0"})])),_:2},1032,["onClick"]),b(j,null,{default:_((()=>[b(u,{class:"flex items-center justify-center"},{icon:_((()=>[b(C,{class:"m-0"})])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["selected-keys"])])),_:1}),b(E,{class:"my-2"}),b(P,{class:"is-chat"}),f("div",Nt,[b(L,{type:"primary",onClick:m(l).clearSessions},{icon:_((()=>[b(I)])),default:_((()=>[y(" 清除会话 ")])),_:1},8,["onClick"]),b(L,{onClick:s[2]||(s[2]=()=>m(t).changeShowContactAction(!0)),type:"primary"},{icon:_((()=>[b(I)])),default:_((()=>[y(" 加入群聊 ")])),_:1})])])])),_:1}),e.isDrawer?N("",!0):(d(),p(k,{key:0,class:"m-0 h-full",direction:"vertical"}))],64)}}}),[["__scopeId","data-v-c95b367c"]]),Ht=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),Bt=i({__name:"MessageListDrawer",setup:e=>(e,t)=>{const a=J;return d(),p(a,{width:"100%","hide-cancel":"",placement:"left",header:!1,footer:!1,class:"message-drawer","drawer-style":{maxWidth:"350px"}},{default:_((()=>[b(Wt,{"is-drawer":""})])),_:1})}}),Qt={class:"max-w-4xl w-full mx-auto"},qt={class:"setting-card dark:bg-dark"},Kt={class:"text-primary"},Ft={class:"setting-card dark:bg-dark"},Gt={class:"setting-card dark:bg-dark"},Jt={class:"setting-card dark:bg-dark"},Yt={class:"flex flex-wrap gap-y-2 items-center"},Xt={class:"font-medium pl-4 text-primary"},Zt=i({__name:"SettingsView",setup(e){const t=it(),a={light:"浅色模式",dark:"深色模式",auto:"跟随系统"},l=mt(),{isMobileScreen:r}=st(),o=e=>{l.changeModeAction(e)};return(e,n)=>{const s=Y,i=bt,u=ft,v=X,w=Z,h=c("icon-sun"),y=ee,S=c("icon-moon"),k=c("icon-relation"),O=te,C=ae,j=B;return d(),p(j,{"outer-style":"flex: 1; overflow: hidden;","outer-class":["settings-wrapper",{"is-mobile":m(r)}],class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:_((()=>[f("div",Qt,[b(C,{ref:"formRef","label-col-props":{span:12},"label-align":"left",model:{},class:"w-full mt-0 flex flex-col gap-y-3"},{default:_((()=>[f("div",qt,[b(s,{"label-col-flex":"1","label-attrs":{align:"left"},class:"mb-0 font-medium pl-4 dark:text-light-900 nowrap",field:"theme",label:"Version"},{default:_((()=>[f("span",Kt,"v"+g(m("1.0.1")),1)])),_:1})]),f("div",Ft,[b(s,{class:"mb-0",field:"card",label:"积分卡"},{default:_((()=>[b(i,{class:"w-full"})])),_:1})]),f("div",Gt,[b(s,{class:"mb-0",field:"modelConfig.model",label:"模型(Model)"},{default:_((()=>[b(u,{class:"w-full"})])),_:1}),b(s,{class:"mb-0",field:"modelConfig.temperature",label:m(r)?"随机性 (temperature)":`随机性 (temperature): ${m(t).temperature}`},{default:_((()=>[m(r)?(d(),p(v,{key:0,max:2,step:.1,min:.1,precision:.1,"model-value":m(t).temperature,onChange:m(t).changeTemperatureAction,mode:"button"},null,8,["step","min","precision","model-value","onChange"])):(d(),p(w,{key:1,"model-value":m(t).temperature,onChange:m(t).changeTemperatureAction,step:.1,min:.1,max:2},null,8,["model-value","onChange","step","min"]))])),_:1},8,["label"])]),f("div",Jt,[b(s,{class:"mb-0",field:"theme",label:"主题"},{default:_((()=>[f("div",Yt,[b(O,{"model-value":m(l).themeMode,type:"button",onChange:o},{default:_((()=>[b(y,{value:"light"},{default:_((()=>[b(h)])),_:1}),b(y,{value:"dark"},{default:_((()=>[b(S)])),_:1}),b(y,{value:"auto"},{default:_((()=>[b(k)])),_:1})])),_:1},8,["model-value"]),f("span",Xt,g(a[m(l).themeMode]),1)])])),_:1}),N("",!0)])])),_:1},512)])])),_:1},8,["outer-class"])}}}),ea=i({__name:"SettingDrawer",setup(e){const a=t(!1);return(e,t)=>{const l=S,r=J;return d(),w(h,null,[b(l,{onClick:t[0]||(t[0]=K((e=>a.value=!0),["stop"]))},{default:_((()=>[y("系统设置")])),_:1}),b(r,{visible:m(a),"onUpdate:visible":t[1]||(t[1]=e=>T(a)?a.value=e:null),width:"100%","render-to-body":!1,class:"settings-drawer",title:"设置中心","cancel-text":"关闭","drawer-style":{maxWidth:"500px"}},{default:_((()=>[b(Zt)])),_:1},8,["visible"])],64)}}}),ta=e=>(ue("data-v-62c62d2e"),e=e(),ce(),e),aa=ta((()=>f("img",{class:"w-8 h-8",src:vt,alt:"1024 智能 AI"},null,-1))),la=ta((()=>f("h1",{class:"text-base m-0"},"1024 智能 AI",-1))),ra=ta((()=>f("i",{class:"flex-1"},null,-1))),oa=pt(i({__name:"App",setup(e){const a=le(),l=re(),{isMobileScreen:r}=st(),o=u((()=>a.name)),s=t(!1),i=mt(),g=e=>{try{l.push({name:e})}catch(t){n.error("路由未实现~")}},k=e=>{s.value=!1,l.push(e)};return(e,t)=>{const l=c("icon-menu"),n=S,u=c("RouterLink"),O=c("icon-message"),C=G,j=c("icon-question-circle"),x=c("icon-info-circle"),M=H,A=c("icon-right"),E=ft,P=bt,z=oe,I=c("icon-more"),L=_t,V=ne,D=se,$=W,R=c("RouterView"),U=ie;return d(),w(h,null,[b(U,{class:"w-full h-full bg-[var(--color-neutral-1)]"},{default:_((()=>{var c;return[b(D,{class:v(["h-14 flex items-center bg-white dark:bg-dark pr-2",{"pl-2":!(null==(c=e.$route.meta)?void 0:c.hideLogoText)&&m(r)}])},{default:_((()=>{var c,S;return[!(null==(c=e.$route.meta)?void 0:c.hideLogoText)&&m(r)?(d(),p(n,{key:0,onClick:m(i).toggleCollapsedAction},{icon:_((()=>[b(l)])),_:1},8,["onClick"])):N("",!0),b(u,{to:"/",class:v(["header-logo",[{"is-mobile":m(r)},(null==(S=e.$route.meta)?void 0:S.hideLogoText)?"justify-start pl-4":"justify-center"]])},{default:_((()=>[aa,la])),_:1},8,["class"]),m(r)?N("",!0):(d(),p(M,{key:1,onMenuItemClick:g,mode:"horizontal","selected-keys":[m(o)],class:"header-menu"},{default:_((()=>[b(C,{key:"Chat",class:"ml-auto"},{icon:_((()=>[b(O)])),default:_((()=>[y(" 聊天 ")])),_:1}),b(C,{key:"Tutorial"},{icon:_((()=>[b(j)])),default:_((()=>[y(" 使用说明 ")])),_:1}),b(C,{key:"About"},{icon:_((()=>[b(x)])),default:_((()=>[y(" 关于我们 ")])),_:1})])),_:1},8,["selected-keys"])),ra,m(r)?N("",!0):(d(),p(z,{key:2,class:"mr-2"},{default:_((()=>[b(n,{class:"px-1",onClick:m(i).toggleHeaderCollapsedAction},{default:_((()=>[b(A,{class:v(["header-collapsed",{"is-collapsed":!m(i).headerSettingCollapsed}])},null,8,["class"])])),_:1},8,["onClick"]),f("div",{class:v(["flex flex-nowrap overflow-hidden transition-all",m(i).headerSettingCollapsed?"w-[26.5rem]":"w-0"])},[b(E,{class:"w-44 mr-2"}),b(P,{class:"w-60"})],2)])),_:1})),b(V,{trigger:"click","popup-visible":m(s),"onUpdate:popupVisible":t[3]||(t[3]=e=>T(s)?s.value=e:null),"content-class":"mr-2"},{content:_((()=>["Chat"!==m(a).name||m(r)?(d(),p(L,{key:0})):N("",!0),f("div",{class:v(["grid gap-3 grid-cols-2",m(r)?"grid-cols-2":"grid-cols-1"])},[m(r)?(d(),w(h,{key:0},["Chat"!==m(a).name?(d(),p(n,{key:0,onClick:t[0]||(t[0]=e=>k("chat"))},{default:_((()=>[y(" 聊天 ")])),_:1})):N("",!0),"Tutorial"!==m(a).name?(d(),p(n,{key:1,onClick:t[1]||(t[1]=e=>k("/tutorial"))},{default:_((()=>[y(" 使用说明 ")])),_:1})):N("",!0),"About"!==m(a).name?(d(),p(n,{key:2,onClick:t[2]||(t[2]=e=>k("/about"))},{default:_((()=>[y(" 关于我们 ")])),_:1})):N("",!0)],64)):N("",!0),b(ea),b(n,{target:"_blank",href:"https://www.houfaka.com/links/193B8193"},{default:_((()=>[y(" 购买会员 ")])),_:1})],2)])),default:_((()=>[b(n,null,{default:_((()=>[b(I)])),_:1})])),_:1},8,["popup-visible"])]})),_:1},8,["class"]),b($,{class:"m-0"}),b(U,{class:"flex-1 overflow-hidden relative"},{default:_((()=>[m(r)?N("",!0):(d(),p(R,{key:0,name:"sider"})),b(U,{class:"flex-1 overflow-hidden"},{default:_((()=>[b(R)])),_:1})])),_:1})]})),_:1}),b(Bt,{visible:m(i).collapsed,"onUpdate:visible":t[4]||(t[4]=e=>m(i).collapsed=e)},null,8,["visible"]),b(Pt)],64)}}}),[["__scopeId","data-v-62c62d2e"]]),na=(e,t)=>{const a=t.value,l=new Date(a),r=`${l.getFullYear()}-${("0"+(l.getMonth()+1)).slice(-2)}-${("0"+l.getDate()).slice(-2)} ${("0"+l.getHours()).slice(-2)}:${("0"+l.getMinutes()).slice(-2)}:${("0"+l.getSeconds()).slice(-2)}`;e.textContent=r},sa={mounted:na,updated:na},ia=(e,t)=>{const{value:a}=t,l=mt(),r=de({size:200,padding:16,data:a,background:"dark"===l.themeMode?"#232324":"#999999",foreground:"dark"===l.themeMode?"#f4f4f4":"#000000"});e.innerHtml="",e.appendChild(r)},ua={mounted:ia,updated:ia},ca={},da=function(e,t,a){if(!t||0===t.length)return e();const l=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in ca)return;ca[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(!!a)for(let a=l.length-1;a>=0;a--){const r=l[a];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((t,a)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},pa=pe({history:_e("/"),routes:[{path:"/",name:"Home",components:{default:()=>da((()=>import("./HomeView-867a7566.js")),["static/js/HomeView-867a7566.js","static/js/.pnpm-d6690a6d.js","static/css/.pnpm-22c2475a.css","static/css/HomeView-a8dc480c.css"])},meta:{hideLogoText:!0}},{path:"/chat",name:"Chat",components:{sider:()=>da((()=>Promise.resolve().then((()=>Ht))),void 0),default:()=>da((()=>import("./ChatView-46878339.js")),["static/js/ChatView-46878339.js","static/js/.pnpm-d6690a6d.js","static/css/.pnpm-22c2475a.css","static/css/ChatView-2f79cac1.css"])}},{path:"/tools",name:"Tools",component:()=>da((()=>import("./ToolsView-7d1f2b05.js")),["static/js/ToolsView-7d1f2b05.js","static/js/.pnpm-d6690a6d.js","static/css/.pnpm-22c2475a.css","static/css/ToolsView-5828883b.css"])},{path:"/draw",name:"Draw",component:()=>da((()=>import("./DrawView-3afba29a.js")),["static/js/DrawView-3afba29a.js","static/js/.pnpm-d6690a6d.js","static/css/.pnpm-22c2475a.css","static/css/DrawView-7c476c29.css"])},{path:"/tutorial",name:"Tutorial",component:()=>da((()=>import("./TutorialView-19af274d.js")),["static/js/TutorialView-19af274d.js","static/js/.pnpm-d6690a6d.js","static/css/.pnpm-22c2475a.css"])},{path:"/about",name:"About",component:()=>da((()=>import("./AboutView-6e710236.js")),["static/js/AboutView-6e710236.js","static/js/.pnpm-d6690a6d.js","static/css/.pnpm-22c2475a.css","static/css/AboutView-30426d27.css"])}]}),_a=be();_a.use(fe);const ba=ve(oa);var fa;ba.use(_a),ba.use(pa),ba.use(me),(fa=ba).directive("qr",ua),fa.directive("date-time",sa),ba.mount("#app");export{nt as D,at as S,pt as _,e as __vite_legacy_guard,vt as a,it as b,st as c,Ke as d,gt as e,wt as f,Lt as r,Vt as u};
