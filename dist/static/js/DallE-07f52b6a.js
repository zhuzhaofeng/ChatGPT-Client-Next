import{c as a,aA as e,r as l,m as s,aB as t,n as o,e as d,f as n,g as i,h as u,i as r,j as c,p as m,G as p,u as f,F as x,H as g,v as b,aC as v,l as y,aD as w,J as _,B as h,aE as V,R as k,a0 as z,a3 as U,P as j,aF as C,V as D,t as A,M as E,x as I,aG as B}from"./.pnpm-1de21e06.js";import{u as F}from"./draw-424860f5.js";import{e as G,D as M,a as P}from"./index-cf92a8c9.js";const S={class:"flex items-center gap-x-5"},H={class:"text-xs px-2 py-1"},J={class:"flex flex-col items-start gap-y-3"},O={class:"flex flex-col gap-1"},R={key:0,class:"flex items-center gap-3 flex-wrap"},T=P(a({__name:"DallE",setup(a){const{isMobileScreen:P}=G(),T=e({prompt:"",size:"256x256",n:1,response_format:"url"}),q=l(0),K=s((()=>v(M,2)[q.value])),L=()=>{const a=v(M,2).length-1,e=q.value+1>a?0:q.value+1;q.value=e},N=F(),Q=s((()=>N.loading));t((async()=>!Q.value||await new Promise(((a,e)=>{E.warning({title:"提示",okText:"离开",hideCancel:!1,content:"AI已经开始处理您的请求，此时刷新或离开页面，也会造成您的积分扣除，确定刷新或离开吗？",onOk(){a(!0)},onCancel(){e(!1)}})}))));const W=()=>{T.prompt.trim().length<1?y.error("关键词不能为空"):N.imageDrawAction(T)},X=s((()=>N.dallEImage));return l(!1),(a,e)=>{const l=o("icon-exclamation-circle-fill"),s=w,t=_,v=o("icon-loop"),y=h,E=I,F=o("icon-robot"),G=V,M=k,q=z,N=U,Y=j,Z=B,$=C,aa=D;return d(),n(aa,{"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:i((()=>{var a;return[u("div",{class:g(["draw-view",{"is-mobile":f(P)}])},[r(s,{type:"info",class:"max-w-max mx-auto rounded-full text-xs"},{icon:i((()=>[r(l)])),default:i((()=>[c(" 根据输入关键词生成~大约需要30s左右时间,每张图片 20 积分 ")])),_:1}),u("div",S,[r(t,{class:"h-12 flex items-center",bold:""},{default:i((()=>[c(" 关键词示例 ")])),_:1}),r(y,{type:"text",size:"mini",onClick:L},{default:i((()=>[r(v)])),_:1})]),(d(!0),m(x,null,p(f(K),(a=>(d(),m("div",{key:a.tag,class:"flex items-center gap-x-1 mb-2"},[u("mark",H,A(a.tag),1),r(E,{type:"secondary",copyable:"",class:"mb-0"},{default:i((()=>[c(A(a.keywords),1)])),_:2},1024)])))),128)),r(G,{loading:f(Q),class:"w-full mt-4",size:"large",autofocus:"",modelValue:f(T).prompt,"onUpdate:modelValue":e[0]||(e[0]=a=>f(T).prompt=a),placeholder:"请用中文输入关键词如上，参考形式: 画面主体，细节描述，修饰词","search-button":"",onSearch:W},{"button-icon":i((()=>[r(F)])),"button-default":i((()=>[c("生成")])),_:1},8,["loading","modelValue"]),r(N,{model:f(T),class:g([{"is-mobile":f(P)},"mt-4 p-4 bg-light-300 dark:bg-dark-900 rounded"]),"label-col-props":{span:f(P)?24:void 0},"auto-label-width":!f(P),"label-align":"left"},{default:i((()=>[r(t,{class:"block",bold:""},{default:i((()=>[c(" 参数设置 ")])),_:1}),r(q,{label:"图片尺寸",class:"mb-2"},{default:i((()=>[u("div",{class:g(["w-full",{"grid grid-cols-2 gap-y-2":f(P)}])},[r(M,{class:"min-w-max",modelValue:f(T).size,"onUpdate:modelValue":e[1]||(e[1]=a=>f(T).size=a),type:"button",value:"256x256"},{default:i((()=>[c(" 256x256(小图) ")])),_:1},8,["modelValue"]),r(M,{class:"min-w-max",modelValue:f(T).size,"onUpdate:modelValue":e[2]||(e[2]=a=>f(T).size=a),type:"button",value:"512x512"},{default:i((()=>[c(" 512x512(中图) ")])),_:1},8,["modelValue"]),r(M,{class:"min-w-max",modelValue:f(T).size,"onUpdate:modelValue":e[3]||(e[3]=a=>f(T).size=a),type:"button",value:"1024x1024"},{default:i((()=>[c(" 1024x1024(大图) ")])),_:1},8,["modelValue"])],2)])),_:1}),r(q,{"validate-status":"warning",label:"图片数量",class:"mb-2"},{default:i((()=>[u("div",{class:g(["w-full",{"grid grid-cols-5 gap-y-2":f(P)}])},[(d(),m(x,null,p(10,(a=>r(M,{class:"min-w-max",modelValue:f(T).n,"onUpdate:modelValue":e[4]||(e[4]=a=>f(T).n=a),type:"button",key:a,value:a},{default:i((()=>[c(A(a)+"张 ",1)])),_:2},1032,["modelValue","value"]))),64))],2)])),_:1})])),_:1},8,["model","class","label-col-props","auto-label-width"]),u("div",J,[r(Y,{orientation:"center"},{default:i((()=>[c(" 结果区域 ")])),_:1}),r(s,{type:"warning"},{default:i((()=>[u("div",O,[r(t,{class:"text-xs font-semibold",type:"secondary"},{default:i((()=>[c(" 仅保存最近一次生成记录, 关闭浏览器不保存, 请及时下载 ")])),_:1}),r(t,{class:"text-xs",type:"secondary"},{default:i((()=>[c(" 在电脑浏览器中，可以通过右键点击图片并选择“另存为”选项将图片保存到本地。 ")])),_:1}),r(t,{class:"text-xs",type:"secondary"},{default:i((()=>[c(" 在手机浏览器中，可以通过长按图片并选择“保存图片”选项将图片保存到本地。 ")])),_:1})])])),_:1}),(null==(a=f(X))?void 0:a.date)?(d(),m("div",R,[r($,{infinite:""},{default:i((()=>{var a;return[(d(!0),m(x,null,p((null==(a=f(X))?void 0:a.urls)||[],(a=>(d(),n(Z,{key:a,width:256,"show-loader":"",class:"min-h-40",src:a},null,8,["src"])))),128))]})),_:1})])):b("",!0)])],2)]})),_:1})}}}),[["__scopeId","data-v-1e203295"]]);export{T as default};
