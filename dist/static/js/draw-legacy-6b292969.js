System.register(["./.pnpm-legacy-df9f50ab.js","./index-legacy-40d0c703.js"],(function(r,e){"use strict";var t,o,s,a,n,c;return{setters:[r=>{t=r.d,o=r.r,s=r.o,a=r.l},r=>{n=r.b,c=r.I}],execute:function(){r("u",t("__AI_1024_STORE_DRAW",(()=>{const r=n(),e=o(!1),t=o([]);return s((()=>{})),{draws:t,loading:e,imageDrawAction:o=>{e.value=!0,async function(r,e){const t=new AbortController,o=setTimeout((()=>t.abort()),3e5);try{const s=`${n().bootstrap.api}${c}`,a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),signal:t.signal});if(clearTimeout(o),a.ok){const r=await a.json();500===r.code?e?.onError(new Error(r.msg),r.code):e?.onSuccess(r)}else if(401===a.status)e?.onError(new Error("Anauthorized"),a.status);else if(500===a.status){const r=await a.json();e?.onError(new Error(r),a.status)}else e?.onError(new Error("Stream Error"),a.status)}catch(s){e?.onError(s)}}({...o,card:r.card},{onController(r){},onSuccess(r){e.value=!1,t.value.push({prompt:o.prompt,size:o.size,urls:r.data.map((r=>`data:image/png;base64, ${r.b64_json}`)),date:r.created})},onError(r){e.value=!1,a.error(r?.message??"")}})}}}),{persist:{storage:localStorage,paths:["draws"]}}))}}}));
