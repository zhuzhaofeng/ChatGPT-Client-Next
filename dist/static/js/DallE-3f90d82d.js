import{c as a,aA as e,r as l,m as s,aB as t,n as o,e as d,f as n,g as i,h as u,i as r,j as c,p as m,H as p,u as f,F as x,J as g,x as y,aC as b,l as v,aD as w,K as _,B as h,aE as V,R as k,a0 as z,a3 as D,D as U,aF as j,V as C,t as A,M as E,y as I,aG as B}from"./.pnpm-75a79e04.js";import{u as F}from"./draw-9acd42c7.js";import{e as M,D as S,a as G}from"./index-f05af14f.js";const H={class:"flex items-center gap-x-5"},J={class:"text-xs px-2 py-1"},K={class:"flex flex-col items-start gap-y-3"},O={class:"flex flex-col gap-1"},P={key:0,class:"flex items-center gap-3 flex-wrap"},R=G(a({__name:"DallE",setup(a){const{isMobileScreen:G}=M(),R=e({prompt:"",size:"256x256",n:1,response_format:"url"}),T=l(0),q=s((()=>b(S,2)[T.value])),L=()=>{const a=b(S,2).length-1,e=T.value+1>a?0:T.value+1;T.value=e},N=F(),Q=s((()=>N.loading));t((async()=>!Q.value||await new Promise(((a,e)=>{E.warning({title:"提示",okText:"离开",hideCancel:!1,content:"AI已经开始处理您的请求，此时刷新或离开页面，也会造成您的积分扣除，确定刷新或离开吗？",onOk(){a(!0)},onCancel(){e(!1)}})}))));const W=()=>{R.prompt.trim().length<1?v.error("关键词不能为空"):N.imageDrawAction(R)},X=s((()=>N.dallEImage));return l(!1),(a,e)=>{const l=o("icon-exclamation-circle-fill"),s=w,t=_,b=o("icon-loop"),v=h,E=I,F=o("icon-robot"),M=V,S=k,T=z,N=D,Y=U,Z=B,$=j,aa=C;return d(),n(aa,{"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:i((()=>{var a;return[u("div",{class:g(["draw-view",{"is-mobile":f(G)}])},[r(s,{type:"info",class:"max-w-max mx-auto rounded-full text-xs"},{icon:i((()=>[r(l)])),default:i((()=>[c(" 根据输入关键词生成~大约需要30s左右时间,每张图片 20 积分 ")])),_:1}),u("div",H,[r(t,{class:"h-12 flex items-center",bold:""},{default:i((()=>[c(" 关键词示例 ")])),_:1}),r(v,{type:"text",size:"mini",onClick:L},{default:i((()=>[r(b)])),_:1})]),(d(!0),m(x,null,p(f(q),(a=>(d(),m("div",{key:a.tag,class:"flex items-center gap-x-1 mb-2"},[u("mark",J,A(a.tag),1),r(E,{type:"secondary",copyable:"",class:"mb-0"},{default:i((()=>[c(A(a.keywords),1)])),_:2},1024)])))),128)),r(M,{loading:f(Q),class:"w-full mt-4",size:"large",autofocus:"",modelValue:f(R).prompt,"onUpdate:modelValue":e[0]||(e[0]=a=>f(R).prompt=a),placeholder:"请用中文输入关键词如上，参考形式: 画面主体，细节描述，修饰词","search-button":"",onSearch:W},{"button-icon":i((()=>[r(F)])),"button-default":i((()=>[c("生成")])),_:1},8,["loading","modelValue"]),r(N,{model:f(R),class:g([{"is-mobile":f(G)},"mt-4 p-4 bg-light-300 dark:bg-dark-900 rounded"]),"label-col-props":{span:f(G)?24:void 0},"auto-label-width":!f(G),"label-align":"left"},{default:i((()=>[r(t,{class:"block",bold:""},{default:i((()=>[c(" 参数设置 ")])),_:1}),r(T,{label:"图片尺寸",class:"mb-2"},{default:i((()=>[u("div",{class:g(["w-full",{"grid grid-cols-2 gap-y-2":f(G)}])},[r(S,{class:"min-w-max",modelValue:f(R).size,"onUpdate:modelValue":e[1]||(e[1]=a=>f(R).size=a),type:"button",value:"256x256"},{default:i((()=>[c(" 256x256(小图) ")])),_:1},8,["modelValue"]),r(S,{class:"min-w-max",modelValue:f(R).size,"onUpdate:modelValue":e[2]||(e[2]=a=>f(R).size=a),type:"button",value:"512x512"},{default:i((()=>[c(" 512x512(中图) ")])),_:1},8,["modelValue"]),r(S,{class:"min-w-max",modelValue:f(R).size,"onUpdate:modelValue":e[3]||(e[3]=a=>f(R).size=a),type:"button",value:"1024x1024"},{default:i((()=>[c(" 1024x1024(大图) ")])),_:1},8,["modelValue"])],2)])),_:1}),r(T,{"validate-status":"warning",label:"图片数量",class:"mb-2"},{default:i((()=>[u("div",{class:g(["w-full",{"grid grid-cols-5 gap-y-2":f(G)}])},[(d(),m(x,null,p(10,(a=>r(S,{class:"min-w-max",modelValue:f(R).n,"onUpdate:modelValue":e[4]||(e[4]=a=>f(R).n=a),type:"button",key:a,value:a},{default:i((()=>[c(A(a)+"张 ",1)])),_:2},1032,["modelValue","value"]))),64))],2)])),_:1})])),_:1},8,["model","class","label-col-props","auto-label-width"]),u("div",K,[r(Y,{orientation:"center"},{default:i((()=>[c(" 结果区域 ")])),_:1}),r(s,{type:"warning"},{default:i((()=>[u("div",O,[r(t,{class:"text-xs font-semibold",type:"secondary"},{default:i((()=>[c(" 仅保存最近一次生成记录, 关闭浏览器不保存, 请及时下载 ")])),_:1}),r(t,{class:"text-xs",type:"secondary"},{default:i((()=>[c(" 在电脑浏览器中，可以通过右键点击图片并选择“另存为”选项将图片保存到本地。 ")])),_:1}),r(t,{class:"text-xs",type:"secondary"},{default:i((()=>[c(" 在手机浏览器中，可以通过长按图片并选择“保存图片”选项将图片保存到本地。 ")])),_:1})])])),_:1}),(null==(a=f(X))?void 0:a.date)?(d(),m("div",P,[r($,{infinite:""},{default:i((()=>{var a;return[(d(!0),m(x,null,p((null==(a=f(X))?void 0:a.urls)||[],(a=>(d(),n(Z,{key:a,width:256,"show-loader":"",class:"min-h-40",src:a},null,8,["src"])))),128))]})),_:1})])):y("",!0)])],2)]})),_:1})}}}),[["__scopeId","data-v-1e203295"]]);export{R as default};
