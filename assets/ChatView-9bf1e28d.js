import{g as ae,R as Be,I as Je,h as Qe,t as Ie,i as ve,u as Xe,r as C,j as _,k as Ye,l as fe,m as Ze,n as et,q as Z,s as Te,v as Pe,x as tt,y as Fe,z as ze,A as ot,C as Re,D as K,o as h,E as k,F as L,G as nt,H as Q,J as X,b as u,w as R,a as W,K as te,L as we,M as at,N as lt,O as st,P as Ke,T as qe,Q as rt,U as it,V as ut,W as dt,c as ee,X as xe,d as ke,Y as pt,Z as _e,$ as We,a0 as ct,a1 as ft,a2 as Ne,a3 as Oe,a4 as Ue,a5 as vt,a6 as yt,a7 as ht,a8 as z,_ as mt,a9 as gt,aa as bt,ab as Ct,ac as wt,ad as Ve,ae as Me,af as He,ag as xt,ah as _t,ai as kt,aj as Tt,ak as St,S as Et,al as $t,am as Se,an as Bt,ao as Rt,ap as It}from"./index-7274eeb0.js";import{M as Pt,H as Ce,m as zt,a as Nt}from"./index-b7903ef7.js";import{D as Ot,a as Vt}from"./dropdown-button-4a526bdf.js";const Mt=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],Ht=e=>{const t={};return Mt.forEach(o=>{t[o]=e.getPropertyValue(o)}),t},At=ae({name:"Textarea",components:{ResizeObserver:Be,IconHover:Je,IconClose:Qe},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:o}){const{disabled:s,error:p,modelValue:f}=Ie(e),l=ve("textarea"),{mergedDisabled:r,mergedError:i,eventHandlers:a}=Xe({disabled:s,error:p}),m=C(),H=C(),c=C(),T=C(),I=C(e.defaultValue),y=_(()=>{var n;return(n=f.value)!=null?n:I.value}),[$,O]=Ye(m);fe(f,n=>{(Ze(n)||et(n))&&(I.value="")});const N=_(()=>Z(e.maxLength)&&!!e.maxLength.errorOnly),w=_(()=>Z(e.maxLength)?e.maxLength.length:e.maxLength),j=n=>{var v;return tt(e.wordLength)?e.wordLength(n):(v=n.length)!=null?v:0},D=_(()=>j(y.value)),oe=_(()=>i.value||!!(w.value&&N.value&&D.value>w.value)),B=C(!1),V=C(!1),le=_(()=>e.allowClear&&!r.value&&y.value),F=C(!1),M=C(""),U=()=>{$(),Re(()=>{m.value&&y.value!==m.value.value&&(m.value.value=y.value,O())})},S=(n,v=!0)=>{var b,g;w.value&&!N.value&&j(n)>w.value&&(n=(g=(b=e.wordSlice)==null?void 0:b.call(e,n,w.value))!=null?g:n.slice(0,w.value)),I.value=n,v&&t("update:modelValue",n),U()};let G=y.value;const E=(n,v)=>{var b,g;n!==G&&(G=n,t("change",n,v),(g=(b=a.value)==null?void 0:b.onChange)==null||g.call(b,v))},ne=n=>{var v,b;V.value=!0,G=y.value,t("focus",n),(b=(v=a.value)==null?void 0:v.onFocus)==null||b.call(v,n)},P=n=>{var v,b;V.value=!1,t("blur",n),(b=(v=a.value)==null?void 0:v.onBlur)==null||b.call(v,n),E(y.value,n)},J=n=>{var v,b;const{value:g}=n.target;if(n.type==="compositionend"){if(F.value=!1,M.value="",w.value&&!N.value&&y.value.length>=w.value&&j(g)>w.value){U();return}t("input",g,n),S(g),(b=(v=a.value)==null?void 0:v.onInput)==null||b.call(v,n)}else F.value=!0},se=n=>{var v,b;const{value:g}=n.target;if(F.value)M.value=g;else{if(w.value&&!N.value&&y.value.length>=w.value&&j(g)>w.value&&n.inputType==="insertText"){U();return}t("input",g,n),S(g),(b=(v=a.value)==null?void 0:v.onInput)==null||b.call(v,n)}},ye=n=>{S(""),E("",n),t("clear",n)};fe(f,n=>{n!==y.value&&S(n!=null?n:"",!1)});const de=n=>Fe(o,ze),re=n=>ot(o,ze),he=_(()=>[`${l}-wrapper`,{[`${l}-focus`]:V.value,[`${l}-disabled`]:r.value,[`${l}-error`]:oe.value,[`${l}-scroll`]:B.value}]);let me;const d=C(0),A=C(0),pe=_(()=>!Z(e.autoSize)||!e.autoSize.minRows?0:e.autoSize.minRows*d.value+A.value),ce=_(()=>!Z(e.autoSize)||!e.autoSize.maxRows?0:e.autoSize.maxRows*d.value+A.value),ie=()=>{const n=Ht(me);d.value=Number.parseInt(n["line-height"]||0,10),A.value=Number.parseInt(n["border-width"]||0,10)*2+Number.parseInt(n["padding-top"]||0,10)+Number.parseInt(n["padding-bottom"]||0,10),T.value=n,Re(()=>{var v;const b=(v=c.value)==null?void 0:v.offsetHeight;let g=b!=null?b:0,q="hidden";pe.value&&g<pe.value&&(g=pe.value),ce.value&&g>ce.value&&(g=ce.value,q="auto"),H.value={height:`${g}px`,resize:"none",overflow:q}})};Te(()=>{m.value&&(me=window.getComputedStyle(m.value),e.autoSize&&ie()),Y()});const ge=()=>{e.autoSize&&c.value&&ie(),Y()},be=n=>{m.value&&n.target!==m.value&&(n.preventDefault(),m.value.focus())},Y=()=>{m.value&&(m.value.scrollHeight>m.value.offsetHeight?B.value||(B.value=!0):B.value&&(B.value=!1))};return fe(y,()=>{e.autoSize&&c.value&&ie(),Y()}),{prefixCls:l,wrapperCls:he,textareaRef:m,textareaStyle:H,mirrorRef:c,mirrorStyle:T,computedValue:y,showClearBtn:le,valueLength:D,computedMaxLength:w,mergedDisabled:r,getWrapperAttrs:de,getTextareaAttrs:re,handleInput:se,handleFocus:ne,handleBlur:P,handleComposition:J,handleClear:ye,handleResize:ge,handleMousedown:be}},methods:{focus(){var e;(e=this.$refs.textareaRef)==null||e.focus()},blur(){var e;(e=this.$refs.textareaRef)==null||e.blur()}}}),Lt=["disabled","value","placeholder"];function jt(e,t,o,s,p,f){const l=K("resize-observer"),r=K("icon-close"),i=K("icon-hover");return h(),k("div",te(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...a)=>e.handleMousedown&&e.handleMousedown(...a))}),[e.autoSize?(h(),k("div",{key:0,ref:"mirrorRef",class:L(`${e.prefixCls}-mirror`),style:nt(e.mirrorStyle)},Q(`${e.computedValue}
`),7)):X("v-if",!0),u(l,{onResize:e.handleResize},{default:R(()=>[W("textarea",te({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...a)=>e.handleInput&&e.handleInput(...a)),onFocus:t[1]||(t[1]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:t[2]||(t[2]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onCompositionstart:t[3]||(t[3]=(...a)=>e.handleComposition&&e.handleComposition(...a)),onCompositionupdate:t[4]||(t[4]=(...a)=>e.handleComposition&&e.handleComposition(...a)),onCompositionend:t[5]||(t[5]=(...a)=>e.handleComposition&&e.handleComposition(...a))}),null,16,Lt)]),_:1},8,["onResize"]),we(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(h(),k("div",{key:1,class:L(`${e.prefixCls}-word-limit`)},Q(e.valueLength)+"/"+Q(e.computedMaxLength),3)):X("v-if",!0),e.showClearBtn?(h(),k("div",{key:2,class:L(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...a)=>e.handleClear&&e.handleClear(...a))},[u(i,null,{default:R(()=>[u(r)]),_:1})],2)):X("v-if",!0)],16)}var Ee=Pe(At,[["render",jt]]);const Dt=Object.assign(Ee,{install:(e,t)=>{at(e,t);const o=lt(t);e.component(o+Ee.name,Ee)}}),Ft=ae({name:"TypographyEditContent",components:{Input:st},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const s=[`${ve("typography")}-edit-content`],p=C();function f(r){t("update:text",r),t("change",r)}function l(){t("end")}return Te(()=>{if(!p.value||!p.value.$el)return;const r=p.value.$el.querySelector("input");if(!r)return;r.focus&&r.focus();const{length:i}=r.value;r.setSelectionRange(i,i)}),{classNames:s,inputRef:p,onBlur:l,onChange:f,onEnd:l}}});function Kt(e,t,o,s,p,f){const l=K("Input");return h(),k("div",{class:L(e.classNames)},[u(l,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:Ke(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}var qt=Pe(Ft,[["render",Kt]]);const Wt=ae({name:"TypographyOperations",components:{Tooltip:qe,IconCheckCircleFill:rt,IconCopy:it,IconEdit:ut},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const o=ve("typography"),s=_(()=>e.forceRenderExpand||e.expandable&&e.isEllipsis),{t:p}=dt();return{prefixCls:o,showExpand:s,t:p,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});function Ut(e,t,o,s,p,f){const l=K("IconEdit"),r=K("Tooltip"),i=K("IconCheckCircleFill"),a=K("IconCopy");return h(),k(_e,null,[e.editable?(h(),ee(r,te({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:R(()=>[W("span",{class:L(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=xe((...m)=>e.onEditClick&&e.onEditClick(...m),["stop"]))},[u(l)],2)]),_:1},16,["content"])):X("v-if",!0),e.copyable?(h(),ee(r,pt(te({key:1},e.copyTooltipProps)),{content:R(()=>[we(e.$slots,"copy-tooltip",{copied:e.isCopied},()=>[ke(Q(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)])]),default:R(()=>[W("span",{class:L({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=xe((...m)=>e.onCopyClick&&e.onCopyClick(...m),["stop"]))},[we(e.$slots,"copy-icon",{copied:e.isCopied},()=>[e.isCopied?(h(),ee(i,{key:0})):(h(),ee(a,{key:1}))])],2)]),_:3},16)):X("v-if",!0),e.showExpand?(h(),k("a",{key:2,class:L(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=xe((...m)=>e.onExpandClick&&e.onExpandClick(...m),["stop"]))},[we(e.$slots,"expand-node",{expanded:e.expanded},()=>[ke(Q(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)])],2)):X("v-if",!0)],64)}var Ae=Pe(Wt,[["render",Ut]]);let x;function Gt(e){return Array.prototype.slice.apply(e).map(o=>`${o}: ${e.getPropertyValue(o)};`).join("")}function $e(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var Jt=(e,t,o,s)=>{x||(x=document.createElement("div"),document.body.appendChild(x));const{rows:p,suffix:f,ellipsisStr:l}=t,r=window.getComputedStyle(e),i=Gt(r),a=$e(r.lineHeight),m=Math.round(a*p+$e(r.paddingTop)+$e(r.paddingBottom));x.setAttribute("style",i),x.setAttribute("aria-hidden","true"),x.style.height="auto",x.style.minHeight="auto",x.style.maxHeight="auto",x.style.position="fixed",x.style.left="0",x.style.top="-99999999px",x.style.zIndex="-200",x.style.whiteSpace="normal";const H=We({render(){return u("span",null,[o])}});H.mount(x);const c=Array.prototype.slice.apply(x.childNodes[0].cloneNode(!0).childNodes);H.unmount(),x.innerHTML="";const T=document.createTextNode(`${l}${f}`);x.appendChild(T),c.forEach(O=>{x.appendChild(O)});const I=document.createTextNode(s);x.insertBefore(I,T);function y(){return x.offsetHeight<=m}if(y())return{ellipsis:!1,text:s};function $(O,N=0,w=s.length,j=0){const D=Math.floor((N+w)/2),oe=s.slice(0,D);if(O.textContent=oe,N>=w-1)for(let B=w;B>=N;B-=1){const V=s.slice(0,B);if(O.textContent=V,y()||!V)return}y()?$(O,D,w,D):$(O,N,D,j)}return $(I),{text:I.textContent,ellipsis:!0}};const Qt=async e=>{var t;if((t=navigator.clipboard)!=null&&t.writeText)try{await navigator.clipboard.writeText(e);return}catch(f){console.error(f!=null?f:new DOMException("The request is not allowed","NotAllowedError"))}const o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre",document.body.appendChild(o);const s=window.getSelection(),p=window.document.createRange();s==null||s.removeAllRanges(),p.selectNode(o),s==null||s.addRange(p);try{window.document.execCommand("copy")}catch(f){console.error(`execCommand Error: ${f}`)}s==null||s.removeAllRanges(),window.document.body.removeChild(o)};let ue;function Xt(e){if(!e)return"";ue||(ue=document.createElement("div"),ue.setAttribute("aria-hidden","true"),document.body.appendChild(ue));const t=We({render(){return u("div",null,[e])}});t.mount(ue);const o=ue.innerText;return t.unmount(),o}var Yt=Object.defineProperty,Zt=Object.defineProperties,eo=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,oo=Object.prototype.propertyIsEnumerable,je=(e,t,o)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,no=(e,t)=>{for(var o in t||(t={}))to.call(t,o)&&je(e,o,t[o]);if(Le)for(var o of Le(t))oo.call(t,o)&&je(e,o,t[o]);return e},ao=(e,t)=>Zt(e,eo(t));function Ge(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!vt(e)}function lo(e){const{bold:t,mark:o,underline:s,delete:p,code:f}=e,l=[];return t&&l.push("b"),s&&l.push("u"),p&&l.push("del"),f&&l.push("code"),o&&l.push("mark"),l}function De(e,t){const{mark:o}=e,s=lo(e),p=Z(o)&&o.color?{backgroundColor:o.color}:{};return s.reduce((f,l)=>u(l,l==="mark"?{style:p}:{},Ge(f)?f:{default:()=>[f]}),t)}function so(e){const t=!!e.showTooltip,o=Z(e.showTooltip)&&e.showTooltip.type==="popover"?yt:qe,s=Z(e.showTooltip)&&e.showTooltip.props||{};return ao(no({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},Fe(e,["showTooltip"])),{showTooltip:t,TooltipComponent:o,tooltipProps:s})}var ro=ae({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:o,attrs:s}){const{editing:p,defaultEditing:f,ellipsis:l,copyable:r,editable:i,copyText:a,editText:m,copyDelay:H,component:c}=Ie(e),T=ve("typography"),I=_(()=>[T,{[`${T}-${e.type}`]:e.type,[`${T}-disabled`]:e.disabled}]),y=C(),$=C(""),[O,N]=ct(f.value,ft({value:p})),w=_(()=>i.value&&O.value);function j(){o("update:editing",!0),o("editStart"),N(!0)}function D(d){o("update:editText",d),o("change",d)}function oe(){O.value&&(o("update:editing",!1),o("editEnd"),N(!1))}const B=C(!1);let V=null;function le(){var d;const A=(d=a.value)!=null?d:$.value;Qt(A||""),B.value=!0,o("copy",A),V=setTimeout(()=>{B.value=!1},H.value)}Ne(()=>{V&&clearTimeout(V),V=null});const F=C(!1),M=C(!1),U=C(""),S=_(()=>so(Z(l.value)&&l.value||{}));let G=null;function E(){const d=!M.value;M.value=d,o("expand",d)}function ne(d=!1){return S.value.css?u(Ae,{editable:i.value,copyable:r.value,expandable:S.value.expandable,isCopied:B.value,isEllipsis:re.value,expanded:M.value,forceRenderExpand:d||M.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:j,onCopy:le,onExpand:E},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):u(Ae,{editable:i.value,copyable:r.value,expandable:S.value.expandable,isCopied:B.value,isEllipsis:F.value,expanded:M.value,forceRenderExpand:d,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:j,onCopy:le,onExpand:E},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function P(){if(!y.value)return;const{ellipsis:d,text:A}=Jt(y.value,S.value,ne(!!S.value.expandable),$.value);F.value!==d&&(F.value=d,S.value.css||o("ellipsis",d)),U.value!==A&&(U.value=A||"")}function J(){l.value&&!M.value&&(Oe(G),G=ht(()=>{P()}))}Ne(()=>{Oe(G)}),fe(()=>S.value.rows,()=>{J()}),fe(l,d=>{d?J():F.value=!1});let se=[];const ye=()=>{if(l.value||r.value||i.value){const d=Xt(se);d!==$.value&&($.value=d,J())}};Te(ye),Ue(ye);const de=C(),re=C(!1),he=()=>{if(y.value&&de.value){const d=de.value.offsetHeight>y.value.offsetHeight;d!==re.value&&(re.value=d,o("ellipsis",d))}},me=_(()=>M.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":S.value.rows,"-webkit-box-orient":"vertical"});return()=>{var d,A;if(se=((d=t.default)==null?void 0:d.call(t))||[],w.value){const g=(A=m.value)!=null?A:$.value;return u(qt,{text:g,onChange:q=>{q!==g&&D(q)},onEnd:oe},null)}const{suffix:pe,ellipsisStr:ce,showTooltip:ie,tooltipProps:ge,TooltipComponent:be}=S.value,Y=F.value&&!M.value,n=Y&&!ie?{title:$.value}:{},v=c.value;if(S.value.css){const g=De(e,se),q=u(v,te({class:I.value,ref:y,style:me.value},n,s),{default:()=>[u("span",{ref:de},[g])]});return re.value?u(be,te(ge,{onResize:()=>he()}),{default:()=>[q],content:()=>$.value}):u(Be,{onResize:()=>{he()}},Ge(q)?q:{default:()=>[q]})}const b=De(e,Y?U.value:se);return u(Be,{onResize:()=>J()},{default:()=>[u(v,te({class:I.value,ref:y},n,s),{default:()=>[Y&&ie?u(be,ge,{default:()=>[u("span",null,[b])],content:()=>$.value}):b,Y?ce:null,pe,ne()]})]})}}}),io=ae({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:o}=Ie(e),s=ve("typography"),p=_(()=>t!=null&&t.value?"blockquote":"div"),f=_(()=>[{[`${s}-spacing-close`]:(o==null?void 0:o.value)==="close"}]);return{component:p,classNames:f}},render(){const{component:e,classNames:t}=this;return u(ro,te({class:t},this.$attrs,{component:e}),this.$slots)}});const uo={key:0,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},po={key:0},co=["innerHTML"],fo=["textContent"],vo=["textContent"],yo=ae({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,o=C(),s=new Pt({linkify:!0,highlight(i,a){if(!!(a&&Ce.getLanguage(a))){const H=a!=null?a:"";return r(Ce.highlight(i,{language:H}).value,H)}return r(Ce.highlightAuto(i).value,"")}});s.use(zt,{attrs:{target:"_blank",rel:"noopener"}}),s.use(Nt,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const p=_(()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}]),f=i=>i.replace(/\n+$/g,""),l=_(()=>{var a;const i=f((a=t.text)!=null?a:"");return!t.asRawText&&!t.inversion?s.render(i):i});function r(i,a){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${a}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${a}">${i}</code></pre>`}return Ue(()=>{o.value&&Ce.highlightBlock(o.value)}),(i,a)=>(h(),k("div",{class:L(z(p))},[e.loading?(h(),k("span",uo)):(h(),k("div",{key:1,ref_key:"textRef",ref:o,class:"leading-relaxed break-words"},[e.inversion?(h(),k("div",{key:1,class:"whitespace-pre-wrap",textContent:Q(z(l))},null,8,vo)):(h(),k("div",po,[e.asRawText?(h(),k("div",{key:1,class:"whitespace-pre-wrap",textContent:Q(z(l))},null,8,fo)):(h(),k("div",{key:0,class:"markdown-body",innerHTML:z(l)},null,8,co))]))],512))],2))}});const ho=mt(yo,[["__scopeId","data-v-a2d5d6d9"]]);const mo="/ChatGPT-Client-Next/assets/openai-white-1b79b841.svg",go=e=>/^[\s\n\r]*$/.test(e),bo={key:0,class:"flex-1"},Co={class:"chat-wrapper"},wo=["src"],xo={class:"chat-footer"},_o={class:"flex items-center gap-x-2 w-32"},ko={class:"flex-1"},$o=ae({__name:"ChatView",setup(e){const t=gt(),o=bt(),s=_(()=>t.session),{isMobileScreen:p}=Ct(),f={user:Bt,assistant:mo},l=C(),r=C("新的聊天");wt(()=>{var c;r.value=((c=t.session)==null?void 0:c.topic)||"新的聊天"});const i=C(""),a=()=>{if(go(i.value)){He.clear(),He.error("请输入消息内容");return}t.sendMessageAction(i.value),i.value=""};Te(()=>{Re(()=>{var c,T,I,y;(y=l.value)==null||y.scrollTop(((I=(T=(c=l.value)==null?void 0:c.containerRef)==null?void 0:T.scrollHeight)!=null?I:0)-200)})});const m=c=>{o.changeSubmitKeyAction(c)},H=c=>{o.submitKey===Se.Enter&&(c.shiftKey&&c.code==="Enter"?(c.preventDefault(),i.value+=`
`):!c.shiftKey&&c.code==="Enter"&&(c.preventDefault(),a())),o.submitKey===Se.ShiftEnter&&(!c.shiftKey&&c.code==="Enter"?(c.preventDefault(),i.value+=`
`):c.shiftKey&&c.code==="Enter"&&(c.preventDefault(),a()))};return(c,T)=>{const I=io,y=xt,$=_t,O=kt,N=Tt,w=St,j=Rt,D=It,oe=ho,B=Et,V=Dt,le=K("icon-send"),F=K("icon-down"),M=K("icon-check"),U=Vt,S=Ot,G=$t;return h(),k(_e,null,[u(N,{class:"h-14 px-4 flex items-center bg-white dark:bg-dark"},{default:R(()=>[W("div",{class:L(["flex flex-col editable-title__wrapper",{"is-mobile":z(p)}])},[u(I,{class:"m-0",editable:"",editText:z(r),"onUpdate:editText":T[0]||(T[0]=E=>Ve(r)?r.value=E:null)},{default:R(()=>[ke(Q(z(r)),1)]),_:1},8,["editText"])],2),z(p)?X("",!0):(h(),k("i",bo)),z(p)?X("",!0):(h(),ee(O,{key:1},{default:R(()=>[u(y,{class:"w-44"}),u($,{class:"w-60"})]),_:1}))]),_:1}),u(w,{class:"m-0"}),u(G,{class:"flex flex-col flex-1 overflow-hidden"},{default:R(()=>[W("main",Co,[u(B,{ref_key:"scrollbarRef",ref:l,"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full p-4 grid grid-cols-1 gap-y-2"},{default:R(()=>{var E,ne;return[(h(!0),k(_e,null,Me((ne=(E=z(s))==null?void 0:E.messages)!=null?ne:[],P=>(h(),k("section",{key:P.id,class:L(["message-item",P.role==="assistant"?"is-reply":"is-request"])},[u(D,{loading:P.streaming&&P.role==="assistant"},{default:R(()=>[u(j,{size:32,class:L(P.role==="assistant"?"bg-primary p-2":"bg-success")},{default:R(()=>{var J;return[W("img",{src:(J=f[P.role])!=null?J:""},null,8,wo)]}),_:2},1032,["class"])]),_:2},1032,["loading"]),W("section",{class:L(["flex flex-1 overflow-hidden px-4 py-3 text-sm rounded-lg max-w-max",{"justify-end bg-primary text-white":P.role==="user"},{"bg-white dark:bg-dark":P.role==="assistant"}])},[(h(),ee(oe,{key:P.content,text:P.content,inversion:P.role!=="assistant"},null,8,["text","inversion"]))],2)],2))),128))]}),_:1},512),u(w,{class:"m-0"}),W("footer",xo,[u(V,{disabled:z(t).fetching,modelValue:z(i),"onUpdate:modelValue":T[1]||(T[1]=E=>Ve(i)?i.value=E:null),onKeydown:Ke(xe(H,["prevent"]),["enter"]),class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:3,maxRows:5},placeholder:"请输入您的信息..."},null,8,["disabled","modelValue","onKeydown"]),u(S,{disabled:z(t).fetching,onClick:a,onSelect:m,type:"primary"},{icon:R(()=>[u(F)]),content:R(()=>[(h(!0),k(_e,null,Me(Object.values(z(Se)),E=>(h(),ee(U,{key:E,value:E},{default:R(()=>[W("div",_o,[W("span",ko,Q(E),1),E===z(o).submitKey?(h(),ee(M,{key:0,class:"text-primary"})):X("",!0)])]),_:2},1032,["value"]))),128))]),default:R(()=>[u(le,{class:"mr-2"}),ke(" 发送 ")]),_:1},8,["disabled"])])])]),_:1})],64)}}});export{$o as default};
