System.register(["./index-legacy-7474d731.js","./index-legacy-2c8b5ef7.js","./dropdown-button-legacy-6d18f1f2.js"],(function(e,t){"use strict";var o,a,r,l,n,i,p,c,s,d,u,x,v,g,y,m,h,f,b,w,k,C,T,z,E,S,B,$,R,_,j,I,O,P,L,A,N,H,M,V,D,K,q,F,W,U,Y,G,J,Q,X,Z,ee,te,oe,ae,re,le,ne,ie,pe,ce,se,de,ue,xe,ve,ge,ye,me,he,fe,be,we,ke,Ce,Te,ze,Ee,Se,Be,$e,Re,_e=document.createElement("style");return _e.textContent=".arco-textarea-wrapper{display:inline-flex;box-sizing:border-box;color:var(--color-text-1);font-size:14px;background-color:var(--color-fill-2);border:1px solid transparent;border-radius:var(--border-radius-small);cursor:text;transition:color .1s cubic-bezier(0,0,1,1),border-color .1s cubic-bezier(0,0,1,1),background-color .1s cubic-bezier(0,0,1,1);position:relative;display:inline-block;width:100%;padding-right:0;padding-left:0;overflow:hidden}.arco-textarea-wrapper:hover{background-color:var(--color-fill-3);border-color:transparent}.arco-textarea-wrapper:focus-within,.arco-textarea-wrapper.arco-textarea-focus{background-color:var(--color-bg-2);border-color:rgb(var(--primary-6));box-shadow:0 0 0 0 var(--color-primary-light-2)}.arco-textarea-wrapper.arco-textarea-disabled{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent;cursor:not-allowed}.arco-textarea-wrapper.arco-textarea-disabled:hover{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-prefix,.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-suffix{color:inherit}.arco-textarea-wrapper.arco-textarea-error{background-color:var(--color-danger-light-1);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:hover{background-color:var(--color-danger-light-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:focus-within,.arco-textarea-wrapper.arco-textarea-error.arco-textarea-wrapper-focus{background-color:var(--color-bg-2);border-color:rgb(var(--danger-6));box-shadow:0 0 0 0 var(--color-danger-light-2)}.arco-textarea-wrapper .arco-textarea-prefix,.arco-textarea-wrapper .arco-textarea-suffix{display:inline-flex;flex-shrink:0;align-items:center;white-space:nowrap;user-select:none}.arco-textarea-wrapper .arco-textarea-prefix>svg,.arco-textarea-wrapper .arco-textarea-suffix>svg{font-size:14px}.arco-textarea-wrapper .arco-textarea-prefix{padding-right:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix{padding-left:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon{display:inline-flex}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-validating{color:rgb(var(--primary-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-success{color:rgb(var(--success-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-warning{color:rgb(var(--warning-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-error{color:rgb(var(--danger-6))}.arco-textarea-wrapper .arco-textarea-clear-btn{align-self:center;color:var(--color-text-2);font-size:12px;visibility:hidden;cursor:pointer}.arco-textarea-wrapper .arco-textarea-clear-btn>svg{position:relative;transition:color .1s cubic-bezier(0,0,1,1)}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{visibility:visible}.arco-textarea-wrapper:not(.arco-textarea-focus) .arco-textarea-icon-hover:hover:before{background-color:var(--color-fill-4)}.arco-textarea-wrapper .arco-textarea-word-limit{position:absolute;right:10px;bottom:6px;color:var(--color-text-3);font-size:12px;user-select:none}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-word-limit{right:25px}.arco-textarea-wrapper .arco-textarea-clear-btn{position:absolute;top:50%;right:10px;transform:translateY(-50%)}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-clear-btn{right:25px}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{display:block}.arco-textarea-wrapper .arco-textarea-mirror{position:absolute;visibility:hidden}.arco-textarea{width:100%;color:inherit;background:none;border:none;border-radius:0;outline:none;cursor:inherit;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:block;box-sizing:border-box;height:100%;min-height:32px;padding:4px 12px;font-size:14px;line-height:1.5715;vertical-align:top;resize:vertical}.arco-textarea::placeholder{color:var(--color-text-3)}.arco-textarea[disabled]::placeholder{color:var(--color-text-4)}.arco-textarea[disabled]{-webkit-text-fill-color:var(--color-text-4)}.message-content[data-v-507bd603]{max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important}.arco-typography{color:var(--color-text-1);line-height:1.5715}h1.arco-typography,h2.arco-typography,h3.arco-typography,h4.arco-typography,h5.arco-typography,h6.arco-typography{margin-top:1em;margin-bottom:.5em;font-weight:500}h1.arco-typography{font-size:36px;line-height:1.23}h2.arco-typography{font-size:32px;line-height:1.25}h3.arco-typography{font-size:28px;line-height:1.29}h4.arco-typography{font-size:24px;line-height:1.33}h5.arco-typography{font-size:20px;line-height:1.4}h6.arco-typography{font-size:16px;line-height:1.5}div.arco-typography,p.arco-typography{margin-top:0;margin-bottom:1em}.arco-typography-primary{color:rgb(var(--primary-6))}.arco-typography-secondary{color:var(--color-text-2)}.arco-typography-success{color:rgb(var(--success-6))}.arco-typography-warning{color:rgb(var(--warning-6))}.arco-typography-danger{color:rgb(var(--danger-6))}.arco-typography-disabled{color:var(--color-text-4);cursor:not-allowed}.arco-typography mark{background-color:rgb(var(--yellow-4))}.arco-typography u{text-decoration:underline}.arco-typography del{text-decoration:line-through}.arco-typography b{font-weight:500}.arco-typography code{margin:0 2px;padding:2px 8px;color:var(--color-text-2);font-size:85%;background-color:var(--color-neutral-2);border:1px solid var(--color-neutral-3);border-radius:2px}.arco-typography blockquote{margin:0 0 1em;padding-left:8px;background-color:var(--color-bg-2);border-left:2px solid var(--color-neutral-6)}.arco-typography ol,.arco-typography ul{margin:0;padding:0}.arco-typography ul li,.arco-typography ol li{margin-left:20px}.arco-typography ul{list-style:circle}.arco-typography-spacing-close{line-height:1.3}.arco-typography-operation-copy,.arco-typography-operation-copied{margin-left:2px;padding:2px}.arco-typography-operation-copy{color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-copy:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-copied{color:rgb(var(--success-6))}.arco-typography-operation-edit{margin-left:2px;padding:2px;color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-edit:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-expand{margin:0 4px;color:rgb(var(--primary-6));cursor:pointer}.arco-typography-operation-expand:hover{color:rgb(var(--primary-5))}.arco-typography-edit-content{position:relative;left:-13px;margin-top:-5px;margin-right:-13px;margin-bottom:calc(1em - 5px)}.arco-typography-css-operation{margin-top:-1em;margin-bottom:1em;text-align:right}.chat-wrapper{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-flex:1!important;-ms-flex:1 1 0%!important;-webkit-flex:1 1 0%!important;flex:1 1 0%!important;overflow:hidden!important}.chat-wrapper .message-item{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:start!important;-ms-flex-align:start!important;-webkit-align-items:flex-start!important;align-items:flex-start!important;justify-items:start!important;padding-left:0!important;grid-gap:.5rem!important;gap:.5rem!important;max-width:75%!important}.chat-wrapper .message-item.is-request{-webkit-box-orient:horizontal!important;-webkit-box-direction:reverse!important;-ms-flex-direction:row-reverse!important;-webkit-flex-direction:row-reverse!important;flex-direction:row-reverse!important;margin-left:auto!important;max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important;padding-left:2.5rem!important}.chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-align:end!important;-ms-flex-align:end!important;-webkit-align-items:flex-end!important;align-items:flex-end!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;padding:.75rem 1rem .5rem .5rem!important;width:100%!important}.dark .chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(23,23,26,var(--tw-bg-opacity))!important}\n",document.head.appendChild(_e),{setters:[e=>{o=e.g,a=e.R,r=e.I,l=e.h,n=e.t,i=e.i,p=e.u,c=e.r,s=e.j,d=e.k,u=e.l,x=e.m,v=e.n,g=e.q,y=e.s,m=e.v,h=e.x,f=e.y,b=e.z,w=e.A,k=e.C,C=e.D,T=e.o,z=e.E,E=e.F,S=e.G,B=e.H,$=e.J,R=e.b,_=e.w,j=e.a,I=e.K,O=e.L,P=e.M,L=e.N,A=e.O,N=e.P,H=e.T,M=e.Q,V=e.U,D=e.V,K=e.W,q=e.c,F=e.X,W=e.d,U=e.Y,Y=e.Z,G=e.$,J=e.a0,Q=e.a1,X=e.a2,Z=e.a3,ee=e.a4,te=e.a5,oe=e.a6,ae=e.a7,re=e.a8,le=e._,ne=e.a9,ie=e.aa,pe=e.ab,ce=e.ac,se=e.ad,de=e.ae,ue=e.af,xe=e.ag,ve=e.ah,ge=e.ai,ye=e.aj,me=e.ak,he=e.S,fe=e.al,be=e.am,we=e.an,ke=e.ao,Ce=e.ap,Te=e.B},e=>{ze=e.M,Ee=e.H,Se=e.m,Be=e.a},e=>{$e=e.D,Re=e.a}],execute:function(){const t=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],_e=o({name:"Textarea",components:{ResizeObserver:a,IconHover:r,IconClose:l},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:o,attrs:a}){const{disabled:r,error:l,modelValue:m}=n(e),C=i("textarea"),{mergedDisabled:T,mergedError:z,eventHandlers:E}=p({disabled:r,error:l}),S=c(),B=c(),$=c(),R=c(),_=c(e.defaultValue),j=s((()=>{var e;return null!=(e=m.value)?e:_.value})),[I,O]=d(S);u(m,(e=>{(x(e)||v(e))&&(_.value="")}));const P=s((()=>g(e.maxLength)&&Boolean(e.maxLength.errorOnly))),L=s((()=>g(e.maxLength)?e.maxLength.length:e.maxLength)),A=t=>{var o;return h(e.wordLength)?e.wordLength(t):null!=(o=t.length)?o:0},N=s((()=>A(j.value))),H=s((()=>z.value||Boolean(L.value&&P.value&&N.value>L.value))),M=c(!1),V=c(!1),D=s((()=>e.allowClear&&!T.value&&j.value)),K=c(!1),q=c(""),F=()=>{I(),k((()=>{S.value&&j.value!==S.value.value&&(S.value.value=j.value,O())}))},W=(t,a=!0)=>{var r,l;L.value&&!P.value&&A(t)>L.value&&(t=null!=(l=null==(r=e.wordSlice)?void 0:r.call(e,t,L.value))?l:t.slice(0,L.value)),_.value=t,a&&o("update:modelValue",t),F()};let U=j.value;const Y=(e,t)=>{var a,r;e!==U&&(U=e,o("change",e,t),null==(r=null==(a=E.value)?void 0:a.onChange)||r.call(a,t))};u(m,(e=>{e!==j.value&&W(null!=e?e:"",!1)}));const G=s((()=>[`${C}-wrapper`,{[`${C}-focus`]:V.value,[`${C}-disabled`]:T.value,[`${C}-error`]:H.value,[`${C}-scroll`]:M.value}]));let J;const Q=c(0),X=c(0),Z=s((()=>g(e.autoSize)&&e.autoSize.minRows?e.autoSize.minRows*Q.value+X.value:0)),ee=s((()=>g(e.autoSize)&&e.autoSize.maxRows?e.autoSize.maxRows*Q.value+X.value:0)),te=()=>{const e=(e=>{const o={};return t.forEach((t=>{o[t]=e.getPropertyValue(t)})),o})(J);Q.value=Number.parseInt(e["line-height"]||0,10),X.value=2*Number.parseInt(e["border-width"]||0,10)+Number.parseInt(e["padding-top"]||0,10)+Number.parseInt(e["padding-bottom"]||0,10),R.value=e,k((()=>{var e;const t=null==(e=$.value)?void 0:e.offsetHeight;let o=null!=t?t:0,a="hidden";Z.value&&o<Z.value&&(o=Z.value),ee.value&&o>ee.value&&(o=ee.value,a="auto"),B.value={height:`${o}px`,resize:"none",overflow:a}}))};y((()=>{S.value&&(J=window.getComputedStyle(S.value),e.autoSize&&te()),oe()}));const oe=()=>{S.value&&(S.value.scrollHeight>S.value.offsetHeight?M.value||(M.value=!0):M.value&&(M.value=!1))};return u(j,(()=>{e.autoSize&&$.value&&te(),oe()})),{prefixCls:C,wrapperCls:G,textareaRef:S,textareaStyle:B,mirrorRef:$,mirrorStyle:R,computedValue:j,showClearBtn:D,valueLength:N,computedMaxLength:L,mergedDisabled:T,getWrapperAttrs:e=>f(a,b),getTextareaAttrs:e=>w(a,b),handleInput:e=>{var t,a;const{value:r}=e.target;if(K.value)q.value=r;else{if(L.value&&!P.value&&j.value.length>=L.value&&A(r)>L.value&&"insertText"===e.inputType)return void F();o("input",r,e),W(r),null==(a=null==(t=E.value)?void 0:t.onInput)||a.call(t,e)}},handleFocus:e=>{var t,a;V.value=!0,U=j.value,o("focus",e),null==(a=null==(t=E.value)?void 0:t.onFocus)||a.call(t,e)},handleBlur:e=>{var t,a;V.value=!1,o("blur",e),null==(a=null==(t=E.value)?void 0:t.onBlur)||a.call(t,e),Y(j.value,e)},handleComposition:e=>{var t,a;const{value:r}=e.target;if("compositionend"===e.type){if(K.value=!1,q.value="",L.value&&!P.value&&j.value.length>=L.value&&A(r)>L.value)return void F();o("input",r,e),W(r),null==(a=null==(t=E.value)?void 0:t.onInput)||a.call(t,e)}else K.value=!0},handleClear:e=>{W(""),Y("",e),o("clear",e)},handleResize:()=>{e.autoSize&&$.value&&te(),oe()},handleMousedown:e=>{S.value&&e.target!==S.value&&(e.preventDefault(),S.value.focus())}}},methods:{focus(){var e;null==(e=this.$refs.textareaRef)||e.focus()},blur(){var e;null==(e=this.$refs.textareaRef)||e.blur()}}}),je=["disabled","value","placeholder"];var Ie=m(_e,[["render",function(e,t,o,a,r,l){const n=C("resize-observer"),i=C("icon-close"),p=C("icon-hover");return T(),z("div",I(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...t)=>e.handleMousedown&&e.handleMousedown(...t))}),[e.autoSize?(T(),z("div",{key:0,ref:"mirrorRef",class:E(`${e.prefixCls}-mirror`),style:S(e.mirrorStyle)},B(`${e.computedValue}\n`),7)):$("v-if",!0),R(n,{onResize:e.handleResize},{default:_((()=>[j("textarea",I({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onCompositionstart:t[3]||(t[3]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionupdate:t[4]||(t[4]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionend:t[5]||(t[5]=(...t)=>e.handleComposition&&e.handleComposition(...t))}),null,16,je)])),_:1},8,["onResize"]),O(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(T(),z("div",{key:1,class:E(`${e.prefixCls}-word-limit`)},B(e.valueLength)+"/"+B(e.computedMaxLength),3)):$("v-if",!0),e.showClearBtn?(T(),z("div",{key:2,class:E(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...t)=>e.handleClear&&e.handleClear(...t))},[R(p,null,{default:_((()=>[R(i)])),_:1})],2)):$("v-if",!0)],16)}]]);const Oe=Object.assign(Ie,{install:(e,t)=>{P(e,t);const o=L(t);e.component(o+Ie.name,Ie)}}),Pe=o({name:"TypographyEditContent",components:{Input:A},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const o=[`${i("typography")}-edit-content`],a=c();function r(){t("end")}return y((()=>{if(!a.value||!a.value.$el)return;const e=a.value.$el.querySelector("input");if(!e)return;e.focus&&e.focus();const{length:t}=e.value;e.setSelectionRange(t,t)})),{classNames:o,inputRef:a,onBlur:r,onChange:function(e){t("update:text",e),t("change",e)},onEnd:r}}});var Le=m(Pe,[["render",function(e,t,o,a,r,l){const n=C("Input");return T(),z("div",{class:E(e.classNames)},[R(n,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:N(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}]]);const Ae=o({name:"TypographyOperations",components:{Tooltip:H,IconCheckCircleFill:M,IconCopy:V,IconEdit:D},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const o=i("typography"),a=s((()=>e.forceRenderExpand||e.expandable&&e.isEllipsis)),{t:r}=K();return{prefixCls:o,showExpand:a,t:r,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});var Ne=m(Ae,[["render",function(e,t,o,a,r,l){const n=C("IconEdit"),i=C("Tooltip"),p=C("IconCheckCircleFill"),c=C("IconCopy");return T(),z(Y,null,[e.editable?(T(),q(i,I({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:_((()=>[j("span",{class:E(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=F(((...t)=>e.onEditClick&&e.onEditClick(...t)),["stop"]))},[R(n)],2)])),_:1},16,["content"])):$("v-if",!0),e.copyable?(T(),q(i,U(I({key:1},e.copyTooltipProps)),{content:_((()=>[O(e.$slots,"copy-tooltip",{copied:e.isCopied},(()=>[W(B(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)]))])),default:_((()=>[j("span",{class:E({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=F(((...t)=>e.onCopyClick&&e.onCopyClick(...t)),["stop"]))},[O(e.$slots,"copy-icon",{copied:e.isCopied},(()=>[e.isCopied?(T(),q(p,{key:0})):(T(),q(c,{key:1}))]))],2)])),_:3},16)):$("v-if",!0),e.showExpand?(T(),z("a",{key:2,class:E(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=F(((...t)=>e.onExpandClick&&e.onExpandClick(...t)),["stop"]))},[O(e.$slots,"expand-node",{expanded:e.expanded},(()=>[W(B(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)]))],2)):$("v-if",!0)],64)}]]);let He;function Me(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var Ve=(e,t,o,a)=>{He||(He=document.createElement("div"),document.body.appendChild(He));const{rows:r,suffix:l,ellipsisStr:n}=t,i=window.getComputedStyle(e),p=(c=i,Array.prototype.slice.apply(c).map((e=>`${e}: ${c.getPropertyValue(e)};`)).join(""));var c;const s=Me(i.lineHeight),d=Math.round(s*r+Me(i.paddingTop)+Me(i.paddingBottom));He.setAttribute("style",p),He.setAttribute("aria-hidden","true"),He.style.height="auto",He.style.minHeight="auto",He.style.maxHeight="auto",He.style.position="fixed",He.style.left="0",He.style.top="-99999999px",He.style.zIndex="-200",He.style.whiteSpace="normal";const u=G({render:()=>R("span",null,[o])});u.mount(He);const x=Array.prototype.slice.apply(He.childNodes[0].cloneNode(!0).childNodes);u.unmount(),He.innerHTML="";const v=document.createTextNode(`${n}${l}`);He.appendChild(v),x.forEach((e=>{He.appendChild(e)}));const g=document.createTextNode(a);function y(){return He.offsetHeight<=d}return He.insertBefore(g,v),y()?{ellipsis:!1,text:a}:(function e(t,o=0,r=a.length,l=0){const n=Math.floor((o+r)/2),i=a.slice(0,n);if(t.textContent=i,o>=r-1)for(let p=r;p>=o;p-=1){const e=a.slice(0,p);if(t.textContent=e,y()||!e)return}y()?e(t,n,r,n):e(t,o,n,l)}(g),{text:g.textContent,ellipsis:!0})};let De;var Ke=Object.defineProperty,qe=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,Ge=(e,t,o)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;function Je(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!te(e)}function Qe(e,t){const{mark:o}=e,a=function(e){const{bold:t,mark:o,underline:a,delete:r,code:l}=e,n=[];return t&&n.push("b"),a&&n.push("u"),r&&n.push("del"),l&&n.push("code"),o&&n.push("mark"),n}(e),r=g(o)&&o.color?{backgroundColor:o.color}:{};return a.reduce(((e,t)=>R(t,"mark"===t?{style:r}:{},Je(e)?e:{default:()=>[e]})),t)}function Xe(e){const t=!!e.showTooltip,o=g(e.showTooltip)&&"popover"===e.showTooltip.type?oe:H,a=g(e.showTooltip)&&e.showTooltip.props||{};return r=((e,t)=>{for(var o in t||(t={}))Ue.call(t,o)&&Ge(e,o,t[o]);if(We)for(var o of We(t))Ye.call(t,o)&&Ge(e,o,t[o]);return e})({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},f(e,["showTooltip"])),qe(r,Fe({showTooltip:t,TooltipComponent:o,tooltipProps:a}));var r}var Ze=o({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{editing:l,defaultEditing:p,ellipsis:d,copyable:x,editable:v,copyText:m,editText:h,copyDelay:f,component:b}=n(e),w=i("typography"),k=s((()=>[w,{[`${w}-${e.type}`]:e.type,[`${w}-disabled`]:e.disabled}])),C=c(),T=c(""),[z,E]=J(p.value,Q({value:l})),S=s((()=>v.value&&z.value));function B(){o("update:editing",!0),o("editStart"),E(!0)}function $(){z.value&&(o("update:editing",!1),o("editEnd"),E(!1))}const _=c(!1);let j=null;function O(){var e;const t=null!=(e=m.value)?e:T.value;(async e=>{var t;if(null==(t=navigator.clipboard)?void 0:t.writeText)try{return void(await navigator.clipboard.writeText(e))}catch(l){console.error(null!=l?l:new DOMException("The request is not allowed","NotAllowedError"))}const o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre",document.body.appendChild(o);const a=window.getSelection(),r=window.document.createRange();null==a||a.removeAllRanges(),r.selectNode(o),null==a||a.addRange(r);try{window.document.execCommand("copy")}catch(l){console.error(`execCommand Error: ${l}`)}null==a||a.removeAllRanges(),window.document.body.removeChild(o)})(t||""),_.value=!0,o("copy",t),j=setTimeout((()=>{_.value=!1}),f.value)}X((()=>{j&&clearTimeout(j),j=null}));const P=c(!1),L=c(!1),A=c(""),N=s((()=>Xe(g(d.value)&&d.value||{})));let H=null;function M(){const e=!L.value;L.value=e,o("expand",e)}function V(o=!1){return N.value.css?R(Ne,{editable:v.value,copyable:x.value,expandable:N.value.expandable,isCopied:_.value,isEllipsis:W.value,expanded:L.value,forceRenderExpand:o||L.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:B,onCopy:O,onExpand:M},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):R(Ne,{editable:v.value,copyable:x.value,expandable:N.value.expandable,isCopied:_.value,isEllipsis:P.value,expanded:L.value,forceRenderExpand:o,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:B,onCopy:O,onExpand:M},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function D(){d.value&&!L.value&&(Z(H),H=ae((()=>{!function(){if(!C.value)return;const{ellipsis:e,text:t}=Ve(C.value,N.value,V(!!N.value.expandable),T.value);P.value!==e&&(P.value=e,N.value.css||o("ellipsis",e)),A.value!==t&&(A.value=t||"")}()})))}X((()=>{Z(H)})),u((()=>N.value.rows),(()=>{D()})),u(d,(e=>{e?D():P.value=!1}));let K=[];const q=()=>{if(d.value||x.value||v.value){const e=function(e){if(!e)return"";De||(De=document.createElement("div"),De.setAttribute("aria-hidden","true"),document.body.appendChild(De));const t=G({render:()=>R("div",null,[e])});t.mount(De);const o=De.innerText;return t.unmount(),o}(K);e!==T.value&&(T.value=e,D())}};y(q),ee(q);const F=c(),W=c(!1),U=()=>{if(C.value&&F.value){const e=F.value.offsetHeight>C.value.offsetHeight;e!==W.value&&(W.value=e,o("ellipsis",e))}},Y=s((()=>L.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":N.value.rows,"-webkit-box-orient":"vertical"}));return()=>{var l,n;if(K=(null==(l=t.default)?void 0:l.call(t))||[],S.value){const e=null!=(n=h.value)?n:T.value;return R(Le,{text:e,onChange:t=>{t!==e&&function(e){o("update:editText",e),o("change",e)}(t)},onEnd:$},null)}const{suffix:i,ellipsisStr:p,showTooltip:c,tooltipProps:s,TooltipComponent:d}=N.value,u=P.value&&!L.value,x=u&&!c?{title:T.value}:{},v=b.value;if(N.value.css){const t=Qe(e,K),o=R(v,I({class:k.value,ref:C,style:Y.value},x,r),{default:()=>[R("span",{ref:F},[t])]});return W.value?R(d,I(s,{onResize:()=>U()}),{default:()=>[o],content:()=>T.value}):R(a,{onResize:()=>{U()}},Je(o)?o:{default:()=>[o]})}const g=Qe(e,u?A.value:K);return R(a,{onResize:()=>D()},{default:()=>[R(v,I({class:k.value,ref:C},x,r),{default:()=>[u&&c?R(d,s,{default:()=>[R("span",null,[g])],content:()=>T.value}):g,u?p:null,i,V()]})]})}}}),et=o({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:o}=n(e),a=i("typography");return{component:s((()=>(null==t?void 0:t.value)?"blockquote":"div")),classNames:s((()=>[{[`${a}-spacing-close`]:"close"===(null==o?void 0:o.value)}]))}},render(){const{component:e,classNames:t}=this;return R(Ze,I({class:t},this.$attrs,{component:e}),this.$slots)}});const tt={key:0},ot=["innerHTML"],at=["textContent"],rt=["textContent"],lt=o({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,o=c(),a=new ze({linkify:!0,highlight(e,t){if(t&&Ee.getLanguage(t)){const o=t??"";return n(Ee.highlight(e,{language:o}).value,o)}return n(Ee.highlightAuto(e).value,"")}});a.use(Se,{attrs:{target:"_blank",rel:"noopener"}}),a.use(Be,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const r=s((()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}])),l=s((()=>{const e=(t.text??"").replace(/\n+$/g,"");return t.asRawText||t.inversion?e:a.render(e)}));function n(e,t){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${t}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${t}">${e}</code></pre>`}return ee((()=>{o.value&&Ee.highlightBlock(o.value)})),(t,a)=>(T(),z("div",{class:E(re(r))},[j("div",{ref_key:"textRef",ref:o,class:"leading-relaxed break-words relative"},[e.inversion?(T(),z("div",{key:1,class:"whitespace-pre-wrap",textContent:B(re(l))},null,8,rt)):(T(),z("div",tt,[e.asRawText?(T(),z("div",{key:1,class:"whitespace-pre-wrap",textContent:B(re(l))},null,8,at)):(T(),z("div",{key:0,class:"markdown-body",innerHTML:re(l)},null,8,ot))]))],512)],2))}}),nt=le(lt,[["__scopeId","data-v-507bd603"]]),it={key:0,class:"flex-1"},pt={class:"chat-wrapper"},ct={class:"flex items-center gap-x-2"},st=["src"],dt={key:0,class:"flex items-center gap-x-1 pl-4"},ut={key:0,class:"text-info"},xt={class:"chat-footer"},vt={class:"flex items-center gap-x-2 w-32"},gt={class:"flex-1"};e("default",o({__name:"ChatView",setup(e){const t=ne(),o=ie(),a=s((()=>t.session)),{isMobileScreen:r}=pe(),l={user:we,assistant:"/assets/openai-white-1b79b841.svg"},n=c(),i=c("新的聊天");ce((()=>{i.value=t.session?.topic||"新的聊天"}));const p=c(""),d=c(),u=()=>{if(e=p.value,/^[\s\n\r]*$/.test(e))return ue.clear(),void ue.error("请输入消息内容");var e;t.sendMessageAction(p.value,(()=>{n.value?.scrollTop((n.value?.containerRef?.scrollHeight??0)-200)}),(e=>{d.value=e})),p.value=""};y((()=>{k((()=>{n.value?.scrollTop((n.value?.containerRef?.scrollHeight??0)-200)}))}));const x=e=>{o.changeSubmitKeyAction(e)},v=()=>{t.handleChangeSessionTopicAction(i.value)},g=e=>{o.submitKey===be.Enter&&(e.shiftKey&&"Enter"===e.code?(e.preventDefault(),p.value+="\n"):e.shiftKey||"Enter"!==e.code||(e.preventDefault(),u())),o.submitKey===be.ShiftEnter&&(e.shiftKey||"Enter"!==e.code?e.shiftKey&&"Enter"===e.code&&(e.preventDefault(),u()):(e.preventDefault(),p.value+="\n"))};return(e,c)=>{const s=et,y=xe,m=ve,h=ge,f=ye,b=me,w=ke,k=Ce,S=C("icon-record-stop"),I=Te,O=H,P=nt,L=he,A=Oe,M=C("icon-send"),V=C("icon-down"),D=C("icon-check"),K=Re,U=$e,G=fe;return T(),z(Y,null,[R(f,{class:"h-14 px-4 flex items-center bg-white dark:bg-dark"},{default:_((()=>[j("div",{class:E(["flex flex-col editable-title__wrapper",{"is-mobile":re(r)}])},[R(s,{class:"m-0",editable:"",editText:re(i),"onUpdate:editText":c[0]||(c[0]=e=>se(i)?i.value=e:null),onEditEnd:v},{default:_((()=>[W(B(re(i)),1)])),_:1},8,["editText"])],2),re(r)?$("",!0):(T(),z("i",it)),re(r)?$("",!0):(T(),q(h,{key:1},{default:_((()=>[R(y,{class:"w-44"}),R(m,{class:"w-60"})])),_:1}))])),_:1}),R(b,{class:"m-0"}),R(G,{class:"flex flex-col flex-1 overflow-hidden"},{default:_((()=>[j("main",pt,[R(L,{ref_key:"scrollbarRef",ref:n,"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:_((()=>[(T(!0),z(Y,null,de(re(a)?.messages??[],(e=>(T(),z("section",{key:e.id,class:E(["message-item",["assistant"===e.role?"is-reply":"is-request"]])},[j("div",ct,[R(k,{loading:e.streaming&&"assistant"===e.role},{default:_((()=>[R(w,{size:32,class:E("assistant"===e.role?"bg-primary p-2":"bg-success")},{default:_((()=>[j("img",{src:l[e.role]??""},null,8,st)])),_:2},1032,["class"])])),_:2},1032,["loading"]),"assistant"===e.role?(T(),z("div",dt,[e.streaming?(T(),q(O,{key:0,"content-class":"text-xs",content:"停止",position:"top"},{default:_((()=>[R(I,{onClick:c[1]||(c[1]=e=>re(d)?.abort()),size:"mini",shape:"circle",type:"text",status:"danger"},{default:_((()=>[R(S,{class:"text-base"})])),_:1})])),_:1})):$("",!0)])):$("",!0)]),e.streaming&&"assistant"===e.role?(T(),z("small",ut,"正在输入...")):$("",!0),j("section",{class:E(["flex flex-col overflow-hidden px-4 py-3 text-sm rounded-lg max-w-max",{"justify-end bg-primary text-white":"user"===e.role},{"bg-white dark:bg-dark":"assistant"===e.role}])},[(T(),q(P,{loading:e.streaming,key:e.content,text:e.content,inversion:"assistant"!==e.role},null,8,["loading","text","inversion"]))],2)],2)))),128))])),_:1},512),R(b,{class:"m-0"}),j("footer",xt,[R(A,{disabled:re(t).fetching,modelValue:re(p),"onUpdate:modelValue":c[2]||(c[2]=e=>se(p)?p.value=e:null),onKeydown:N(F(g,["prevent"]),["enter"]),class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:3,maxRows:5},placeholder:"请输入您的消息..."},null,8,["disabled","modelValue","onKeydown"]),R(U,{disabled:re(t).fetching,onClick:u,onSelect:x,type:"primary"},{icon:_((()=>[R(V)])),content:_((()=>[(T(!0),z(Y,null,de(Object.values(re(be)),(e=>(T(),q(K,{key:e,value:e},{default:_((()=>[j("div",vt,[j("span",gt,B(e),1),e===re(o).submitKey?(T(),q(D,{key:0,class:"text-primary"})):$("",!0)])])),_:2},1032,["value"])))),128))])),default:_((()=>[R(M,{class:"mr-2"}),W(" 发送 ")])),_:1},8,["disabled"])])])])),_:1})],64)}}}))}}}));
