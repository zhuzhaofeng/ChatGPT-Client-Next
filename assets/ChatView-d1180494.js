import{g as oe,R as st,I as rt,h as it,t as we,i as ge,j as ut,r as g,k as _,u as ct,l as dt,m as Ce,n as ve,q as ze,s as me,v as W,o as h,x as $,b as p,w as N,a as J,y as A,F as Ie,z as ie,A as q,C as Te,D as pt,E as Ye,G as ft,P as Qe,d as pe,H as Ze,J as et,K as Ne,L as vt,M as mt,N as gt,O as yt,Q as ht,T as Ct,U as ue,V as bt,W as tt,X as Ve,Y as xt,Z as te,$ as de,a0 as wt,a1 as _t,a2 as He,a3 as kt,a4 as $t,a5 as St,a6 as Tt,c as fe,a7 as Be,a8 as Et,a9 as ot,aa as It,ab as Ae,ac as je,ad as Fe,ae as zt,af as Bt,ag as H,_ as Rt,ah as ce,ai as Pt,aj as Ot,ak as Lt,al as Nt,am as At,an as Me,ao as Ht,ap as Ft,aq as Vt,B as jt,S as Mt,ar as qt,as as Dt,at as Wt,au as Re,av as Ut}from"./index-cc750b77.js";import{M as Kt,H as Se,m as Gt,a as Jt}from"./index-b7903ef7.js";const nt=Symbol("ArcoAvatarGroup");var Xt=Object.defineProperty,qe=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,De=(e,t,o)=>t in e?Xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,We=(e,t)=>{for(var o in t||(t={}))Yt.call(t,o)&&De(e,o,t[o]);if(qe)for(var o of qe(t))Qt.call(t,o)&&De(e,o,t[o]);return e};const Zt=oe({name:"Avatar",components:{ResizeObserver:st,IconImageClose:rt,IconLoading:it},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{shape:c,size:d,autoFixFontSize:i,triggerType:l,triggerIconStyle:f}=we(e),n=ge("avatar"),v=ut(nt,void 0),E=g(),I=g(),U=_(()=>{var b;return(b=v==null?void 0:v.shape)!=null?b:c.value}),P=_(()=>{var b;return(b=v==null?void 0:v.size)!=null?b:d.value}),C=_(()=>{var b;return(b=v==null?void 0:v.autoFixFontSize)!=null?b:i.value}),z=g(!1),F=g(!1),s=g(!0),u=g(!1),m=v?ct({itemRef:E,selector:`.${n}`}).computedIndex:g(-1),w=_(()=>{var b;const K=dt(P.value)?{width:`${P.value}px`,height:`${P.value}px`,fontSize:`${P.value/2}px`}:{};return v&&(K.zIndex=v.zIndexAscend?m.value+1:v.total-m.value,K.marginLeft=m.value!==0?`-${((b=P.value)!=null?b:40)/4}px`:"0"),K}),O=eo({triggerIconStyle:f==null?void 0:f.value,inlineStyle:r.style,triggerType:l.value}),B=()=>{!z.value&&!e.imageUrl&&me(()=>{var b;if(!I.value||!E.value)return;const K=I.value.clientWidth,Z=(b=P.value)!=null?b:E.value.offsetWidth,ae=Z/(K+8);Z&&ae<1&&(I.value.style.transform=`scale(${ae}) translateX(-50%)`),s.value=!0})};Ce(()=>{var b;(b=I.value)!=null&&b.firstElementChild&&["IMG","PICTURE"].includes(I.value.firstElementChild.tagName)&&(z.value=!0),C.value&&B()}),ve(d,()=>{C.value&&B()});const V=_(()=>[n,`${n}-${U.value}`]),ne=_(()=>z.value||e.imageUrl?`${n}-image`:`${n}-text`);return{prefixCls:n,itemRef:E,cls:V,outerStyle:w,wrapperRef:I,wrapperCls:ne,computedTriggerIconStyle:O,isImage:z,shouldLoad:s,isLoaded:u,hasError:F,onClick:b=>{o("click",b)},handleResize:()=>{C.value&&B()},handleImgLoad:()=>{u.value=!0,o("load")},handleImgError:()=>{F.value=!0,o("error")}}}}),eo=({triggerType:e,inlineStyle:t={},triggerIconStyle:o={}})=>{let r={};return e==="button"&&(!o||o&&!o.color)&&t&&t.backgroundColor&&(r={color:t.backgroundColor}),We(We({},o),r)},to=["src"];function oo(e,t,o,r,c,d){const i=W("IconImageClose"),l=W("IconLoading"),f=W("resize-observer");return h(),$("div",{ref:"itemRef",style:Te(e.outerStyle),class:A([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:!!e.$slots["trigger-icon"]}]),onClick:t[2]||(t[2]=(...n)=>e.onClick&&e.onClick(...n))},[p(f,{onResize:e.handleResize},{default:N(()=>[J("span",{ref:"wrapperRef",class:A(e.wrapperCls)},[e.imageUrl?(h(),$(Ie,{key:0},[e.hasError?ie(e.$slots,"error",{key:0},()=>[J("div",{class:A(`${e.prefixCls}-image-icon`)},[p(i)],2)]):q("v-if",!0),!(e.hasError||!e.shouldLoad)&&!e.isLoaded?ie(e.$slots,"default",{key:1},()=>[J("div",{class:A(`${e.prefixCls}-image-icon`)},[p(l)],2)]):q("v-if",!0),e.hasError||!e.shouldLoad?q("v-if",!0):(h(),$("img",{key:2,src:e.imageUrl,style:Te({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:t[0]||(t[0]=(...n)=>e.handleImgLoad&&e.handleImgLoad(...n)),onError:t[1]||(t[1]=(...n)=>e.handleImgError&&e.handleImgError(...n))},null,44,to))],64)):ie(e.$slots,"default",{key:1})],2)]),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(h(),$("div",{key:0,class:A(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:Te(e.computedTriggerIconStyle)},[ie(e.$slots,"trigger-icon")],6)):q("v-if",!0)],6)}var Ee=ze(Zt,[["render",oo]]);const Pe=oe({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:t}){const{shape:o,size:r,autoFixFontSize:c,zIndexAscend:d}=we(e),i=ge("avatar-group"),l=g(0);return pt(nt,Ye({shape:o,size:r,autoFixFontSize:c,zIndexAscend:d,total:l})),()=>{var f,n;const v=ft((n=(f=t.default)==null?void 0:f.call(t))!=null?n:[]),E=e.maxCount>0?v.slice(0,e.maxCount):v,I=e.maxCount>0?v.slice(e.maxCount):[];return l.value!==E.length&&(l.value=E.length),p("div",{class:i},[E,I.length>0&&p(Qe,e.maxPopoverTriggerProps,{default:()=>[p(Ee,{class:`${i}-max-count-avatar`,style:e.maxStyle},{default:()=>[pe("+"),I.length]})],content:()=>p("div",null,[I])})])}}}),no=Object.assign(Ee,{Group:Pe,install:(e,t)=>{Ze(e,t);const o=et(t);e.component(o+Ee.name,Ee),e.component(o+Pe.name,Pe)}}),ao=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],lo=e=>{const t={};return ao.forEach(o=>{t[o]=e.getPropertyValue(o)}),t},so=oe({name:"Textarea",components:{ResizeObserver:Ne,IconHover:vt,IconClose:mt},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:o}){const{disabled:r,error:c,modelValue:d}=we(e),i=ge("textarea"),{mergedDisabled:l,mergedError:f,eventHandlers:n}=gt({disabled:r,error:c}),v=g(),E=g(),I=g(),U=g(),P=g(e.defaultValue),C=_(()=>{var a;return(a=d.value)!=null?a:P.value}),[z,F]=yt(v);ve(d,a=>{(ht(a)||Ct(a))&&(P.value="")});const s=_(()=>ue(e.maxLength)&&!!e.maxLength.errorOnly),u=_(()=>ue(e.maxLength)?e.maxLength.length:e.maxLength),m=a=>{var x;return bt(e.wordLength)?e.wordLength(a):(x=a.length)!=null?x:0},w=_(()=>m(C.value)),O=_(()=>f.value||!!(u.value&&s.value&&w.value>u.value)),B=g(!1),V=g(!1),ne=_(()=>e.allowClear&&!l.value&&C.value),j=g(!1),M=g(""),X=()=>{z(),me(()=>{v.value&&C.value!==v.value.value&&(v.value.value=C.value,F())})},L=(a,x=!0)=>{var T,k;u.value&&!s.value&&m(a)>u.value&&(a=(k=(T=e.wordSlice)==null?void 0:T.call(e,a,u.value))!=null?k:a.slice(0,u.value)),P.value=a,x&&t("update:modelValue",a),X()};let b=C.value;const K=(a,x)=>{var T,k;a!==b&&(b=a,t("change",a,x),(k=(T=n.value)==null?void 0:T.onChange)==null||k.call(T,x))},Z=a=>{var x,T;V.value=!0,b=C.value,t("focus",a),(T=(x=n.value)==null?void 0:x.onFocus)==null||T.call(x,a)},ae=a=>{var x,T;V.value=!1,t("blur",a),(T=(x=n.value)==null?void 0:x.onBlur)==null||T.call(x,a),K(C.value,a)},le=a=>{var x,T;const{value:k}=a.target;if(a.type==="compositionend"){if(j.value=!1,M.value="",u.value&&!s.value&&C.value.length>=u.value&&m(k)>u.value){X();return}t("input",k,a),L(k),(T=(x=n.value)==null?void 0:x.onInput)==null||T.call(x,a)}else j.value=!0},D=a=>{var x,T;const{value:k}=a.target;if(j.value)M.value=k;else{if(u.value&&!s.value&&C.value.length>=u.value&&m(k)>u.value&&a.inputType==="insertText"){X();return}t("input",k,a),L(k),(T=(x=n.value)==null?void 0:x.onInput)==null||T.call(x,a)}},Y=a=>{L(""),K("",a),t("clear",a)};ve(d,a=>{a!==C.value&&L(a!=null?a:"",!1)});const S=a=>tt(o,Ve),se=a=>xt(o,Ve),ee=_(()=>[`${i}-wrapper`,{[`${i}-focus`]:V.value,[`${i}-disabled`]:l.value,[`${i}-error`]:O.value,[`${i}-scroll`]:B.value}]);let _e;const y=g(0),G=g(0),be=_(()=>!ue(e.autoSize)||!e.autoSize.minRows?0:e.autoSize.minRows*y.value+G.value),xe=_(()=>!ue(e.autoSize)||!e.autoSize.maxRows?0:e.autoSize.maxRows*y.value+G.value),ye=()=>{const a=lo(_e);y.value=Number.parseInt(a["line-height"]||0,10),G.value=Number.parseInt(a["border-width"]||0,10)*2+Number.parseInt(a["padding-top"]||0,10)+Number.parseInt(a["padding-bottom"]||0,10),U.value=a,me(()=>{var x;const T=(x=I.value)==null?void 0:x.offsetHeight;let k=T!=null?T:0,Q="hidden";be.value&&k<be.value&&(k=be.value),xe.value&&k>xe.value&&(k=xe.value,Q="auto"),E.value={height:`${k}px`,resize:"none",overflow:Q}})};Ce(()=>{v.value&&(_e=window.getComputedStyle(v.value),e.autoSize&&ye()),re()});const ke=()=>{e.autoSize&&I.value&&ye(),re()},$e=a=>{v.value&&a.target!==v.value&&(a.preventDefault(),v.value.focus())},re=()=>{v.value&&(v.value.scrollHeight>v.value.offsetHeight?B.value||(B.value=!0):B.value&&(B.value=!1))};return ve(C,()=>{e.autoSize&&I.value&&ye(),re()}),{prefixCls:i,wrapperCls:ee,textareaRef:v,textareaStyle:E,mirrorRef:I,mirrorStyle:U,computedValue:C,showClearBtn:ne,valueLength:w,computedMaxLength:u,mergedDisabled:l,getWrapperAttrs:S,getTextareaAttrs:se,handleInput:D,handleFocus:Z,handleBlur:ae,handleComposition:le,handleClear:Y,handleResize:ke,handleMousedown:$e}},methods:{focus(){var e;(e=this.$refs.textareaRef)==null||e.focus()},blur(){var e;(e=this.$refs.textareaRef)==null||e.blur()}}}),ro=["disabled","value","placeholder"];function io(e,t,o,r,c,d){const i=W("resize-observer"),l=W("icon-close"),f=W("icon-hover");return h(),$("div",de(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...n)=>e.handleMousedown&&e.handleMousedown(...n))}),[e.autoSize?(h(),$("div",{key:0,ref:"mirrorRef",class:A(`${e.prefixCls}-mirror`),style:Te(e.mirrorStyle)},te(`${e.computedValue}
`),7)):q("v-if",!0),p(i,{onResize:e.handleResize},{default:N(()=>[J("textarea",de({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...n)=>e.handleInput&&e.handleInput(...n)),onFocus:t[1]||(t[1]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onBlur:t[2]||(t[2]=(...n)=>e.handleBlur&&e.handleBlur(...n)),onCompositionstart:t[3]||(t[3]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionupdate:t[4]||(t[4]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionend:t[5]||(t[5]=(...n)=>e.handleComposition&&e.handleComposition(...n))}),null,16,ro)]),_:1},8,["onResize"]),ie(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(h(),$("div",{key:1,class:A(`${e.prefixCls}-word-limit`)},te(e.valueLength)+"/"+te(e.computedMaxLength),3)):q("v-if",!0),e.showClearBtn?(h(),$("div",{key:2,class:A(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...n)=>e.handleClear&&e.handleClear(...n))},[p(f,null,{default:N(()=>[p(l)]),_:1})],2)):q("v-if",!0)],16)}var Oe=ze(so,[["render",io]]);const uo=Object.assign(Oe,{install:(e,t)=>{Ze(e,t);const o=et(t);e.component(o+Oe.name,Oe)}}),co=oe({name:"TypographyEditContent",components:{Input:wt},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const r=[`${ge("typography")}-edit-content`],c=g();function d(l){t("update:text",l),t("change",l)}function i(){t("end")}return Ce(()=>{if(!c.value||!c.value.$el)return;const l=c.value.$el.querySelector("input");if(!l)return;l.focus&&l.focus();const{length:f}=l.value;l.setSelectionRange(f,f)}),{classNames:r,inputRef:c,onBlur:i,onChange:d,onEnd:i}}});function po(e,t,o,r,c,d){const i=W("Input");return h(),$("div",{class:A(e.classNames)},[p(i,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:_t(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}var fo=ze(co,[["render",po]]);const vo=oe({name:"TypographyOperations",components:{Tooltip:He,IconCheckCircleFill:kt,IconCopy:$t,IconEdit:St},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const o=ge("typography"),r=_(()=>e.forceRenderExpand||e.expandable&&e.isEllipsis),{t:c}=Tt();return{prefixCls:o,showExpand:r,t:c,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});function mo(e,t,o,r,c,d){const i=W("IconEdit"),l=W("Tooltip"),f=W("IconCheckCircleFill"),n=W("IconCopy");return h(),$(Ie,null,[e.editable?(h(),fe(l,de({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:N(()=>[J("span",{class:A(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=Be((...v)=>e.onEditClick&&e.onEditClick(...v),["stop"]))},[p(i)],2)]),_:1},16,["content"])):q("v-if",!0),e.copyable?(h(),fe(l,Et(de({key:1},e.copyTooltipProps)),{content:N(()=>[ie(e.$slots,"copy-tooltip",{copied:e.isCopied},()=>[pe(te(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)])]),default:N(()=>[J("span",{class:A({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=Be((...v)=>e.onCopyClick&&e.onCopyClick(...v),["stop"]))},[ie(e.$slots,"copy-icon",{copied:e.isCopied},()=>[e.isCopied?(h(),fe(f,{key:0})):(h(),fe(n,{key:1}))])],2)]),_:3},16)):q("v-if",!0),e.showExpand?(h(),$("a",{key:2,class:A(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=Be((...v)=>e.onExpandClick&&e.onExpandClick(...v),["stop"]))},[ie(e.$slots,"expand-node",{expanded:e.expanded},()=>[pe(te(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)])],2)):q("v-if",!0)],64)}var Ue=ze(vo,[["render",mo]]);let R;function go(e){return Array.prototype.slice.apply(e).map(o=>`${o}: ${e.getPropertyValue(o)};`).join("")}function Le(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var yo=(e,t,o,r)=>{R||(R=document.createElement("div"),document.body.appendChild(R));const{rows:c,suffix:d,ellipsisStr:i}=t,l=window.getComputedStyle(e),f=go(l),n=Le(l.lineHeight),v=Math.round(n*c+Le(l.paddingTop)+Le(l.paddingBottom));R.setAttribute("style",f),R.setAttribute("aria-hidden","true"),R.style.height="auto",R.style.minHeight="auto",R.style.maxHeight="auto",R.style.position="fixed",R.style.left="0",R.style.top="-99999999px",R.style.zIndex="-200",R.style.whiteSpace="normal";const E=ot({render(){return p("span",null,[o])}});E.mount(R);const I=Array.prototype.slice.apply(R.childNodes[0].cloneNode(!0).childNodes);E.unmount(),R.innerHTML="";const U=document.createTextNode(`${i}${d}`);R.appendChild(U),I.forEach(F=>{R.appendChild(F)});const P=document.createTextNode(r);R.insertBefore(P,U);function C(){return R.offsetHeight<=v}if(C())return{ellipsis:!1,text:r};function z(F,s=0,u=r.length,m=0){const w=Math.floor((s+u)/2),O=r.slice(0,w);if(F.textContent=O,s>=u-1)for(let B=u;B>=s;B-=1){const V=r.slice(0,B);if(F.textContent=V,C()||!V)return}C()?z(F,w,u,w):z(F,s,w,m)}return z(P),{text:P.textContent,ellipsis:!0}};const ho=async e=>{var t;if((t=navigator.clipboard)!=null&&t.writeText)try{await navigator.clipboard.writeText(e);return}catch(d){console.error(d!=null?d:new DOMException("The request is not allowed","NotAllowedError"))}const o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre",document.body.appendChild(o);const r=window.getSelection(),c=window.document.createRange();r==null||r.removeAllRanges(),c.selectNode(o),r==null||r.addRange(c);try{window.document.execCommand("copy")}catch(d){console.error(`execCommand Error: ${d}`)}r==null||r.removeAllRanges(),window.document.body.removeChild(o)};let he;function Co(e){if(!e)return"";he||(he=document.createElement("div"),he.setAttribute("aria-hidden","true"),document.body.appendChild(he));const t=ot({render(){return p("div",null,[e])}});t.mount(he);const o=he.innerText;return t.unmount(),o}var bo=Object.defineProperty,xo=Object.defineProperties,wo=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,Ge=(e,t,o)=>t in e?bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,$o=(e,t)=>{for(var o in t||(t={}))_o.call(t,o)&&Ge(e,o,t[o]);if(Ke)for(var o of Ke(t))ko.call(t,o)&&Ge(e,o,t[o]);return e},So=(e,t)=>xo(e,wo(t));function at(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}function To(e){const{bold:t,mark:o,underline:r,delete:c,code:d}=e,i=[];return t&&i.push("b"),r&&i.push("u"),c&&i.push("del"),d&&i.push("code"),o&&i.push("mark"),i}function Je(e,t){const{mark:o}=e,r=To(e),c=ue(o)&&o.color?{backgroundColor:o.color}:{};return r.reduce((d,i)=>p(i,i==="mark"?{style:c}:{},at(d)?d:{default:()=>[d]}),t)}function Eo(e){const t=!!e.showTooltip,o=ue(e.showTooltip)&&e.showTooltip.type==="popover"?Qe:He,r=ue(e.showTooltip)&&e.showTooltip.props||{};return So($o({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},tt(e,["showTooltip"])),{showTooltip:t,TooltipComponent:o,tooltipProps:r})}var Io=oe({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{editing:c,defaultEditing:d,ellipsis:i,copyable:l,editable:f,copyText:n,editText:v,copyDelay:E,component:I}=we(e),U=ge("typography"),P=_(()=>[U,{[`${U}-${e.type}`]:e.type,[`${U}-disabled`]:e.disabled}]),C=g(),z=g(""),[F,s]=It(d.value,Ye({value:c})),u=_(()=>f.value&&F.value);function m(){o("update:editing",!0),o("editStart"),s(!0)}function w(y){o("update:editText",y),o("change",y)}function O(){F.value&&(o("update:editing",!1),o("editEnd"),s(!1))}const B=g(!1);let V=null;function ne(){var y;const G=(y=n.value)!=null?y:z.value;ho(G||""),B.value=!0,o("copy",G),V=setTimeout(()=>{B.value=!1},E.value)}Ae(()=>{V&&clearTimeout(V),V=null});const j=g(!1),M=g(!1),X=g(""),L=_(()=>Eo(ue(i.value)&&i.value||{}));let b=null;function K(){const y=!M.value;M.value=y,o("expand",y)}function Z(y=!1){return L.value.css?p(Ue,{editable:f.value,copyable:l.value,expandable:L.value.expandable,isCopied:B.value,isEllipsis:se.value,expanded:M.value,forceRenderExpand:y||M.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:m,onCopy:ne,onExpand:K},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):p(Ue,{editable:f.value,copyable:l.value,expandable:L.value.expandable,isCopied:B.value,isEllipsis:j.value,expanded:M.value,forceRenderExpand:y,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:m,onCopy:ne,onExpand:K},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function ae(){if(!C.value)return;const{ellipsis:y,text:G}=yo(C.value,L.value,Z(!!L.value.expandable),z.value);j.value!==y&&(j.value=y,L.value.css||o("ellipsis",y)),X.value!==G&&(X.value=G||"")}function le(){i.value&&!M.value&&(je(b),b=Bt(()=>{ae()}))}Ae(()=>{je(b)}),ve(()=>L.value.rows,()=>{le()}),ve(i,y=>{y?le():j.value=!1});let D=[];const Y=()=>{if(i.value||l.value||f.value){const y=Co(D);y!==z.value&&(z.value=y,le())}};Ce(Y),Fe(Y);const S=g(),se=g(!1),ee=()=>{if(C.value&&S.value){const y=S.value.offsetHeight>C.value.offsetHeight;y!==se.value&&(se.value=y,o("ellipsis",y))}},_e=_(()=>M.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":L.value.rows,"-webkit-box-orient":"vertical"});return()=>{var y,G;if(D=((y=t.default)==null?void 0:y.call(t))||[],u.value){const k=(G=v.value)!=null?G:z.value;return p(fo,{text:k,onChange:Q=>{Q!==k&&w(Q)},onEnd:O},null)}const{suffix:be,ellipsisStr:xe,showTooltip:ye,tooltipProps:ke,TooltipComponent:$e}=L.value,re=j.value&&!M.value,a=re&&!ye?{title:z.value}:{},x=I.value;if(L.value.css){const k=Je(e,D),Q=p(x,de({class:P.value,ref:C,style:_e.value},a,r),{default:()=>[p("span",{ref:S},[k])]});return se.value?p($e,de(ke,{onResize:()=>ee()}),{default:()=>[Q],content:()=>z.value}):p(Ne,{onResize:()=>{ee()}},at(Q)?Q:{default:()=>[Q]})}const T=Je(e,re?X.value:D);return p(Ne,{onResize:()=>le()},{default:()=>[p(x,de({class:P.value,ref:C},a,r),{default:()=>[re&&ye?p($e,ke,{default:()=>[p("span",null,[T])],content:()=>z.value}):T,re?xe:null,be,Z()]})]})}}}),zo=oe({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:o}=we(e),r=ge("typography"),c=_(()=>t!=null&&t.value?"blockquote":"div"),d=_(()=>[{[`${r}-spacing-close`]:(o==null?void 0:o.value)==="close"}]);return{component:c,classNames:d}},render(){const{component:e,classNames:t}=this;return p(Io,de({class:t},this.$attrs,{component:e}),this.$slots)}});const Bo={key:0,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},Ro={key:0},Po=["innerHTML"],Oo=["textContent"],Lo=["textContent"],No=oe({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,o=g(),r=new Kt({linkify:!0,highlight(f,n){if(!!(n&&Se.getLanguage(n))){const E=n!=null?n:"";return l(Se.highlight(f,{language:E}).value,E)}return l(Se.highlightAuto(f).value,"")}});r.use(Gt,{attrs:{target:"_blank",rel:"noopener"}}),r.use(Jt,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const c=_(()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}]),d=f=>f.replace(/\n+$/g,""),i=_(()=>{var n;const f=d((n=t.text)!=null?n:"");return!t.asRawText&&!t.inversion?r.render(f):f});function l(f,n){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${n}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${n}">${f}</code></pre>`}return Fe(()=>{me(()=>{o.value&&Se.highlightBlock(o.value)})}),(f,n)=>(h(),$("div",{class:A(H(c))},[e.loading?(h(),$("span",Bo)):(h(),$("div",{key:1,ref_key:"textRef",ref:o,class:"leading-relaxed break-words"},[e.inversion?(h(),$("div",{key:1,class:"whitespace-pre-wrap",textContent:te(H(i))},null,8,Lo)):(h(),$("div",Ro,[e.asRawText?(h(),$("div",{key:1,class:"whitespace-pre-wrap",textContent:te(H(i))},null,8,Oo)):(h(),$("div",{key:0,class:"markdown-body",innerHTML:H(i)},null,8,Po))]))],512))],2))}});const Ao=Rt(No,[["__scopeId","data-v-cf02b953"]]);const Ho="/assets/openai-white-1b79b841.svg";function lt(e){const t={origin:!0,...e};let o;t.origin?o=document.createElement("textarea"):o=document.createElement("input"),o.setAttribute("readonly","readonly"),o.value=t.text,document.body.appendChild(o),o.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(o)}function Xe(){function e(){document.querySelectorAll(".code-block-wrapper").forEach(o=>{const r=o.querySelector(".code-block-header__copy"),c=o.querySelector(".code-block-body");r&&c&&r.addEventListener("click",()=>{var d,i,l;(d=navigator.clipboard)!=null&&d.writeText?(navigator.clipboard.writeText((i=c.textContent)!=null?i:""),ce.clear(),ce.success("复制成功")):(lt({text:(l=c.textContent)!=null?l:"",origin:!0}),ce.clear(),ce.success("复制成功"))})})}e(),Ce(()=>e()),Fe(()=>e())}const Fo=e=>/^[\s\n\r]*$/.test(e),Vo={key:0,class:"flex-1"},jo={class:"chat-wrapper"},Mo=["src"],qo={class:"date-time"},Do={key:0,class:"text-info"},Wo={key:0,class:"message-item__actions"},Uo={class:"chat-footer"},Jo=oe({__name:"ChatView",setup(e){Xe();const t=Pt(),o=Ot(),r=_(()=>t.session),{isMobileScreen:c}=Lt(),d=g(!1),i={user:Wt,assistant:Ho},l=g(),f=g("新的聊天");Nt(()=>{var s;f.value=((s=t.session)==null?void 0:s.topic)||"新的聊天"}),ve(()=>t.currentChat,()=>{me(()=>{var s,u,m,w;(w=l.value)==null||w.scrollTop(((m=(u=(s=l.value)==null?void 0:s.containerRef)==null?void 0:u.scrollHeight)!=null?m:0)-200)})});const n=g(""),v=s=>{d.value=!1,t.messageRetryAction(s,()=>{var u,m,w,O;d.value||(O=l.value)==null||O.scrollTop(((w=(m=(u=l.value)==null?void 0:u.containerRef)==null?void 0:m.scrollHeight)!=null?w:0)-200)})},E=()=>{if(Fo(n.value)){ce.clear(),ce.error("请输入消息内容");return}d.value=!1,t.sendMessageAction(n.value,s=>{var u,m,w,O;d.value||(O=l.value)==null||O.scrollTop(((w=(m=(u=l.value)==null?void 0:u.containerRef)==null?void 0:m.scrollHeight)!=null?w:0)-200),s&&me(()=>{Xe()})}),n.value=""},I=s=>{s.deltaY<10&&(d.value=!0)};Ce(()=>{me(()=>{var s,u,m,w,O;(w=l.value)==null||w.scrollTop(((m=(u=(s=l.value)==null?void 0:s.containerRef)==null?void 0:u.scrollHeight)!=null?m:0)-200),(O=l.value)==null||O.$el.querySelector(".arco-scrollbar-container").addEventListener("wheel",I)})});const U=s=>{var u,m,w;(((u=s==null?void 0:s.target)==null?void 0:u.scrollTop)||0)+(((m=s==null?void 0:s.target)==null?void 0:m.offsetHeight)||0)>=(((w=s==null?void 0:s.target)==null?void 0:w.scrollHeight)||0)-70&&(d.value=!1)};Ae(()=>{var s,u,m;(s=t.abortController)!=null&&s.abort&&((u=t.abortController)==null||u.abort()),(m=l.value)==null||m.$el.querySelector(".arco-scrollbar-container").removeEventListener("wheel",I)});const P=()=>{t.handleChangeSessionTopicAction(f.value)},C=s=>{c.value||s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),E())},z=s=>{lt({text:s}),ce.clear(),ce.success("复制成功")},F=_(()=>{let s="请输入您的消息";return c.value||(s+=`，${o.submitKey} 发送，${o.submitKey===Re.Enter?Re.ShiftEnter:Re.Enter} 换行`),s});return(s,u)=>{const m=zo,w=Ft,O=Vt,B=no,V=Ut,ne=W("icon-copy"),j=jt,M=He,X=W("icon-sync"),L=Ao,b=Mt,K=W("icon-record-stop"),Z=uo,ae=qt,le=At("date-time");return h(),$(Ie,null,[p(w,{class:"h-14 px-4 flex items-center gap-x-3 bg-white dark:bg-dark"},{default:N(()=>[J("div",{class:A(["flex flex-col editable-title__wrapper",{"is-mobile":H(c)}])},[p(m,{class:"m-0",editable:"",editText:H(f),"onUpdate:editText":u[0]||(u[0]=D=>Me(f)?f.value=D:null),onEditEnd:P},{default:N(()=>[pe(te(H(f)),1)]),_:1},8,["editText"])],2),H(c)?q("",!0):(h(),$("i",Vo))]),_:1}),p(O,{class:"m-0"}),p(ae,{class:"flex flex-col flex-1 overflow-hidden"},{default:N(()=>[J("main",jo,[p(b,{ref_key:"scrollbarRef",ref:l,onScroll:U,"outer-style":"flex: 1; overflow: hidden; ",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2 pb-20"},{default:N(()=>{var D,Y;return[(h(!0),$(Ie,null,Ht((Y=(D=H(r))==null?void 0:D.messages)!=null?Y:[],(S,se)=>(h(),$("section",{key:S.id,class:A(["message-item",[S.role==="assistant"?"is-reply":"is-request",H(c)?"max-w-full":"max-w-4/5"]])},[J("div",{class:A(["flex items-center gap-x-4",{"flex-row-reverse":S.role!=="assistant"}])},[p(V,{loading:S.streaming&&S.role==="assistant"},{default:N(()=>[p(B,{size:32,class:A(S.role==="assistant"?"bg-primary p-2":"bg-success")},{default:N(()=>{var ee;return[J("img",{src:(ee=i[S.role])!=null?ee:""},null,8,Mo)]}),_:2},1032,["class"])]),_:2},1032,["loading"]),Dt((h(),$("small",qo,[pe(te(S.date),1)])),[[le,S.date]])],2),S.streaming&&S.role==="assistant"?(h(),$("small",Do," 正在输入... ")):q("",!0),J("section",{class:A(["message-item__content",{"is-user":S.role==="user"},{"is-assistant":S.role==="assistant"}])},[S.role==="assistant"?(h(),$("div",Wo,[p(M,{"content-class":"text-xs",content:"复制",position:"top"},{default:N(()=>[p(j,{onClick:ee=>z(S.content),size:"mini",shape:"circle",type:"text"},{default:N(()=>[p(ne,{class:"text-base"})]),_:2},1032,["onClick"])]),_:2},1024),p(M,{"content-class":"text-xs",content:"重试",position:"top"},{default:N(()=>[p(j,{onClick:ee=>v(se),size:"mini",shape:"circle",type:"text"},{default:N(()=>[p(X,{class:"text-base"})]),_:2},1032,["onClick"])]),_:2},1024)])):q("",!0),(h(),fe(L,{key:S.content,text:S.content,inversion:S.role!=="assistant"},null,8,["text","inversion"]))],2)],2))),128))]}),_:1},512),p(O,{class:"m-0"}),J("footer",Uo,[H(t).fetching?(h(),fe(j,{key:0,onClick:u[1]||(u[1]=D=>{var Y;return(Y=H(t).abortController)==null?void 0:Y.abort()}),shape:"round",status:"danger",class:"stop-receiving"},{default:N(()=>[p(K,{class:"text-lg mr-2"}),pe(" 停止 ")]),_:1})):q("",!0),p(Z,{modelValue:H(n),"onUpdate:modelValue":u[2]||(u[2]=D=>Me(n)?n.value=D:null),onKeypress:C,class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:H(c)?1:3,maxRows:6},placeholder:H(F)},null,8,["modelValue","auto-size","placeholder"]),H(c)&&H(n).trim().length>0?(h(),fe(j,{key:1,size:"medium",class:"rounded text-xs",onClick:E,type:"primary"},{default:N(()=>[pe(" 发送 ")]),_:1})):q("",!0)])])]),_:1})],64)}}});export{Jo as default};
