System.register(["./index-legacy-8c274cb5.js","./index-legacy-2c8b5ef7.js"],(function(e,t){"use strict";var a,o,r,n,i,l,c,s,p,d,u,m,g,v,x,h,y,b,f,w,k,C,z,T,S,E,$,I,R,B,_,j,L,O,P,A,N,F,H,q,M,V,D,U,K,W,G,Y,X,J,Q,Z,ee,te,ae,oe,re,ne,ie,le,ce,se,pe,de,ue,me,ge,ve,xe,he,ye,be,fe,we,ke,Ce,ze,Te,Se,Ee,$e,Ie,Re,Be,_e,je,Le,Oe=document.createElement("style");return Oe.textContent=".arco-textarea-wrapper{display:inline-flex;box-sizing:border-box;color:var(--color-text-1);font-size:14px;background-color:var(--color-fill-2);border:1px solid transparent;border-radius:var(--border-radius-small);cursor:text;transition:color .1s cubic-bezier(0,0,1,1),border-color .1s cubic-bezier(0,0,1,1),background-color .1s cubic-bezier(0,0,1,1);position:relative;display:inline-block;width:100%;padding-right:0;padding-left:0;overflow:hidden}.arco-textarea-wrapper:hover{background-color:var(--color-fill-3);border-color:transparent}.arco-textarea-wrapper:focus-within,.arco-textarea-wrapper.arco-textarea-focus{background-color:var(--color-bg-2);border-color:rgb(var(--primary-6));box-shadow:0 0 0 0 var(--color-primary-light-2)}.arco-textarea-wrapper.arco-textarea-disabled{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent;cursor:not-allowed}.arco-textarea-wrapper.arco-textarea-disabled:hover{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-prefix,.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-suffix{color:inherit}.arco-textarea-wrapper.arco-textarea-error{background-color:var(--color-danger-light-1);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:hover{background-color:var(--color-danger-light-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:focus-within,.arco-textarea-wrapper.arco-textarea-error.arco-textarea-wrapper-focus{background-color:var(--color-bg-2);border-color:rgb(var(--danger-6));box-shadow:0 0 0 0 var(--color-danger-light-2)}.arco-textarea-wrapper .arco-textarea-prefix,.arco-textarea-wrapper .arco-textarea-suffix{display:inline-flex;flex-shrink:0;align-items:center;white-space:nowrap;user-select:none}.arco-textarea-wrapper .arco-textarea-prefix>svg,.arco-textarea-wrapper .arco-textarea-suffix>svg{font-size:14px}.arco-textarea-wrapper .arco-textarea-prefix{padding-right:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix{padding-left:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon{display:inline-flex}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-validating{color:rgb(var(--primary-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-success{color:rgb(var(--success-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-warning{color:rgb(var(--warning-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-error{color:rgb(var(--danger-6))}.arco-textarea-wrapper .arco-textarea-clear-btn{align-self:center;color:var(--color-text-2);font-size:12px;visibility:hidden;cursor:pointer}.arco-textarea-wrapper .arco-textarea-clear-btn>svg{position:relative;transition:color .1s cubic-bezier(0,0,1,1)}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{visibility:visible}.arco-textarea-wrapper:not(.arco-textarea-focus) .arco-textarea-icon-hover:hover:before{background-color:var(--color-fill-4)}.arco-textarea-wrapper .arco-textarea-word-limit{position:absolute;right:10px;bottom:6px;color:var(--color-text-3);font-size:12px;user-select:none}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-word-limit{right:25px}.arco-textarea-wrapper .arco-textarea-clear-btn{position:absolute;top:50%;right:10px;transform:translateY(-50%)}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-clear-btn{right:25px}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{display:block}.arco-textarea-wrapper .arco-textarea-mirror{position:absolute;visibility:hidden}.arco-textarea{width:100%;color:inherit;background:none;border:none;border-radius:0;outline:none;cursor:inherit;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:block;box-sizing:border-box;height:100%;min-height:32px;padding:4px 12px;font-size:14px;line-height:1.5715;vertical-align:top;resize:vertical}.arco-textarea::placeholder{color:var(--color-text-3)}.arco-textarea[disabled]::placeholder{color:var(--color-text-4)}.arco-textarea[disabled]{-webkit-text-fill-color:var(--color-text-4)}.message-content[data-v-cf02b953]{max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important}.arco-avatar{position:relative;display:inline-flex;align-items:center;box-sizing:border-box;width:40px;height:40px;color:var(--color-white);font-size:20px;white-space:nowrap;vertical-align:middle;background-color:var(--color-fill-4)}.arco-avatar-circle{border-radius:var(--border-radius-circle)}.arco-avatar-circle .arco-avatar-image{overflow:hidden;border-radius:var(--border-radius-circle)}.arco-avatar-square{border-radius:var(--border-radius-medium)}.arco-avatar-square .arco-avatar-image{overflow:hidden;border-radius:var(--border-radius-medium)}.arco-avatar-text{position:absolute;left:50%;font-weight:500;line-height:1;transform:translate(-50%);transform-origin:0 center}.arco-avatar-image{display:inline-block;width:100%;height:100%}.arco-avatar-image-icon{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.arco-avatar-image img,.arco-avatar-image picture{width:100%;height:100%}.arco-avatar-trigger-icon-button{position:absolute;right:-4px;bottom:-4px;z-index:1;width:20px;height:20px;color:var(--color-fill-4);font-size:12px;line-height:20px;text-align:center;background-color:var(--color-neutral-2);border-radius:var(--border-radius-circle);transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-avatar-trigger-icon-mask{position:absolute;top:0;left:0;z-index:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:var(--color-white);font-size:16px;background-color:rgba(29,33,41,.6);border-radius:var(--border-radius-medium);opacity:0;transition:all .1s cubic-bezier(0,0,1,1)}.arco-avatar-circle .arco-avatar-trigger-icon-mask{border-radius:var(--border-radius-circle)}.arco-avatar-with-trigger-icon{cursor:pointer}.arco-avatar-with-trigger-icon:hover .arco-avatar-trigger-icon-mask{z-index:2;opacity:1}.arco-avatar-with-trigger-icon:hover .arco-avatar-trigger-icon-button{background-color:var(--color-neutral-3)}.arco-avatar-group{display:inline-block;line-height:0}.arco-avatar-group-max-count-avatar{color:var(--color-white);font-size:20px;cursor:default}.arco-avatar-group .arco-avatar{border:2px solid var(--color-bg-2)}.arco-avatar-group .arco-avatar:not(:first-child){margin-left:-10px}.arco-avatar-group-popover .arco-avatar:not(:first-child){margin-left:4px}.arco-typography{color:var(--color-text-1);line-height:1.5715}h1.arco-typography,h2.arco-typography,h3.arco-typography,h4.arco-typography,h5.arco-typography,h6.arco-typography{margin-top:1em;margin-bottom:.5em;font-weight:500}h1.arco-typography{font-size:36px;line-height:1.23}h2.arco-typography{font-size:32px;line-height:1.25}h3.arco-typography{font-size:28px;line-height:1.29}h4.arco-typography{font-size:24px;line-height:1.33}h5.arco-typography{font-size:20px;line-height:1.4}h6.arco-typography{font-size:16px;line-height:1.5}div.arco-typography,p.arco-typography{margin-top:0;margin-bottom:1em}.arco-typography-primary{color:rgb(var(--primary-6))}.arco-typography-secondary{color:var(--color-text-2)}.arco-typography-success{color:rgb(var(--success-6))}.arco-typography-warning{color:rgb(var(--warning-6))}.arco-typography-danger{color:rgb(var(--danger-6))}.arco-typography-disabled{color:var(--color-text-4);cursor:not-allowed}.arco-typography mark{background-color:rgb(var(--yellow-4))}.arco-typography u{text-decoration:underline}.arco-typography del{text-decoration:line-through}.arco-typography b{font-weight:500}.arco-typography code{margin:0 2px;padding:2px 8px;color:var(--color-text-2);font-size:85%;background-color:var(--color-neutral-2);border:1px solid var(--color-neutral-3);border-radius:2px}.arco-typography blockquote{margin:0 0 1em;padding-left:8px;background-color:var(--color-bg-2);border-left:2px solid var(--color-neutral-6)}.arco-typography ol,.arco-typography ul{margin:0;padding:0}.arco-typography ul li,.arco-typography ol li{margin-left:20px}.arco-typography ul{list-style:circle}.arco-typography-spacing-close{line-height:1.3}.arco-typography-operation-copy,.arco-typography-operation-copied{margin-left:2px;padding:2px}.arco-typography-operation-copy{color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-copy:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-copied{color:rgb(var(--success-6))}.arco-typography-operation-edit{margin-left:2px;padding:2px;color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-edit:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-expand{margin:0 4px;color:rgb(var(--primary-6));cursor:pointer}.arco-typography-operation-expand:hover{color:rgb(var(--primary-5))}.arco-typography-edit-content{position:relative;left:-13px;margin-top:-5px;margin-right:-13px;margin-bottom:calc(1em - 5px)}.arco-typography-css-operation{margin-top:-1em;margin-bottom:1em;text-align:right}.chat-wrapper{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-flex:1!important;-ms-flex:1 1 0%!important;-webkit-flex:1 1 0%!important;flex:1 1 0%!important;overflow:hidden!important}.chat-wrapper .message-item{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:start!important;-ms-flex-align:start!important;-webkit-align-items:flex-start!important;align-items:flex-start!important;justify-items:start!important;padding-left:0!important;grid-gap:.5rem!important;gap:.5rem!important}.chat-wrapper .message-item.is-request{-webkit-box-align:end!important;-ms-flex-align:end!important;-webkit-align-items:flex-end!important;align-items:flex-end!important;margin-left:auto!important;max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important;padding-left:2.5rem!important}.chat-wrapper .message-item .message-item__content{border-radius:.5rem!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;font-size:.875rem!important;line-height:1.25rem!important;max-width:100%!important;min-width:18rem!important;padding:.75rem 1rem!important;position:relative!important}.chat-wrapper .message-item .message-item__content.is-user{--tw-bg-opacity: 1 !important;background-color:rgba(16,163,127,var(--tw-bg-opacity))!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;--tw-text-opacity: 1 !important;color:rgba(255,255,255,var(--tw-text-opacity))!important}.chat-wrapper .message-item .message-item__content.is-assistant{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important}.dark .chat-wrapper .message-item .message-item__content.is-assistant{--tw-bg-opacity: 1 !important;background-color:rgba(35,35,36,var(--tw-bg-opacity))!important}.chat-wrapper .message-item .message-item__actions{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-align:center!important;-ms-flex-align:center!important;-webkit-align-items:center!important;align-items:center!important;opacity:0!important;padding-left:1rem!important;position:absolute!important;top:-2.25rem!important;right:2rem!important;-webkit-column-gap:.25rem!important;-moz-column-gap:.25rem!important;grid-column-gap:.25rem!important;column-gap:.25rem!important;-webkit-transition-property:all!important;-o-transition-property:all!important;transition-property:all!important;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-o-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-webkit-transition-duration:.15s!important;-o-transition-duration:.15s!important;transition-duration:.15s!important;-webkit-transition-duration:.5s!important;-o-transition-duration:.5s!important;transition-duration:.5s!important}.chat-wrapper .message-item:hover .message-item__actions{opacity:1!important;right:0px!important}.chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-ms-flex-align:center!important;-webkit-align-items:center!important;align-items:center!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;padding:.75rem 1rem .5rem .5rem!important;position:relative!important;width:100%!important}.dark .chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(23,23,26,var(--tw-bg-opacity))!important}.chat-footer .stop-receiving{position:absolute!important;top:-3rem!important}.date-time{color:rgb(var(--gray-8))}\n",document.head.appendChild(Oe),{setters:[e=>{a=e.g,o=e.R,r=e.I,n=e.h,i=e.t,l=e.i,c=e.j,s=e.r,p=e.k,d=e.u,u=e.l,m=e.m,g=e.n,v=e.q,x=e.s,h=e.v,y=e.o,b=e.x,f=e.b,w=e.w,k=e.a,C=e.y,z=e.F,T=e.z,S=e.A,E=e.C,$=e.D,I=e.E,R=e.G,B=e.P,_=e.d,j=e.H,L=e.J,O=e.K,P=e.L,A=e.M,N=e.N,F=e.O,H=e.Q,q=e.T,M=e.U,V=e.V,D=e.W,U=e.X,K=e.Y,W=e.Z,G=e.$,Y=e.a0,X=e.a1,J=e.a2,Q=e.a3,Z=e.a4,ee=e.a5,te=e.a6,ae=e.c,oe=e.a7,re=e.a8,ne=e.a9,ie=e.aa,le=e.ab,ce=e.ac,se=e.ad,pe=e.ae,de=e.af,ue=e.ag,me=e._,ge=e.ah,ve=e.ai,xe=e.aj,he=e.ak,ye=e.al,be=e.am,fe=e.an,we=e.ao,ke=e.ap,Ce=e.aq,ze=e.B,Te=e.S,Se=e.ar,Ee=e.as,$e=e.at,Ie=e.au,Re=e.av},e=>{Be=e.M,_e=e.H,je=e.m,Le=e.a}],execute:function(){const t=Symbol("ArcoAvatarGroup");var Oe=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Fe=(e,t,a)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,He=(e,t)=>{for(var a in t||(t={}))Ae.call(t,a)&&Fe(e,a,t[a]);if(Pe)for(var a of Pe(t))Ne.call(t,a)&&Fe(e,a,t[a]);return e};const qe=a({name:"Avatar",components:{ResizeObserver:o,IconImageClose:r,IconLoading:n},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:a,emit:o,attrs:r}){const{shape:n,size:v,autoFixFontSize:h,triggerType:y,triggerIconStyle:b}=i(e),f=l("avatar"),w=c(t,void 0),k=s(),C=s(),z=p((()=>{var e;return null!=(e=null==w?void 0:w.shape)?e:n.value})),T=p((()=>{var e;return null!=(e=null==w?void 0:w.size)?e:v.value})),S=p((()=>{var e;return null!=(e=null==w?void 0:w.autoFixFontSize)?e:h.value})),E=s(!1),$=s(!1),I=s(!0),R=s(!1),B=w?d({itemRef:k,selector:`.${f}`}).computedIndex:s(-1),_=p((()=>{var e;const t=u(T.value)?{width:`${T.value}px`,height:`${T.value}px`,fontSize:T.value/2+"px"}:{};return w&&(t.zIndex=w.zIndexAscend?B.value+1:w.total-B.value,t.marginLeft=0!==B.value?`-${(null!=(e=T.value)?e:40)/4}px`:"0"),t})),j=Me({triggerIconStyle:null==b?void 0:b.value,inlineStyle:r.style,triggerType:y.value}),L=()=>{E.value||e.imageUrl||x((()=>{var e;if(!C.value||!k.value)return;const t=C.value.clientWidth,a=null!=(e=T.value)?e:k.value.offsetWidth,o=a/(t+8);a&&o<1&&(C.value.style.transform=`scale(${o}) translateX(-50%)`),I.value=!0}))};m((()=>{var e;(null==(e=C.value)?void 0:e.firstElementChild)&&["IMG","PICTURE"].includes(C.value.firstElementChild.tagName)&&(E.value=!0),S.value&&L()})),g(v,(()=>{S.value&&L()}));const O=p((()=>[f,`${f}-${z.value}`])),P=p((()=>E.value||e.imageUrl?`${f}-image`:`${f}-text`));return{prefixCls:f,itemRef:k,cls:O,outerStyle:_,wrapperRef:C,wrapperCls:P,computedTriggerIconStyle:j,isImage:E,shouldLoad:I,isLoaded:R,hasError:$,onClick:e=>{o("click",e)},handleResize:()=>{S.value&&L()},handleImgLoad:()=>{R.value=!0,o("load")},handleImgError:()=>{$.value=!0,o("error")}}}}),Me=({triggerType:e,inlineStyle:t={},triggerIconStyle:a={}})=>{let o={};return"button"===e&&(!a||a&&!a.color)&&t&&t.backgroundColor&&(o={color:t.backgroundColor}),He(He({},a),o)},Ve=["src"];var De=v(qe,[["render",function(e,t,a,o,r,n){const i=h("IconImageClose"),l=h("IconLoading"),c=h("resize-observer");return y(),b("div",{ref:"itemRef",style:E(e.outerStyle),class:C([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:Boolean(e.$slots["trigger-icon"])}]),onClick:t[2]||(t[2]=(...t)=>e.onClick&&e.onClick(...t))},[f(c,{onResize:e.handleResize},{default:w((()=>[k("span",{ref:"wrapperRef",class:C(e.wrapperCls)},[e.imageUrl?(y(),b(z,{key:0},[e.hasError?T(e.$slots,"error",{key:0},(()=>[k("div",{class:C(`${e.prefixCls}-image-icon`)},[f(i)],2)])):S("v-if",!0),e.hasError||!e.shouldLoad||e.isLoaded?S("v-if",!0):T(e.$slots,"default",{key:1},(()=>[k("div",{class:C(`${e.prefixCls}-image-icon`)},[f(l)],2)])),!e.hasError&&e.shouldLoad?(y(),b("img",{key:2,src:e.imageUrl,style:E({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:t[0]||(t[0]=(...t)=>e.handleImgLoad&&e.handleImgLoad(...t)),onError:t[1]||(t[1]=(...t)=>e.handleImgError&&e.handleImgError(...t))},null,44,Ve)):S("v-if",!0)],64)):T(e.$slots,"default",{key:1})],2)])),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(y(),b("div",{key:0,class:C(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:E(e.computedTriggerIconStyle)},[T(e.$slots,"trigger-icon")],6)):S("v-if",!0)],6)}]]);const Ue=a({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:a}){const{shape:o,size:r,autoFixFontSize:n,zIndexAscend:c}=i(e),p=l("avatar-group"),d=s(0);return $(t,I({shape:o,size:r,autoFixFontSize:n,zIndexAscend:c,total:d})),()=>{var t,o;const r=R(null!=(o=null==(t=a.default)?void 0:t.call(a))?o:[]),n=e.maxCount>0?r.slice(0,e.maxCount):r,i=e.maxCount>0?r.slice(e.maxCount):[];return d.value!==n.length&&(d.value=n.length),f("div",{class:p},[n,i.length>0&&f(B,e.maxPopoverTriggerProps,{default:()=>[f(De,{class:`${p}-max-count-avatar`,style:e.maxStyle},{default:()=>[_("+"),i.length]})],content:()=>f("div",null,[i])})])}}}),Ke=Object.assign(De,{Group:Ue,install:(e,t)=>{j(e,t);const a=L(t);e.component(a+De.name,De),e.component(a+Ue.name,Ue)}}),We=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],Ge=a({name:"Textarea",components:{ResizeObserver:O,IconHover:P,IconClose:A},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:a}){const{disabled:o,error:r,modelValue:n}=i(e),c=l("textarea"),{mergedDisabled:d,mergedError:u,eventHandlers:v}=N({disabled:o,error:r}),h=s(),y=s(),b=s(),f=s(),w=s(e.defaultValue),k=p((()=>{var e;return null!=(e=n.value)?e:w.value})),[C,z]=F(h);g(n,(e=>{(H(e)||q(e))&&(w.value="")}));const T=p((()=>M(e.maxLength)&&Boolean(e.maxLength.errorOnly))),S=p((()=>M(e.maxLength)?e.maxLength.length:e.maxLength)),E=t=>{var a;return V(e.wordLength)?e.wordLength(t):null!=(a=t.length)?a:0},$=p((()=>E(k.value))),I=p((()=>u.value||Boolean(S.value&&T.value&&$.value>S.value))),R=s(!1),B=s(!1),_=p((()=>e.allowClear&&!d.value&&k.value)),j=s(!1),L=s(""),O=()=>{C(),x((()=>{h.value&&k.value!==h.value.value&&(h.value.value=k.value,z())}))},P=(a,o=!0)=>{var r,n;S.value&&!T.value&&E(a)>S.value&&(a=null!=(n=null==(r=e.wordSlice)?void 0:r.call(e,a,S.value))?n:a.slice(0,S.value)),w.value=a,o&&t("update:modelValue",a),O()};let A=k.value;const W=(e,a)=>{var o,r;e!==A&&(A=e,t("change",e,a),null==(r=null==(o=v.value)?void 0:o.onChange)||r.call(o,a))};g(n,(e=>{e!==k.value&&P(null!=e?e:"",!1)}));const G=p((()=>[`${c}-wrapper`,{[`${c}-focus`]:B.value,[`${c}-disabled`]:d.value,[`${c}-error`]:I.value,[`${c}-scroll`]:R.value}]));let Y;const X=s(0),J=s(0),Q=p((()=>M(e.autoSize)&&e.autoSize.minRows?e.autoSize.minRows*X.value+J.value:0)),Z=p((()=>M(e.autoSize)&&e.autoSize.maxRows?e.autoSize.maxRows*X.value+J.value:0)),ee=()=>{const e=(e=>{const t={};return We.forEach((a=>{t[a]=e.getPropertyValue(a)})),t})(Y);X.value=Number.parseInt(e["line-height"]||0,10),J.value=2*Number.parseInt(e["border-width"]||0,10)+Number.parseInt(e["padding-top"]||0,10)+Number.parseInt(e["padding-bottom"]||0,10),f.value=e,x((()=>{var e;const t=null==(e=b.value)?void 0:e.offsetHeight;let a=null!=t?t:0,o="hidden";Q.value&&a<Q.value&&(a=Q.value),Z.value&&a>Z.value&&(a=Z.value,o="auto"),y.value={height:`${a}px`,resize:"none",overflow:o}}))};m((()=>{h.value&&(Y=window.getComputedStyle(h.value),e.autoSize&&ee()),te()}));const te=()=>{h.value&&(h.value.scrollHeight>h.value.offsetHeight?R.value||(R.value=!0):R.value&&(R.value=!1))};return g(k,(()=>{e.autoSize&&b.value&&ee(),te()})),{prefixCls:c,wrapperCls:G,textareaRef:h,textareaStyle:y,mirrorRef:b,mirrorStyle:f,computedValue:k,showClearBtn:_,valueLength:$,computedMaxLength:S,mergedDisabled:d,getWrapperAttrs:e=>D(a,U),getTextareaAttrs:e=>K(a,U),handleInput:e=>{var a,o;const{value:r}=e.target;if(j.value)L.value=r;else{if(S.value&&!T.value&&k.value.length>=S.value&&E(r)>S.value&&"insertText"===e.inputType)return void O();t("input",r,e),P(r),null==(o=null==(a=v.value)?void 0:a.onInput)||o.call(a,e)}},handleFocus:e=>{var a,o;B.value=!0,A=k.value,t("focus",e),null==(o=null==(a=v.value)?void 0:a.onFocus)||o.call(a,e)},handleBlur:e=>{var a,o;B.value=!1,t("blur",e),null==(o=null==(a=v.value)?void 0:a.onBlur)||o.call(a,e),W(k.value,e)},handleComposition:e=>{var a,o;const{value:r}=e.target;if("compositionend"===e.type){if(j.value=!1,L.value="",S.value&&!T.value&&k.value.length>=S.value&&E(r)>S.value)return void O();t("input",r,e),P(r),null==(o=null==(a=v.value)?void 0:a.onInput)||o.call(a,e)}else j.value=!0},handleClear:e=>{P(""),W("",e),t("clear",e)},handleResize:()=>{e.autoSize&&b.value&&ee(),te()},handleMousedown:e=>{h.value&&e.target!==h.value&&(e.preventDefault(),h.value.focus())}}},methods:{focus(){var e;null==(e=this.$refs.textareaRef)||e.focus()},blur(){var e;null==(e=this.$refs.textareaRef)||e.blur()}}}),Ye=["disabled","value","placeholder"];var Xe=v(Ge,[["render",function(e,t,a,o,r,n){const i=h("resize-observer"),l=h("icon-close"),c=h("icon-hover");return y(),b("div",G(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...t)=>e.handleMousedown&&e.handleMousedown(...t))}),[e.autoSize?(y(),b("div",{key:0,ref:"mirrorRef",class:C(`${e.prefixCls}-mirror`),style:E(e.mirrorStyle)},W(`${e.computedValue}\n`),7)):S("v-if",!0),f(i,{onResize:e.handleResize},{default:w((()=>[k("textarea",G({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onCompositionstart:t[3]||(t[3]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionupdate:t[4]||(t[4]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionend:t[5]||(t[5]=(...t)=>e.handleComposition&&e.handleComposition(...t))}),null,16,Ye)])),_:1},8,["onResize"]),T(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(y(),b("div",{key:1,class:C(`${e.prefixCls}-word-limit`)},W(e.valueLength)+"/"+W(e.computedMaxLength),3)):S("v-if",!0),e.showClearBtn?(y(),b("div",{key:2,class:C(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...t)=>e.handleClear&&e.handleClear(...t))},[f(c,null,{default:w((()=>[f(l)])),_:1})],2)):S("v-if",!0)],16)}]]);const Je=Object.assign(Xe,{install:(e,t)=>{j(e,t);const a=L(t);e.component(a+Xe.name,Xe)}}),Qe=a({name:"TypographyEditContent",components:{Input:Y},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const a=[`${l("typography")}-edit-content`],o=s();function r(){t("end")}return m((()=>{if(!o.value||!o.value.$el)return;const e=o.value.$el.querySelector("input");if(!e)return;e.focus&&e.focus();const{length:t}=e.value;e.setSelectionRange(t,t)})),{classNames:a,inputRef:o,onBlur:r,onChange:function(e){t("update:text",e),t("change",e)},onEnd:r}}});var Ze=v(Qe,[["render",function(e,t,a,o,r,n){const i=h("Input");return y(),b("div",{class:C(e.classNames)},[f(i,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:X(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}]]);const et=a({name:"TypographyOperations",components:{Tooltip:J,IconCheckCircleFill:Q,IconCopy:Z,IconEdit:ee},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const a=l("typography"),o=p((()=>e.forceRenderExpand||e.expandable&&e.isEllipsis)),{t:r}=te();return{prefixCls:a,showExpand:o,t:r,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});var tt=v(et,[["render",function(e,t,a,o,r,n){const i=h("IconEdit"),l=h("Tooltip"),c=h("IconCheckCircleFill"),s=h("IconCopy");return y(),b(z,null,[e.editable?(y(),ae(l,G({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:w((()=>[k("span",{class:C(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=oe(((...t)=>e.onEditClick&&e.onEditClick(...t)),["stop"]))},[f(i)],2)])),_:1},16,["content"])):S("v-if",!0),e.copyable?(y(),ae(l,re(G({key:1},e.copyTooltipProps)),{content:w((()=>[T(e.$slots,"copy-tooltip",{copied:e.isCopied},(()=>[_(W(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)]))])),default:w((()=>[k("span",{class:C({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=oe(((...t)=>e.onCopyClick&&e.onCopyClick(...t)),["stop"]))},[T(e.$slots,"copy-icon",{copied:e.isCopied},(()=>[e.isCopied?(y(),ae(c,{key:0})):(y(),ae(s,{key:1}))]))],2)])),_:3},16)):S("v-if",!0),e.showExpand?(y(),b("a",{key:2,class:C(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=oe(((...t)=>e.onExpandClick&&e.onExpandClick(...t)),["stop"]))},[T(e.$slots,"expand-node",{expanded:e.expanded},(()=>[_(W(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)]))],2)):S("v-if",!0)],64)}]]);let at;function ot(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var rt=(e,t,a,o)=>{at||(at=document.createElement("div"),document.body.appendChild(at));const{rows:r,suffix:n,ellipsisStr:i}=t,l=window.getComputedStyle(e),c=(s=l,Array.prototype.slice.apply(s).map((e=>`${e}: ${s.getPropertyValue(e)};`)).join(""));var s;const p=ot(l.lineHeight),d=Math.round(p*r+ot(l.paddingTop)+ot(l.paddingBottom));at.setAttribute("style",c),at.setAttribute("aria-hidden","true"),at.style.height="auto",at.style.minHeight="auto",at.style.maxHeight="auto",at.style.position="fixed",at.style.left="0",at.style.top="-99999999px",at.style.zIndex="-200",at.style.whiteSpace="normal";const u=ne({render:()=>f("span",null,[a])});u.mount(at);const m=Array.prototype.slice.apply(at.childNodes[0].cloneNode(!0).childNodes);u.unmount(),at.innerHTML="";const g=document.createTextNode(`${i}${n}`);at.appendChild(g),m.forEach((e=>{at.appendChild(e)}));const v=document.createTextNode(o);function x(){return at.offsetHeight<=d}return at.insertBefore(v,g),x()?{ellipsis:!1,text:o}:(function e(t,a=0,r=o.length,n=0){const i=Math.floor((a+r)/2),l=o.slice(0,i);if(t.textContent=l,a>=r-1)for(let c=r;c>=a;c-=1){const e=o.slice(0,c);if(t.textContent=e,x()||!e)return}x()?e(t,i,r,i):e(t,a,i,n)}(v),{text:v.textContent,ellipsis:!0})};let nt;var it=Object.defineProperty,lt=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ut=(e,t,a)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function mt(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!pe(e)}function gt(e,t){const{mark:a}=e,o=function(e){const{bold:t,mark:a,underline:o,delete:r,code:n}=e,i=[];return t&&i.push("b"),o&&i.push("u"),r&&i.push("del"),n&&i.push("code"),a&&i.push("mark"),i}(e),r=M(a)&&a.color?{backgroundColor:a.color}:{};return o.reduce(((e,t)=>f(t,"mark"===t?{style:r}:{},mt(e)?e:{default:()=>[e]})),t)}function vt(e){const t=!!e.showTooltip,a=M(e.showTooltip)&&"popover"===e.showTooltip.type?B:J,o=M(e.showTooltip)&&e.showTooltip.props||{};return r=((e,t)=>{for(var a in t||(t={}))pt.call(t,a)&&ut(e,a,t[a]);if(st)for(var a of st(t))dt.call(t,a)&&ut(e,a,t[a]);return e})({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},D(e,["showTooltip"])),lt(r,ct({showTooltip:t,TooltipComponent:a,tooltipProps:o}));var r}var xt=a({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:a,attrs:o}){const{editing:r,defaultEditing:n,ellipsis:c,copyable:d,editable:u,copyText:v,editText:x,copyDelay:h,component:y}=i(e),b=l("typography"),w=p((()=>[b,{[`${b}-${e.type}`]:e.type,[`${b}-disabled`]:e.disabled}])),k=s(),C=s(""),[z,T]=ie(n.value,I({value:r})),S=p((()=>u.value&&z.value));function E(){a("update:editing",!0),a("editStart"),T(!0)}function $(){z.value&&(a("update:editing",!1),a("editEnd"),T(!1))}const R=s(!1);let B=null;function _(){var e;const t=null!=(e=v.value)?e:C.value;(async e=>{var t;if(null==(t=navigator.clipboard)?void 0:t.writeText)try{return void(await navigator.clipboard.writeText(e))}catch(n){console.error(null!=n?n:new DOMException("The request is not allowed","NotAllowedError"))}const a=document.createElement("span");a.textContent=e,a.style.whiteSpace="pre",document.body.appendChild(a);const o=window.getSelection(),r=window.document.createRange();null==o||o.removeAllRanges(),r.selectNode(a),null==o||o.addRange(r);try{window.document.execCommand("copy")}catch(n){console.error(`execCommand Error: ${n}`)}null==o||o.removeAllRanges(),window.document.body.removeChild(a)})(t||""),R.value=!0,a("copy",t),B=setTimeout((()=>{R.value=!1}),h.value)}le((()=>{B&&clearTimeout(B),B=null}));const j=s(!1),L=s(!1),P=s(""),A=p((()=>vt(M(c.value)&&c.value||{})));let N=null;function F(){const e=!L.value;L.value=e,a("expand",e)}function H(a=!1){return A.value.css?f(tt,{editable:u.value,copyable:d.value,expandable:A.value.expandable,isCopied:R.value,isEllipsis:K.value,expanded:L.value,forceRenderExpand:a||L.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:E,onCopy:_,onExpand:F},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):f(tt,{editable:u.value,copyable:d.value,expandable:A.value.expandable,isCopied:R.value,isEllipsis:j.value,expanded:L.value,forceRenderExpand:a,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:E,onCopy:_,onExpand:F},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function q(){c.value&&!L.value&&(ce(N),N=de((()=>{!function(){if(!k.value)return;const{ellipsis:e,text:t}=rt(k.value,A.value,H(!!A.value.expandable),C.value);j.value!==e&&(j.value=e,A.value.css||a("ellipsis",e)),P.value!==t&&(P.value=t||"")}()})))}le((()=>{ce(N)})),g((()=>A.value.rows),(()=>{q()})),g(c,(e=>{e?q():j.value=!1}));let V=[];const D=()=>{if(c.value||d.value||u.value){const e=function(e){if(!e)return"";nt||(nt=document.createElement("div"),nt.setAttribute("aria-hidden","true"),document.body.appendChild(nt));const t=ne({render:()=>f("div",null,[e])});t.mount(nt);const a=nt.innerText;return t.unmount(),a}(V);e!==C.value&&(C.value=e,q())}};m(D),se(D);const U=s(),K=s(!1),W=()=>{if(k.value&&U.value){const e=U.value.offsetHeight>k.value.offsetHeight;e!==K.value&&(K.value=e,a("ellipsis",e))}},Y=p((()=>L.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":A.value.rows,"-webkit-box-orient":"vertical"}));return()=>{var r,n;if(V=(null==(r=t.default)?void 0:r.call(t))||[],S.value){const e=null!=(n=x.value)?n:C.value;return f(Ze,{text:e,onChange:t=>{t!==e&&function(e){a("update:editText",e),a("change",e)}(t)},onEnd:$},null)}const{suffix:i,ellipsisStr:l,showTooltip:c,tooltipProps:s,TooltipComponent:p}=A.value,d=j.value&&!L.value,u=d&&!c?{title:C.value}:{},m=y.value;if(A.value.css){const t=gt(e,V),a=f(m,G({class:w.value,ref:k,style:Y.value},u,o),{default:()=>[f("span",{ref:U},[t])]});return K.value?f(p,G(s,{onResize:()=>W()}),{default:()=>[a],content:()=>C.value}):f(O,{onResize:()=>{W()}},mt(a)?a:{default:()=>[a]})}const g=gt(e,d?P.value:V);return f(O,{onResize:()=>q()},{default:()=>[f(m,G({class:w.value,ref:k},u,o),{default:()=>[d&&c?f(p,s,{default:()=>[f("span",null,[g])],content:()=>C.value}):g,d?l:null,i,H()]})]})}}}),ht=a({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:a}=i(e),o=l("typography");return{component:p((()=>(null==t?void 0:t.value)?"blockquote":"div")),classNames:p((()=>[{[`${o}-spacing-close`]:"close"===(null==a?void 0:a.value)}]))}},render(){const{component:e,classNames:t}=this;return f(xt,G({class:t},this.$attrs,{component:e}),this.$slots)}});const yt={key:0,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},bt={key:0},ft=["innerHTML"],wt=["textContent"],kt=["textContent"],Ct=a({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,a=s(),o=new Be({linkify:!0,highlight(e,t){if(t&&_e.getLanguage(t)){const a=t??"";return i(_e.highlight(e,{language:a}).value,a)}return i(_e.highlightAuto(e).value,"")}});o.use(je,{attrs:{target:"_blank",rel:"noopener"}}),o.use(Le,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const r=p((()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}])),n=p((()=>{const e=(t.text??"").replace(/\n+$/g,"");return t.asRawText||t.inversion?e:o.render(e)}));function i(e,t){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${t}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${t}">${e}</code></pre>`}return se((()=>{x((()=>{a.value&&_e.highlightBlock(a.value)}))})),(t,o)=>(y(),b("div",{class:C(ue(r))},[e.loading?(y(),b("span",yt)):(y(),b("div",{key:1,ref_key:"textRef",ref:a,class:"leading-relaxed break-words"},[e.inversion?(y(),b("div",{key:1,class:"whitespace-pre-wrap",textContent:W(ue(n))},null,8,kt)):(y(),b("div",bt,[e.asRawText?(y(),b("div",{key:1,class:"whitespace-pre-wrap",textContent:W(ue(n))},null,8,wt)):(y(),b("div",{key:0,class:"markdown-body",innerHTML:ue(n)},null,8,ft))]))],512))],2))}}),zt=me(Ct,[["__scopeId","data-v-cf02b953"]]);function Tt(e){const t={origin:!0,...e};let a;a=t.origin?document.createElement("textarea"):document.createElement("input"),a.setAttribute("readonly","readonly"),a.value=t.text,document.body.appendChild(a),a.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(a)}function St(){function e(){document.querySelectorAll(".code-block-wrapper").forEach((e=>{const t=e.querySelector(".code-block-header__copy"),a=e.querySelector(".code-block-body");t&&a&&t.addEventListener("click",(()=>{navigator.clipboard?.writeText?(navigator.clipboard.writeText(a.textContent??""),ge.clear(),ge.success("复制成功")):(Tt({text:a.textContent??"",origin:!0}),ge.clear(),ge.success("复制成功"))}))}))}e(),m((()=>e())),se((()=>e()))}const Et={key:0,class:"flex-1"},$t={class:"chat-wrapper"},It=["src"],Rt={class:"date-time"},Bt={key:0,class:"text-info"},_t={key:0,class:"message-item__actions"},jt={class:"chat-footer"};e("default",a({__name:"ChatView",setup(e){St();const t=ve(),a=xe(),o=p((()=>t.session)),{isMobileScreen:r}=he(),n=s(!1),i={user:$e,assistant:"/assets/openai-white-1b79b841.svg"},l=s(),c=s("新的聊天");ye((()=>{c.value=t.session?.topic||"新的聊天"})),g((()=>t.currentChat),(()=>{x((()=>{l.value?.scrollTop((l.value?.containerRef?.scrollHeight??0)-200)}))}));const d=s(""),u=()=>{if(e=d.value,/^[\s\n\r]*$/.test(e))return ge.clear(),void ge.error("请输入消息内容");var e;n.value=!1,t.sendMessageAction(d.value,(e=>{n.value||l.value?.scrollTop((l.value?.containerRef?.scrollHeight??0)-200),e&&x((()=>{St()}))})),d.value=""},v=e=>{e.deltaY<10&&(n.value=!0)};m((()=>{x((()=>{l.value?.scrollTop((l.value?.containerRef?.scrollHeight??0)-200),l.value?.$el.querySelector(".arco-scrollbar-container").addEventListener("wheel",v)}))}));const T=e=>{(e?.target?.scrollTop||0)+(e?.target?.offsetHeight||0)>=(e?.target?.scrollHeight||0)-70&&(n.value=!1)};le((()=>{t.abortController?.abort&&t.abortController?.abort(),l.value?.$el.querySelector(".arco-scrollbar-container").removeEventListener("wheel",v)}));const E=()=>{t.handleChangeSessionTopicAction(c.value)},$=e=>{r.value?"Enter"===e.key&&(e.preventDefault(),u()):"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},I=p((()=>`请输入您的消息，${a.submitKey} 发送，${a.submitKey===Ie.Enter?Ie.ShiftEnter:Ie.Enter} 换行`));return(e,a)=>{const s=ht,p=ke,u=Ce,m=Ke,g=Re,v=h("icon-copy"),x=ze,R=J,B=h("icon-sync"),j=zt,L=Te,O=h("icon-record-stop"),P=Je,A=Se,N=be("date-time");return y(),b(z,null,[f(p,{class:"h-14 px-4 flex items-center bg-white dark:bg-dark"},{default:w((()=>[k("div",{class:C(["flex flex-col editable-title__wrapper",{"is-mobile":ue(r)}])},[f(s,{class:"m-0",editable:"",editText:ue(c),"onUpdate:editText":a[0]||(a[0]=e=>fe(c)?c.value=e:null),onEditEnd:E},{default:w((()=>[_(W(ue(c)),1)])),_:1},8,["editText"])],2),ue(r)?S("",!0):(y(),b("i",Et))])),_:1}),f(u,{class:"m-0"}),f(A,{class:"flex flex-col flex-1 overflow-hidden"},{default:w((()=>[k("main",$t,[f(L,{ref_key:"scrollbarRef",ref:l,onScroll:T,"outer-style":"flex: 1; overflow: hidden; ",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2 pb-20"},{default:w((()=>[(y(!0),b(z,null,we(ue(o)?.messages??[],((e,a)=>(y(),b("section",{key:e.id,class:C(["message-item",["assistant"===e.role?"is-reply":"is-request",ue(r)?"max-w-full":"max-w-4/5"]])},[k("div",{class:C(["flex items-center gap-x-4",{"flex-row-reverse":"assistant"!==e.role}])},[f(g,{loading:e.streaming&&"assistant"===e.role},{default:w((()=>[f(m,{size:32,class:C("assistant"===e.role?"bg-primary p-2":"bg-success")},{default:w((()=>[k("img",{src:i[e.role]??""},null,8,It)])),_:2},1032,["class"])])),_:2},1032,["loading"]),Ee((y(),b("small",Rt,[_(W(e.date),1)])),[[N,e.date]])],2),e.streaming&&"assistant"===e.role?(y(),b("small",Bt," 正在输入... ")):S("",!0),k("section",{class:C(["message-item__content",{"is-user":"user"===e.role},{"is-assistant":"assistant"===e.role}])},["assistant"===e.role?(y(),b("div",_t,[f(R,{"content-class":"text-xs",content:"复制",position:"top"},{default:w((()=>[f(x,{onClick:t=>(Tt({text:e.content}),ge.clear(),void ge.success("复制成功")),size:"mini",shape:"circle",type:"text"},{default:w((()=>[f(v,{class:"text-base"})])),_:2},1032,["onClick"])])),_:2},1024),f(R,{"content-class":"text-xs",content:"重试",position:"top"},{default:w((()=>[f(x,{onClick:e=>(e=>{n.value=!1,t.messageRetryAction(e,(()=>{n.value||l.value?.scrollTop((l.value?.containerRef?.scrollHeight??0)-200)}))})(a),size:"mini",shape:"circle",type:"text"},{default:w((()=>[f(B,{class:"text-base"})])),_:2},1032,["onClick"])])),_:2},1024)])):S("",!0),(y(),ae(j,{key:e.content,text:e.content,inversion:"assistant"!==e.role},null,8,["text","inversion"]))],2)],2)))),128))])),_:1},512),f(u,{class:"m-0"}),k("footer",jt,[ue(t).fetching?(y(),ae(x,{key:0,onClick:a[1]||(a[1]=e=>ue(t).abortController?.abort()),shape:"round",status:"danger",class:"stop-receiving"},{default:w((()=>[f(O,{class:"text-lg mr-2"}),_(" 停止 ")])),_:1})):S("",!0),f(P,{modelValue:ue(d),"onUpdate:modelValue":a[2]||(a[2]=e=>fe(d)?d.value=e:null),onKeypress:$,class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:4,maxRows:6},placeholder:ue(I)},null,8,["modelValue","placeholder"])])])])),_:1})],64)}}}))}}}));
