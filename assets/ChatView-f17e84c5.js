import{g as te,R as lt,I as st,h as rt,t as we,i as pe,j as it,r as g,k as w,u as ut,l as ct,m as ye,n as me,q as ze,s as be,v as q,o as y,x as S,b as c,w as N,a as X,y as A,F as Ie,z as re,A as W,C as Te,D as dt,E as Xe,G as pt,P as Ye,d as xe,H as Qe,J as Ze,K as Ne,L as ft,M as vt,N as gt,O as mt,Q as yt,T as ht,U as ie,V as Ct,W as et,X as Ve,Y as bt,Z as ce,$ as de,a0 as xt,a1 as wt,a2 as He,a3 as _t,a4 as kt,a5 as $t,a6 as St,c as ge,a7 as Be,a8 as Tt,a9 as tt,aa as Et,ab as Ae,ac as je,ad as Fe,ae as It,af as zt,ag as U,_ as Bt,ah as ue,ai as Rt,aj as Pt,ak as Ot,al as Lt,am as Me,an as Nt,ao as At,ap as Ht,B as Ft,S as Vt,aq as jt,ar as Mt,as as Re,at as qt}from"./index-860b91a3.js";import{M as Wt,H as Se,m as Dt,a as Ut}from"./index-b7903ef7.js";const ot=Symbol("ArcoAvatarGroup");var Kt=Object.defineProperty,qe=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable,We=(e,t,o)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,De=(e,t)=>{for(var o in t||(t={}))Gt.call(t,o)&&We(e,o,t[o]);if(qe)for(var o of qe(t))Jt.call(t,o)&&We(e,o,t[o]);return e};const Xt=te({name:"Avatar",components:{ResizeObserver:lt,IconImageClose:st,IconLoading:rt},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{shape:f,size:u,autoFixFontSize:i,triggerType:s,triggerIconStyle:d}=we(e),n=pe("avatar"),p=it(ot,void 0),T=g(),E=g(),j=w(()=>{var C;return(C=p==null?void 0:p.shape)!=null?C:f.value}),P=w(()=>{var C;return(C=p==null?void 0:p.size)!=null?C:u.value}),h=w(()=>{var C;return(C=p==null?void 0:p.autoFixFontSize)!=null?C:i.value}),I=g(!1),H=g(!1),L=g(!0),a=g(!1),v=p?ut({itemRef:T,selector:`.${n}`}).computedIndex:g(-1),_=w(()=>{var C;const D=ct(P.value)?{width:`${P.value}px`,height:`${P.value}px`,fontSize:`${P.value/2}px`}:{};return p&&(D.zIndex=p.zIndexAscend?v.value+1:p.total-v.value,D.marginLeft=v.value!==0?`-${((C=P.value)!=null?C:40)/4}px`:"0"),D}),z=Yt({triggerIconStyle:d==null?void 0:d.value,inlineStyle:r.style,triggerType:s.value}),x=()=>{!I.value&&!e.imageUrl&&be(()=>{var C;if(!E.value||!T.value)return;const D=E.value.clientWidth,Z=(C=P.value)!=null?C:T.value.offsetWidth,ne=Z/(D+8);Z&&ne<1&&(E.value.style.transform=`scale(${ne}) translateX(-50%)`),L.value=!0})};ye(()=>{var C;(C=E.value)!=null&&C.firstElementChild&&["IMG","PICTURE"].includes(E.value.firstElementChild.tagName)&&(I.value=!0),h.value&&x()}),me(u,()=>{h.value&&x()});const V=w(()=>[n,`${n}-${j.value}`]),oe=w(()=>I.value||e.imageUrl?`${n}-image`:`${n}-text`);return{prefixCls:n,itemRef:T,cls:V,outerStyle:_,wrapperRef:E,wrapperCls:oe,computedTriggerIconStyle:z,isImage:I,shouldLoad:L,isLoaded:a,hasError:H,onClick:C=>{o("click",C)},handleResize:()=>{h.value&&x()},handleImgLoad:()=>{a.value=!0,o("load")},handleImgError:()=>{H.value=!0,o("error")}}}}),Yt=({triggerType:e,inlineStyle:t={},triggerIconStyle:o={}})=>{let r={};return e==="button"&&(!o||o&&!o.color)&&t&&t.backgroundColor&&(r={color:t.backgroundColor}),De(De({},o),r)},Qt=["src"];function Zt(e,t,o,r,f,u){const i=q("IconImageClose"),s=q("IconLoading"),d=q("resize-observer");return y(),S("div",{ref:"itemRef",style:Te(e.outerStyle),class:A([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:!!e.$slots["trigger-icon"]}]),onClick:t[2]||(t[2]=(...n)=>e.onClick&&e.onClick(...n))},[c(d,{onResize:e.handleResize},{default:N(()=>[X("span",{ref:"wrapperRef",class:A(e.wrapperCls)},[e.imageUrl?(y(),S(Ie,{key:0},[e.hasError?re(e.$slots,"error",{key:0},()=>[X("div",{class:A(`${e.prefixCls}-image-icon`)},[c(i)],2)]):W("v-if",!0),!(e.hasError||!e.shouldLoad)&&!e.isLoaded?re(e.$slots,"default",{key:1},()=>[X("div",{class:A(`${e.prefixCls}-image-icon`)},[c(s)],2)]):W("v-if",!0),e.hasError||!e.shouldLoad?W("v-if",!0):(y(),S("img",{key:2,src:e.imageUrl,style:Te({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:t[0]||(t[0]=(...n)=>e.handleImgLoad&&e.handleImgLoad(...n)),onError:t[1]||(t[1]=(...n)=>e.handleImgError&&e.handleImgError(...n))},null,44,Qt))],64)):re(e.$slots,"default",{key:1})],2)]),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(y(),S("div",{key:0,class:A(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:Te(e.computedTriggerIconStyle)},[re(e.$slots,"trigger-icon")],6)):W("v-if",!0)],6)}var Ee=ze(Xt,[["render",Zt]]);const Pe=te({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:t}){const{shape:o,size:r,autoFixFontSize:f,zIndexAscend:u}=we(e),i=pe("avatar-group"),s=g(0);return dt(ot,Xe({shape:o,size:r,autoFixFontSize:f,zIndexAscend:u,total:s})),()=>{var d,n;const p=pt((n=(d=t.default)==null?void 0:d.call(t))!=null?n:[]),T=e.maxCount>0?p.slice(0,e.maxCount):p,E=e.maxCount>0?p.slice(e.maxCount):[];return s.value!==T.length&&(s.value=T.length),c("div",{class:i},[T,E.length>0&&c(Ye,e.maxPopoverTriggerProps,{default:()=>[c(Ee,{class:`${i}-max-count-avatar`,style:e.maxStyle},{default:()=>[xe("+"),E.length]})],content:()=>c("div",null,[E])})])}}}),eo=Object.assign(Ee,{Group:Pe,install:(e,t)=>{Qe(e,t);const o=Ze(t);e.component(o+Ee.name,Ee),e.component(o+Pe.name,Pe)}}),to=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],oo=e=>{const t={};return to.forEach(o=>{t[o]=e.getPropertyValue(o)}),t},no=te({name:"Textarea",components:{ResizeObserver:Ne,IconHover:ft,IconClose:vt},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:o}){const{disabled:r,error:f,modelValue:u}=we(e),i=pe("textarea"),{mergedDisabled:s,mergedError:d,eventHandlers:n}=gt({disabled:r,error:f}),p=g(),T=g(),E=g(),j=g(),P=g(e.defaultValue),h=w(()=>{var l;return(l=u.value)!=null?l:P.value}),[I,H]=mt(p);me(u,l=>{(yt(l)||ht(l))&&(P.value="")});const L=w(()=>ie(e.maxLength)&&!!e.maxLength.errorOnly),a=w(()=>ie(e.maxLength)?e.maxLength.length:e.maxLength),v=l=>{var b;return Ct(e.wordLength)?e.wordLength(l):(b=l.length)!=null?b:0},_=w(()=>v(h.value)),z=w(()=>d.value||!!(a.value&&L.value&&_.value>a.value)),x=g(!1),V=g(!1),oe=w(()=>e.allowClear&&!s.value&&h.value),K=g(!1),F=g(""),J=()=>{I(),be(()=>{p.value&&h.value!==p.value.value&&(p.value.value=h.value,H())})},O=(l,b=!0)=>{var $,k;a.value&&!L.value&&v(l)>a.value&&(l=(k=($=e.wordSlice)==null?void 0:$.call(e,l,a.value))!=null?k:l.slice(0,a.value)),P.value=l,b&&t("update:modelValue",l),J()};let C=h.value;const D=(l,b)=>{var $,k;l!==C&&(C=l,t("change",l,b),(k=($=n.value)==null?void 0:$.onChange)==null||k.call($,b))},Z=l=>{var b,$;V.value=!0,C=h.value,t("focus",l),($=(b=n.value)==null?void 0:b.onFocus)==null||$.call(b,l)},ne=l=>{var b,$;V.value=!1,t("blur",l),($=(b=n.value)==null?void 0:b.onBlur)==null||$.call(b,l),D(h.value,l)},ae=l=>{var b,$;const{value:k}=l.target;if(l.type==="compositionend"){if(K.value=!1,F.value="",a.value&&!L.value&&h.value.length>=a.value&&v(k)>a.value){J();return}t("input",k,l),O(k),($=(b=n.value)==null?void 0:b.onInput)==null||$.call(b,l)}else K.value=!0},M=l=>{var b,$;const{value:k}=l.target;if(K.value)F.value=k;else{if(a.value&&!L.value&&h.value.length>=a.value&&v(k)>a.value&&l.inputType==="insertText"){J();return}t("input",k,l),O(k),($=(b=n.value)==null?void 0:b.onInput)==null||$.call(b,l)}},Y=l=>{O(""),D("",l),t("clear",l)};me(u,l=>{l!==h.value&&O(l!=null?l:"",!1)});const B=l=>et(o,Ve),le=l=>bt(o,Ve),ee=w(()=>[`${i}-wrapper`,{[`${i}-focus`]:V.value,[`${i}-disabled`]:s.value,[`${i}-error`]:z.value,[`${i}-scroll`]:x.value}]);let _e;const m=g(0),G=g(0),he=w(()=>!ie(e.autoSize)||!e.autoSize.minRows?0:e.autoSize.minRows*m.value+G.value),Ce=w(()=>!ie(e.autoSize)||!e.autoSize.maxRows?0:e.autoSize.maxRows*m.value+G.value),fe=()=>{const l=oo(_e);m.value=Number.parseInt(l["line-height"]||0,10),G.value=Number.parseInt(l["border-width"]||0,10)*2+Number.parseInt(l["padding-top"]||0,10)+Number.parseInt(l["padding-bottom"]||0,10),j.value=l,be(()=>{var b;const $=(b=E.value)==null?void 0:b.offsetHeight;let k=$!=null?$:0,Q="hidden";he.value&&k<he.value&&(k=he.value),Ce.value&&k>Ce.value&&(k=Ce.value,Q="auto"),T.value={height:`${k}px`,resize:"none",overflow:Q}})};ye(()=>{p.value&&(_e=window.getComputedStyle(p.value),e.autoSize&&fe()),se()});const ke=()=>{e.autoSize&&E.value&&fe(),se()},$e=l=>{p.value&&l.target!==p.value&&(l.preventDefault(),p.value.focus())},se=()=>{p.value&&(p.value.scrollHeight>p.value.offsetHeight?x.value||(x.value=!0):x.value&&(x.value=!1))};return me(h,()=>{e.autoSize&&E.value&&fe(),se()}),{prefixCls:i,wrapperCls:ee,textareaRef:p,textareaStyle:T,mirrorRef:E,mirrorStyle:j,computedValue:h,showClearBtn:oe,valueLength:_,computedMaxLength:a,mergedDisabled:s,getWrapperAttrs:B,getTextareaAttrs:le,handleInput:M,handleFocus:Z,handleBlur:ne,handleComposition:ae,handleClear:Y,handleResize:ke,handleMousedown:$e}},methods:{focus(){var e;(e=this.$refs.textareaRef)==null||e.focus()},blur(){var e;(e=this.$refs.textareaRef)==null||e.blur()}}}),ao=["disabled","value","placeholder"];function lo(e,t,o,r,f,u){const i=q("resize-observer"),s=q("icon-close"),d=q("icon-hover");return y(),S("div",de(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...n)=>e.handleMousedown&&e.handleMousedown(...n))}),[e.autoSize?(y(),S("div",{key:0,ref:"mirrorRef",class:A(`${e.prefixCls}-mirror`),style:Te(e.mirrorStyle)},ce(`${e.computedValue}
`),7)):W("v-if",!0),c(i,{onResize:e.handleResize},{default:N(()=>[X("textarea",de({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...n)=>e.handleInput&&e.handleInput(...n)),onFocus:t[1]||(t[1]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onBlur:t[2]||(t[2]=(...n)=>e.handleBlur&&e.handleBlur(...n)),onCompositionstart:t[3]||(t[3]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionupdate:t[4]||(t[4]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionend:t[5]||(t[5]=(...n)=>e.handleComposition&&e.handleComposition(...n))}),null,16,ao)]),_:1},8,["onResize"]),re(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(y(),S("div",{key:1,class:A(`${e.prefixCls}-word-limit`)},ce(e.valueLength)+"/"+ce(e.computedMaxLength),3)):W("v-if",!0),e.showClearBtn?(y(),S("div",{key:2,class:A(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...n)=>e.handleClear&&e.handleClear(...n))},[c(d,null,{default:N(()=>[c(s)]),_:1})],2)):W("v-if",!0)],16)}var Oe=ze(no,[["render",lo]]);const so=Object.assign(Oe,{install:(e,t)=>{Qe(e,t);const o=Ze(t);e.component(o+Oe.name,Oe)}}),ro=te({name:"TypographyEditContent",components:{Input:xt},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const r=[`${pe("typography")}-edit-content`],f=g();function u(s){t("update:text",s),t("change",s)}function i(){t("end")}return ye(()=>{if(!f.value||!f.value.$el)return;const s=f.value.$el.querySelector("input");if(!s)return;s.focus&&s.focus();const{length:d}=s.value;s.setSelectionRange(d,d)}),{classNames:r,inputRef:f,onBlur:i,onChange:u,onEnd:i}}});function io(e,t,o,r,f,u){const i=q("Input");return y(),S("div",{class:A(e.classNames)},[c(i,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:wt(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}var uo=ze(ro,[["render",io]]);const co=te({name:"TypographyOperations",components:{Tooltip:He,IconCheckCircleFill:_t,IconCopy:kt,IconEdit:$t},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const o=pe("typography"),r=w(()=>e.forceRenderExpand||e.expandable&&e.isEllipsis),{t:f}=St();return{prefixCls:o,showExpand:r,t:f,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});function po(e,t,o,r,f,u){const i=q("IconEdit"),s=q("Tooltip"),d=q("IconCheckCircleFill"),n=q("IconCopy");return y(),S(Ie,null,[e.editable?(y(),ge(s,de({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:N(()=>[X("span",{class:A(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=Be((...p)=>e.onEditClick&&e.onEditClick(...p),["stop"]))},[c(i)],2)]),_:1},16,["content"])):W("v-if",!0),e.copyable?(y(),ge(s,Tt(de({key:1},e.copyTooltipProps)),{content:N(()=>[re(e.$slots,"copy-tooltip",{copied:e.isCopied},()=>[xe(ce(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)])]),default:N(()=>[X("span",{class:A({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=Be((...p)=>e.onCopyClick&&e.onCopyClick(...p),["stop"]))},[re(e.$slots,"copy-icon",{copied:e.isCopied},()=>[e.isCopied?(y(),ge(d,{key:0})):(y(),ge(n,{key:1}))])],2)]),_:3},16)):W("v-if",!0),e.showExpand?(y(),S("a",{key:2,class:A(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=Be((...p)=>e.onExpandClick&&e.onExpandClick(...p),["stop"]))},[re(e.$slots,"expand-node",{expanded:e.expanded},()=>[xe(ce(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)])],2)):W("v-if",!0)],64)}var Ue=ze(co,[["render",po]]);let R;function fo(e){return Array.prototype.slice.apply(e).map(o=>`${o}: ${e.getPropertyValue(o)};`).join("")}function Le(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var vo=(e,t,o,r)=>{R||(R=document.createElement("div"),document.body.appendChild(R));const{rows:f,suffix:u,ellipsisStr:i}=t,s=window.getComputedStyle(e),d=fo(s),n=Le(s.lineHeight),p=Math.round(n*f+Le(s.paddingTop)+Le(s.paddingBottom));R.setAttribute("style",d),R.setAttribute("aria-hidden","true"),R.style.height="auto",R.style.minHeight="auto",R.style.maxHeight="auto",R.style.position="fixed",R.style.left="0",R.style.top="-99999999px",R.style.zIndex="-200",R.style.whiteSpace="normal";const T=tt({render(){return c("span",null,[o])}});T.mount(R);const E=Array.prototype.slice.apply(R.childNodes[0].cloneNode(!0).childNodes);T.unmount(),R.innerHTML="";const j=document.createTextNode(`${i}${u}`);R.appendChild(j),E.forEach(H=>{R.appendChild(H)});const P=document.createTextNode(r);R.insertBefore(P,j);function h(){return R.offsetHeight<=p}if(h())return{ellipsis:!1,text:r};function I(H,L=0,a=r.length,v=0){const _=Math.floor((L+a)/2),z=r.slice(0,_);if(H.textContent=z,L>=a-1)for(let x=a;x>=L;x-=1){const V=r.slice(0,x);if(H.textContent=V,h()||!V)return}h()?I(H,_,a,_):I(H,L,_,v)}return I(P),{text:P.textContent,ellipsis:!0}};const go=async e=>{var t;if((t=navigator.clipboard)!=null&&t.writeText)try{await navigator.clipboard.writeText(e);return}catch(u){console.error(u!=null?u:new DOMException("The request is not allowed","NotAllowedError"))}const o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre",document.body.appendChild(o);const r=window.getSelection(),f=window.document.createRange();r==null||r.removeAllRanges(),f.selectNode(o),r==null||r.addRange(f);try{window.document.execCommand("copy")}catch(u){console.error(`execCommand Error: ${u}`)}r==null||r.removeAllRanges(),window.document.body.removeChild(o)};let ve;function mo(e){if(!e)return"";ve||(ve=document.createElement("div"),ve.setAttribute("aria-hidden","true"),document.body.appendChild(ve));const t=tt({render(){return c("div",null,[e])}});t.mount(ve);const o=ve.innerText;return t.unmount(),o}var yo=Object.defineProperty,ho=Object.defineProperties,Co=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,xo=Object.prototype.propertyIsEnumerable,Ge=(e,t,o)=>t in e?yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,wo=(e,t)=>{for(var o in t||(t={}))bo.call(t,o)&&Ge(e,o,t[o]);if(Ke)for(var o of Ke(t))xo.call(t,o)&&Ge(e,o,t[o]);return e},_o=(e,t)=>ho(e,Co(t));function nt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!It(e)}function ko(e){const{bold:t,mark:o,underline:r,delete:f,code:u}=e,i=[];return t&&i.push("b"),r&&i.push("u"),f&&i.push("del"),u&&i.push("code"),o&&i.push("mark"),i}function Je(e,t){const{mark:o}=e,r=ko(e),f=ie(o)&&o.color?{backgroundColor:o.color}:{};return r.reduce((u,i)=>c(i,i==="mark"?{style:f}:{},nt(u)?u:{default:()=>[u]}),t)}function $o(e){const t=!!e.showTooltip,o=ie(e.showTooltip)&&e.showTooltip.type==="popover"?Ye:He,r=ie(e.showTooltip)&&e.showTooltip.props||{};return _o(wo({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},et(e,["showTooltip"])),{showTooltip:t,TooltipComponent:o,tooltipProps:r})}var So=te({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{editing:f,defaultEditing:u,ellipsis:i,copyable:s,editable:d,copyText:n,editText:p,copyDelay:T,component:E}=we(e),j=pe("typography"),P=w(()=>[j,{[`${j}-${e.type}`]:e.type,[`${j}-disabled`]:e.disabled}]),h=g(),I=g(""),[H,L]=Et(u.value,Xe({value:f})),a=w(()=>d.value&&H.value);function v(){o("update:editing",!0),o("editStart"),L(!0)}function _(m){o("update:editText",m),o("change",m)}function z(){H.value&&(o("update:editing",!1),o("editEnd"),L(!1))}const x=g(!1);let V=null;function oe(){var m;const G=(m=n.value)!=null?m:I.value;go(G||""),x.value=!0,o("copy",G),V=setTimeout(()=>{x.value=!1},T.value)}Ae(()=>{V&&clearTimeout(V),V=null});const K=g(!1),F=g(!1),J=g(""),O=w(()=>$o(ie(i.value)&&i.value||{}));let C=null;function D(){const m=!F.value;F.value=m,o("expand",m)}function Z(m=!1){return O.value.css?c(Ue,{editable:d.value,copyable:s.value,expandable:O.value.expandable,isCopied:x.value,isEllipsis:le.value,expanded:F.value,forceRenderExpand:m||F.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:v,onCopy:oe,onExpand:D},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):c(Ue,{editable:d.value,copyable:s.value,expandable:O.value.expandable,isCopied:x.value,isEllipsis:K.value,expanded:F.value,forceRenderExpand:m,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:v,onCopy:oe,onExpand:D},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function ne(){if(!h.value)return;const{ellipsis:m,text:G}=vo(h.value,O.value,Z(!!O.value.expandable),I.value);K.value!==m&&(K.value=m,O.value.css||o("ellipsis",m)),J.value!==G&&(J.value=G||"")}function ae(){i.value&&!F.value&&(je(C),C=zt(()=>{ne()}))}Ae(()=>{je(C)}),me(()=>O.value.rows,()=>{ae()}),me(i,m=>{m?ae():K.value=!1});let M=[];const Y=()=>{if(i.value||s.value||d.value){const m=mo(M);m!==I.value&&(I.value=m,ae())}};ye(Y),Fe(Y);const B=g(),le=g(!1),ee=()=>{if(h.value&&B.value){const m=B.value.offsetHeight>h.value.offsetHeight;m!==le.value&&(le.value=m,o("ellipsis",m))}},_e=w(()=>F.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":O.value.rows,"-webkit-box-orient":"vertical"});return()=>{var m,G;if(M=((m=t.default)==null?void 0:m.call(t))||[],a.value){const k=(G=p.value)!=null?G:I.value;return c(uo,{text:k,onChange:Q=>{Q!==k&&_(Q)},onEnd:z},null)}const{suffix:he,ellipsisStr:Ce,showTooltip:fe,tooltipProps:ke,TooltipComponent:$e}=O.value,se=K.value&&!F.value,l=se&&!fe?{title:I.value}:{},b=E.value;if(O.value.css){const k=Je(e,M),Q=c(b,de({class:P.value,ref:h,style:_e.value},l,r),{default:()=>[c("span",{ref:B},[k])]});return le.value?c($e,de(ke,{onResize:()=>ee()}),{default:()=>[Q],content:()=>I.value}):c(Ne,{onResize:()=>{ee()}},nt(Q)?Q:{default:()=>[Q]})}const $=Je(e,se?J.value:M);return c(Ne,{onResize:()=>ae()},{default:()=>[c(b,de({class:P.value,ref:h},l,r),{default:()=>[se&&fe?c($e,ke,{default:()=>[c("span",null,[$])],content:()=>I.value}):$,se?Ce:null,he,Z()]})]})}}}),To=te({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:o}=we(e),r=pe("typography"),f=w(()=>t!=null&&t.value?"blockquote":"div"),u=w(()=>[{[`${r}-spacing-close`]:(o==null?void 0:o.value)==="close"}]);return{component:f,classNames:u}},render(){const{component:e,classNames:t}=this;return c(So,de({class:t},this.$attrs,{component:e}),this.$slots)}});const Eo={key:0,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},Io={key:0},zo=["innerHTML"],Bo=["textContent"],Ro=["textContent"],Po=te({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,o=g(),r=new Wt({linkify:!0,highlight(d,n){if(!!(n&&Se.getLanguage(n))){const T=n!=null?n:"";return s(Se.highlight(d,{language:T}).value,T)}return s(Se.highlightAuto(d).value,"")}});r.use(Dt,{attrs:{target:"_blank",rel:"noopener"}}),r.use(Ut,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const f=w(()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}]),u=d=>d.replace(/\n+$/g,""),i=w(()=>{var n;const d=u((n=t.text)!=null?n:"");return!t.asRawText&&!t.inversion?r.render(d):d});function s(d,n){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${n}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${n}">${d}</code></pre>`}return Fe(()=>{be(()=>{o.value&&Se.highlightBlock(o.value)})}),(d,n)=>(y(),S("div",{class:A(U(f))},[e.loading?(y(),S("span",Eo)):(y(),S("div",{key:1,ref_key:"textRef",ref:o,class:"leading-relaxed break-words"},[e.inversion?(y(),S("div",{key:1,class:"whitespace-pre-wrap",textContent:ce(U(i))},null,8,Ro)):(y(),S("div",Io,[e.asRawText?(y(),S("div",{key:1,class:"whitespace-pre-wrap",textContent:ce(U(i))},null,8,Bo)):(y(),S("div",{key:0,class:"markdown-body",innerHTML:U(i)},null,8,zo))]))],512))],2))}});const Oo=Bt(Po,[["__scopeId","data-v-cf02b953"]]);const Lo="/assets/openai-white-1b79b841.svg";function at(e){const t={origin:!0,...e};let o;t.origin?o=document.createElement("textarea"):o=document.createElement("input"),o.setAttribute("readonly","readonly"),o.value=t.text,document.body.appendChild(o),o.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(o)}function No(){function e(){document.querySelectorAll(".code-block-wrapper").forEach(o=>{const r=o.querySelector(".code-block-header__copy"),f=o.querySelector(".code-block-body");r&&f&&r.addEventListener("click",()=>{var u,i,s;(u=navigator.clipboard)!=null&&u.writeText?(navigator.clipboard.writeText((i=f.textContent)!=null?i:""),ue.clear(),ue.success("复制成功")):(at({text:(s=f.textContent)!=null?s:"",origin:!0}),ue.clear(),ue.success("复制成功"))})})}ye(()=>e()),Fe(()=>e())}const Ao=e=>/^[\s\n\r]*$/.test(e),Ho={key:0,class:"flex-1"},Fo={class:"chat-wrapper"},Vo=["src"],jo={key:0,class:"text-info"},Mo={key:0,class:"message-item__actions"},qo={class:"chat-footer"},Uo=te({__name:"ChatView",setup(e){No();const t=Rt(),o=Pt(),r=w(()=>t.session),{isMobileScreen:f}=Ot(),u=g(!1),i={user:Mt,assistant:Lo},s=g(),d=g("新的聊天");Lt(()=>{var a;d.value=((a=t.session)==null?void 0:a.topic)||"新的聊天"});const n=g(""),p=a=>{u.value=!1,t.messageRetryAction(a,()=>{var v,_,z,x;u.value||(x=s.value)==null||x.scrollTop(((z=(_=(v=s.value)==null?void 0:v.containerRef)==null?void 0:_.scrollHeight)!=null?z:0)-200)},v=>{T.value=v})},T=g(),E=()=>{if(Ao(n.value)){ue.clear(),ue.error("请输入消息内容");return}u.value=!1,t.sendMessageAction(n.value,()=>{var a,v,_,z;u.value||(z=s.value)==null||z.scrollTop(((_=(v=(a=s.value)==null?void 0:a.containerRef)==null?void 0:v.scrollHeight)!=null?_:0)-200)},a=>{T.value=a}),n.value=""},j=a=>{a.deltaY<10&&(u.value=!0)};ye(()=>{be(()=>{var a,v,_,z,x;(z=s.value)==null||z.scrollTop(((_=(v=(a=s.value)==null?void 0:a.containerRef)==null?void 0:v.scrollHeight)!=null?_:0)-200),(x=s.value)==null||x.$el.querySelector(".arco-scrollbar-container").addEventListener("wheel",j)})});const P=a=>{var v,_,z;(((v=a==null?void 0:a.target)==null?void 0:v.scrollTop)||0)+(((_=a==null?void 0:a.target)==null?void 0:_.offsetHeight)||0)>=(((z=a==null?void 0:a.target)==null?void 0:z.scrollHeight)||0)-70&&(u.value=!1)};Ae(()=>{var a;(a=s.value)==null||a.$el.querySelector(".arco-scrollbar-container").removeEventListener("wheel",j)});const h=()=>{t.handleChangeSessionTopicAction(d.value)},I=a=>{f.value?a.key==="Enter"&&(a.preventDefault(),E()):a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),E())},H=a=>{at({text:a}),ue.clear(),ue.success("复制成功")},L=w(()=>`请输入您的消息，${o.submitKey} 发送，${o.submitKey===Re.Enter?Re.ShiftEnter:Re.Enter} 换行`);return(a,v)=>{const _=To,z=At,x=Ht,V=eo,oe=qt,K=q("icon-copy"),F=Ft,J=He,O=q("icon-sync"),C=Oo,D=Vt,Z=q("icon-record-stop"),ne=so,ae=jt;return y(),S(Ie,null,[c(z,{class:"h-14 px-4 flex items-center bg-white dark:bg-dark"},{default:N(()=>[X("div",{class:A(["flex flex-col editable-title__wrapper",{"is-mobile":U(f)}])},[c(_,{class:"m-0",editable:"",editText:U(d),"onUpdate:editText":v[0]||(v[0]=M=>Me(d)?d.value=M:null),onEditEnd:h},{default:N(()=>[xe(ce(U(d)),1)]),_:1},8,["editText"])],2),U(f)?W("",!0):(y(),S("i",Ho))]),_:1}),c(x,{class:"m-0"}),c(ae,{class:"flex flex-col flex-1 overflow-hidden"},{default:N(()=>[X("main",Fo,[c(D,{ref_key:"scrollbarRef",ref:s,onScroll:P,"outer-style":"flex: 1; overflow: hidden; ",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2 pb-20"},{default:N(()=>{var M,Y;return[(y(!0),S(Ie,null,Nt((Y=(M=U(r))==null?void 0:M.messages)!=null?Y:[],(B,le)=>(y(),S("section",{key:B.id,class:A(["message-item",[B.role==="assistant"?"is-reply":"is-request"]])},[c(oe,{loading:B.streaming&&B.role==="assistant"},{default:N(()=>[c(V,{size:32,class:A(B.role==="assistant"?"bg-primary p-2":"bg-success")},{default:N(()=>{var ee;return[X("img",{src:(ee=i[B.role])!=null?ee:""},null,8,Vo)]}),_:2},1032,["class"])]),_:2},1032,["loading"]),B.streaming&&B.role==="assistant"?(y(),S("small",jo," 正在输入... ")):W("",!0),X("section",{class:A(["message-item__content",{"is-user":B.role==="user"},{"is-assistant":B.role==="assistant"}])},[B.role==="assistant"?(y(),S("div",Mo,[c(J,{"content-class":"text-xs",content:"复制",position:"top"},{default:N(()=>[c(F,{onClick:ee=>H(B.content),size:"mini",shape:"circle",type:"text"},{default:N(()=>[c(K,{class:"text-base"})]),_:2},1032,["onClick"])]),_:2},1024),c(J,{"content-class":"text-xs",content:"重试",position:"top"},{default:N(()=>[c(F,{onClick:ee=>p(le),size:"mini",shape:"circle",type:"text"},{default:N(()=>[c(O,{class:"text-base"})]),_:2},1032,["onClick"])]),_:2},1024)])):W("",!0),(y(),ge(C,{key:B.content,text:B.content,inversion:B.role!=="assistant"},null,8,["text","inversion"]))],2)],2))),128))]}),_:1},512),c(x,{class:"m-0"}),X("footer",qo,[U(t).fetching?(y(),ge(F,{key:0,onClick:v[1]||(v[1]=M=>{var Y;return(Y=U(T))==null?void 0:Y.abort()}),shape:"round",status:"danger",class:"stop-receiving"},{default:N(()=>[c(Z,{class:"text-lg mr-2"}),xe(" 停止 ")]),_:1})):W("",!0),c(ne,{modelValue:U(n),"onUpdate:modelValue":v[2]||(v[2]=M=>Me(n)?n.value=M:null),onKeypress:I,class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:4,maxRows:6},placeholder:U(L)},null,8,["modelValue","placeholder"])])])]),_:1})],64)}}});export{Uo as default};
