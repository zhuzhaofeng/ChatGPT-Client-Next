import{g as oe,R as st,I as rt,h as it,t as we,i as ve,j as ut,r as m,k as _,u as ct,l as dt,m as Ce,n as pe,q as ze,s as fe,v as q,o as h,x as $,b as d,w as A,a as J,y as N,F as Ie,z as ie,A as W,C as Te,D as pt,E as Ye,G as ft,P as Qe,d as he,H as Ze,J as et,K as Ne,L as vt,M as gt,N as mt,O as yt,Q as ht,T as Ct,U as ue,V as bt,W as tt,X as Ve,Y as xt,Z as te,$ as de,a0 as wt,a1 as _t,a2 as He,a3 as kt,a4 as $t,a5 as St,a6 as Tt,c as ye,a7 as Be,a8 as Et,a9 as ot,aa as It,ab as Ae,ac as je,ad as Fe,ae as zt,af as Bt,ag as D,_ as Rt,ah as ce,ai as Pt,aj as Ot,ak as Lt,al as Nt,am as At,an as Me,ao as Ht,ap as Ft,aq as Vt,B as jt,S as Mt,ar as Dt,as as qt,at as Wt,au as Re,av as Ut}from"./index-01bb4784.js";import{M as Kt,H as Se,m as Gt,a as Jt}from"./index-b7903ef7.js";const nt=Symbol("ArcoAvatarGroup");var Xt=Object.defineProperty,De=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable,qe=(e,t,o)=>t in e?Xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,We=(e,t)=>{for(var o in t||(t={}))Yt.call(t,o)&&qe(e,o,t[o]);if(De)for(var o of De(t))Qt.call(t,o)&&qe(e,o,t[o]);return e};const Zt=oe({name:"Avatar",components:{ResizeObserver:st,IconImageClose:rt,IconLoading:it},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{shape:v,size:c,autoFixFontSize:i,triggerType:l,triggerIconStyle:p}=we(e),n=ve("avatar"),f=ut(nt,void 0),E=m(),I=m(),U=_(()=>{var b;return(b=f==null?void 0:f.shape)!=null?b:v.value}),P=_(()=>{var b;return(b=f==null?void 0:f.size)!=null?b:c.value}),C=_(()=>{var b;return(b=f==null?void 0:f.autoFixFontSize)!=null?b:i.value}),z=m(!1),H=m(!1),s=m(!0),u=m(!1),g=f?ct({itemRef:E,selector:`.${n}`}).computedIndex:m(-1),w=_(()=>{var b;const K=dt(P.value)?{width:`${P.value}px`,height:`${P.value}px`,fontSize:`${P.value/2}px`}:{};return f&&(K.zIndex=f.zIndexAscend?g.value+1:f.total-g.value,K.marginLeft=g.value!==0?`-${((b=P.value)!=null?b:40)/4}px`:"0"),K}),O=eo({triggerIconStyle:p==null?void 0:p.value,inlineStyle:r.style,triggerType:l.value}),B=()=>{!z.value&&!e.imageUrl&&fe(()=>{var b;if(!I.value||!E.value)return;const K=I.value.clientWidth,Z=(b=P.value)!=null?b:E.value.offsetWidth,ae=Z/(K+8);Z&&ae<1&&(I.value.style.transform=`scale(${ae}) translateX(-50%)`),s.value=!0})};Ce(()=>{var b;(b=I.value)!=null&&b.firstElementChild&&["IMG","PICTURE"].includes(I.value.firstElementChild.tagName)&&(z.value=!0),C.value&&B()}),pe(c,()=>{C.value&&B()});const F=_(()=>[n,`${n}-${U.value}`]),ne=_(()=>z.value||e.imageUrl?`${n}-image`:`${n}-text`);return{prefixCls:n,itemRef:E,cls:F,outerStyle:w,wrapperRef:I,wrapperCls:ne,computedTriggerIconStyle:O,isImage:z,shouldLoad:s,isLoaded:u,hasError:H,onClick:b=>{o("click",b)},handleResize:()=>{C.value&&B()},handleImgLoad:()=>{u.value=!0,o("load")},handleImgError:()=>{H.value=!0,o("error")}}}}),eo=({triggerType:e,inlineStyle:t={},triggerIconStyle:o={}})=>{let r={};return e==="button"&&(!o||o&&!o.color)&&t&&t.backgroundColor&&(r={color:t.backgroundColor}),We(We({},o),r)},to=["src"];function oo(e,t,o,r,v,c){const i=q("IconImageClose"),l=q("IconLoading"),p=q("resize-observer");return h(),$("div",{ref:"itemRef",style:Te(e.outerStyle),class:N([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:!!e.$slots["trigger-icon"]}]),onClick:t[2]||(t[2]=(...n)=>e.onClick&&e.onClick(...n))},[d(p,{onResize:e.handleResize},{default:A(()=>[J("span",{ref:"wrapperRef",class:N(e.wrapperCls)},[e.imageUrl?(h(),$(Ie,{key:0},[e.hasError?ie(e.$slots,"error",{key:0},()=>[J("div",{class:N(`${e.prefixCls}-image-icon`)},[d(i)],2)]):W("v-if",!0),!(e.hasError||!e.shouldLoad)&&!e.isLoaded?ie(e.$slots,"default",{key:1},()=>[J("div",{class:N(`${e.prefixCls}-image-icon`)},[d(l)],2)]):W("v-if",!0),e.hasError||!e.shouldLoad?W("v-if",!0):(h(),$("img",{key:2,src:e.imageUrl,style:Te({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:t[0]||(t[0]=(...n)=>e.handleImgLoad&&e.handleImgLoad(...n)),onError:t[1]||(t[1]=(...n)=>e.handleImgError&&e.handleImgError(...n))},null,44,to))],64)):ie(e.$slots,"default",{key:1})],2)]),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(h(),$("div",{key:0,class:N(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:Te(e.computedTriggerIconStyle)},[ie(e.$slots,"trigger-icon")],6)):W("v-if",!0)],6)}var Ee=ze(Zt,[["render",oo]]);const Pe=oe({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:t}){const{shape:o,size:r,autoFixFontSize:v,zIndexAscend:c}=we(e),i=ve("avatar-group"),l=m(0);return pt(nt,Ye({shape:o,size:r,autoFixFontSize:v,zIndexAscend:c,total:l})),()=>{var p,n;const f=ft((n=(p=t.default)==null?void 0:p.call(t))!=null?n:[]),E=e.maxCount>0?f.slice(0,e.maxCount):f,I=e.maxCount>0?f.slice(e.maxCount):[];return l.value!==E.length&&(l.value=E.length),d("div",{class:i},[E,I.length>0&&d(Qe,e.maxPopoverTriggerProps,{default:()=>[d(Ee,{class:`${i}-max-count-avatar`,style:e.maxStyle},{default:()=>[he("+"),I.length]})],content:()=>d("div",null,[I])})])}}}),no=Object.assign(Ee,{Group:Pe,install:(e,t)=>{Ze(e,t);const o=et(t);e.component(o+Ee.name,Ee),e.component(o+Pe.name,Pe)}}),ao=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],lo=e=>{const t={};return ao.forEach(o=>{t[o]=e.getPropertyValue(o)}),t},so=oe({name:"Textarea",components:{ResizeObserver:Ne,IconHover:vt,IconClose:gt},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:o}){const{disabled:r,error:v,modelValue:c}=we(e),i=ve("textarea"),{mergedDisabled:l,mergedError:p,eventHandlers:n}=mt({disabled:r,error:v}),f=m(),E=m(),I=m(),U=m(),P=m(e.defaultValue),C=_(()=>{var a;return(a=c.value)!=null?a:P.value}),[z,H]=yt(f);pe(c,a=>{(ht(a)||Ct(a))&&(P.value="")});const s=_(()=>ue(e.maxLength)&&!!e.maxLength.errorOnly),u=_(()=>ue(e.maxLength)?e.maxLength.length:e.maxLength),g=a=>{var x;return bt(e.wordLength)?e.wordLength(a):(x=a.length)!=null?x:0},w=_(()=>g(C.value)),O=_(()=>p.value||!!(u.value&&s.value&&w.value>u.value)),B=m(!1),F=m(!1),ne=_(()=>e.allowClear&&!l.value&&C.value),j=m(!1),V=m(""),X=()=>{z(),fe(()=>{f.value&&C.value!==f.value.value&&(f.value.value=C.value,H())})},L=(a,x=!0)=>{var T,k;u.value&&!s.value&&g(a)>u.value&&(a=(k=(T=e.wordSlice)==null?void 0:T.call(e,a,u.value))!=null?k:a.slice(0,u.value)),P.value=a,x&&t("update:modelValue",a),X()};let b=C.value;const K=(a,x)=>{var T,k;a!==b&&(b=a,t("change",a,x),(k=(T=n.value)==null?void 0:T.onChange)==null||k.call(T,x))},Z=a=>{var x,T;F.value=!0,b=C.value,t("focus",a),(T=(x=n.value)==null?void 0:x.onFocus)==null||T.call(x,a)},ae=a=>{var x,T;F.value=!1,t("blur",a),(T=(x=n.value)==null?void 0:x.onBlur)==null||T.call(x,a),K(C.value,a)},le=a=>{var x,T;const{value:k}=a.target;if(a.type==="compositionend"){if(j.value=!1,V.value="",u.value&&!s.value&&C.value.length>=u.value&&g(k)>u.value){X();return}t("input",k,a),L(k),(T=(x=n.value)==null?void 0:x.onInput)==null||T.call(x,a)}else j.value=!0},M=a=>{var x,T;const{value:k}=a.target;if(j.value)V.value=k;else{if(u.value&&!s.value&&C.value.length>=u.value&&g(k)>u.value&&a.inputType==="insertText"){X();return}t("input",k,a),L(k),(T=(x=n.value)==null?void 0:x.onInput)==null||T.call(x,a)}},Y=a=>{L(""),K("",a),t("clear",a)};pe(c,a=>{a!==C.value&&L(a!=null?a:"",!1)});const S=a=>tt(o,Ve),se=a=>xt(o,Ve),ee=_(()=>[`${i}-wrapper`,{[`${i}-focus`]:F.value,[`${i}-disabled`]:l.value,[`${i}-error`]:O.value,[`${i}-scroll`]:B.value}]);let _e;const y=m(0),G=m(0),be=_(()=>!ue(e.autoSize)||!e.autoSize.minRows?0:e.autoSize.minRows*y.value+G.value),xe=_(()=>!ue(e.autoSize)||!e.autoSize.maxRows?0:e.autoSize.maxRows*y.value+G.value),ge=()=>{const a=lo(_e);y.value=Number.parseInt(a["line-height"]||0,10),G.value=Number.parseInt(a["border-width"]||0,10)*2+Number.parseInt(a["padding-top"]||0,10)+Number.parseInt(a["padding-bottom"]||0,10),U.value=a,fe(()=>{var x;const T=(x=I.value)==null?void 0:x.offsetHeight;let k=T!=null?T:0,Q="hidden";be.value&&k<be.value&&(k=be.value),xe.value&&k>xe.value&&(k=xe.value,Q="auto"),E.value={height:`${k}px`,resize:"none",overflow:Q}})};Ce(()=>{f.value&&(_e=window.getComputedStyle(f.value),e.autoSize&&ge()),re()});const ke=()=>{e.autoSize&&I.value&&ge(),re()},$e=a=>{f.value&&a.target!==f.value&&(a.preventDefault(),f.value.focus())},re=()=>{f.value&&(f.value.scrollHeight>f.value.offsetHeight?B.value||(B.value=!0):B.value&&(B.value=!1))};return pe(C,()=>{e.autoSize&&I.value&&ge(),re()}),{prefixCls:i,wrapperCls:ee,textareaRef:f,textareaStyle:E,mirrorRef:I,mirrorStyle:U,computedValue:C,showClearBtn:ne,valueLength:w,computedMaxLength:u,mergedDisabled:l,getWrapperAttrs:S,getTextareaAttrs:se,handleInput:M,handleFocus:Z,handleBlur:ae,handleComposition:le,handleClear:Y,handleResize:ke,handleMousedown:$e}},methods:{focus(){var e;(e=this.$refs.textareaRef)==null||e.focus()},blur(){var e;(e=this.$refs.textareaRef)==null||e.blur()}}}),ro=["disabled","value","placeholder"];function io(e,t,o,r,v,c){const i=q("resize-observer"),l=q("icon-close"),p=q("icon-hover");return h(),$("div",de(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...n)=>e.handleMousedown&&e.handleMousedown(...n))}),[e.autoSize?(h(),$("div",{key:0,ref:"mirrorRef",class:N(`${e.prefixCls}-mirror`),style:Te(e.mirrorStyle)},te(`${e.computedValue}
`),7)):W("v-if",!0),d(i,{onResize:e.handleResize},{default:A(()=>[J("textarea",de({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...n)=>e.handleInput&&e.handleInput(...n)),onFocus:t[1]||(t[1]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onBlur:t[2]||(t[2]=(...n)=>e.handleBlur&&e.handleBlur(...n)),onCompositionstart:t[3]||(t[3]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionupdate:t[4]||(t[4]=(...n)=>e.handleComposition&&e.handleComposition(...n)),onCompositionend:t[5]||(t[5]=(...n)=>e.handleComposition&&e.handleComposition(...n))}),null,16,ro)]),_:1},8,["onResize"]),ie(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(h(),$("div",{key:1,class:N(`${e.prefixCls}-word-limit`)},te(e.valueLength)+"/"+te(e.computedMaxLength),3)):W("v-if",!0),e.showClearBtn?(h(),$("div",{key:2,class:N(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...n)=>e.handleClear&&e.handleClear(...n))},[d(p,null,{default:A(()=>[d(l)]),_:1})],2)):W("v-if",!0)],16)}var Oe=ze(so,[["render",io]]);const uo=Object.assign(Oe,{install:(e,t)=>{Ze(e,t);const o=et(t);e.component(o+Oe.name,Oe)}}),co=oe({name:"TypographyEditContent",components:{Input:wt},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const r=[`${ve("typography")}-edit-content`],v=m();function c(l){t("update:text",l),t("change",l)}function i(){t("end")}return Ce(()=>{if(!v.value||!v.value.$el)return;const l=v.value.$el.querySelector("input");if(!l)return;l.focus&&l.focus();const{length:p}=l.value;l.setSelectionRange(p,p)}),{classNames:r,inputRef:v,onBlur:i,onChange:c,onEnd:i}}});function po(e,t,o,r,v,c){const i=q("Input");return h(),$("div",{class:N(e.classNames)},[d(i,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:_t(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}var fo=ze(co,[["render",po]]);const vo=oe({name:"TypographyOperations",components:{Tooltip:He,IconCheckCircleFill:kt,IconCopy:$t,IconEdit:St},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const o=ve("typography"),r=_(()=>e.forceRenderExpand||e.expandable&&e.isEllipsis),{t:v}=Tt();return{prefixCls:o,showExpand:r,t:v,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});function go(e,t,o,r,v,c){const i=q("IconEdit"),l=q("Tooltip"),p=q("IconCheckCircleFill"),n=q("IconCopy");return h(),$(Ie,null,[e.editable?(h(),ye(l,de({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:A(()=>[J("span",{class:N(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=Be((...f)=>e.onEditClick&&e.onEditClick(...f),["stop"]))},[d(i)],2)]),_:1},16,["content"])):W("v-if",!0),e.copyable?(h(),ye(l,Et(de({key:1},e.copyTooltipProps)),{content:A(()=>[ie(e.$slots,"copy-tooltip",{copied:e.isCopied},()=>[he(te(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)])]),default:A(()=>[J("span",{class:N({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=Be((...f)=>e.onCopyClick&&e.onCopyClick(...f),["stop"]))},[ie(e.$slots,"copy-icon",{copied:e.isCopied},()=>[e.isCopied?(h(),ye(p,{key:0})):(h(),ye(n,{key:1}))])],2)]),_:3},16)):W("v-if",!0),e.showExpand?(h(),$("a",{key:2,class:N(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=Be((...f)=>e.onExpandClick&&e.onExpandClick(...f),["stop"]))},[ie(e.$slots,"expand-node",{expanded:e.expanded},()=>[he(te(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)])],2)):W("v-if",!0)],64)}var Ue=ze(vo,[["render",go]]);let R;function mo(e){return Array.prototype.slice.apply(e).map(o=>`${o}: ${e.getPropertyValue(o)};`).join("")}function Le(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var yo=(e,t,o,r)=>{R||(R=document.createElement("div"),document.body.appendChild(R));const{rows:v,suffix:c,ellipsisStr:i}=t,l=window.getComputedStyle(e),p=mo(l),n=Le(l.lineHeight),f=Math.round(n*v+Le(l.paddingTop)+Le(l.paddingBottom));R.setAttribute("style",p),R.setAttribute("aria-hidden","true"),R.style.height="auto",R.style.minHeight="auto",R.style.maxHeight="auto",R.style.position="fixed",R.style.left="0",R.style.top="-99999999px",R.style.zIndex="-200",R.style.whiteSpace="normal";const E=ot({render(){return d("span",null,[o])}});E.mount(R);const I=Array.prototype.slice.apply(R.childNodes[0].cloneNode(!0).childNodes);E.unmount(),R.innerHTML="";const U=document.createTextNode(`${i}${c}`);R.appendChild(U),I.forEach(H=>{R.appendChild(H)});const P=document.createTextNode(r);R.insertBefore(P,U);function C(){return R.offsetHeight<=f}if(C())return{ellipsis:!1,text:r};function z(H,s=0,u=r.length,g=0){const w=Math.floor((s+u)/2),O=r.slice(0,w);if(H.textContent=O,s>=u-1)for(let B=u;B>=s;B-=1){const F=r.slice(0,B);if(H.textContent=F,C()||!F)return}C()?z(H,w,u,w):z(H,s,w,g)}return z(P),{text:P.textContent,ellipsis:!0}};const ho=async e=>{var t;if((t=navigator.clipboard)!=null&&t.writeText)try{await navigator.clipboard.writeText(e);return}catch(c){console.error(c!=null?c:new DOMException("The request is not allowed","NotAllowedError"))}const o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre",document.body.appendChild(o);const r=window.getSelection(),v=window.document.createRange();r==null||r.removeAllRanges(),v.selectNode(o),r==null||r.addRange(v);try{window.document.execCommand("copy")}catch(c){console.error(`execCommand Error: ${c}`)}r==null||r.removeAllRanges(),window.document.body.removeChild(o)};let me;function Co(e){if(!e)return"";me||(me=document.createElement("div"),me.setAttribute("aria-hidden","true"),document.body.appendChild(me));const t=ot({render(){return d("div",null,[e])}});t.mount(me);const o=me.innerText;return t.unmount(),o}var bo=Object.defineProperty,xo=Object.defineProperties,wo=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,Ge=(e,t,o)=>t in e?bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,$o=(e,t)=>{for(var o in t||(t={}))_o.call(t,o)&&Ge(e,o,t[o]);if(Ke)for(var o of Ke(t))ko.call(t,o)&&Ge(e,o,t[o]);return e},So=(e,t)=>xo(e,wo(t));function at(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!zt(e)}function To(e){const{bold:t,mark:o,underline:r,delete:v,code:c}=e,i=[];return t&&i.push("b"),r&&i.push("u"),v&&i.push("del"),c&&i.push("code"),o&&i.push("mark"),i}function Je(e,t){const{mark:o}=e,r=To(e),v=ue(o)&&o.color?{backgroundColor:o.color}:{};return r.reduce((c,i)=>d(i,i==="mark"?{style:v}:{},at(c)?c:{default:()=>[c]}),t)}function Eo(e){const t=!!e.showTooltip,o=ue(e.showTooltip)&&e.showTooltip.type==="popover"?Qe:He,r=ue(e.showTooltip)&&e.showTooltip.props||{};return So($o({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},tt(e,["showTooltip"])),{showTooltip:t,TooltipComponent:o,tooltipProps:r})}var Io=oe({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{editing:v,defaultEditing:c,ellipsis:i,copyable:l,editable:p,copyText:n,editText:f,copyDelay:E,component:I}=we(e),U=ve("typography"),P=_(()=>[U,{[`${U}-${e.type}`]:e.type,[`${U}-disabled`]:e.disabled}]),C=m(),z=m(""),[H,s]=It(c.value,Ye({value:v})),u=_(()=>p.value&&H.value);function g(){o("update:editing",!0),o("editStart"),s(!0)}function w(y){o("update:editText",y),o("change",y)}function O(){H.value&&(o("update:editing",!1),o("editEnd"),s(!1))}const B=m(!1);let F=null;function ne(){var y;const G=(y=n.value)!=null?y:z.value;ho(G||""),B.value=!0,o("copy",G),F=setTimeout(()=>{B.value=!1},E.value)}Ae(()=>{F&&clearTimeout(F),F=null});const j=m(!1),V=m(!1),X=m(""),L=_(()=>Eo(ue(i.value)&&i.value||{}));let b=null;function K(){const y=!V.value;V.value=y,o("expand",y)}function Z(y=!1){return L.value.css?d(Ue,{editable:p.value,copyable:l.value,expandable:L.value.expandable,isCopied:B.value,isEllipsis:se.value,expanded:V.value,forceRenderExpand:y||V.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:g,onCopy:ne,onExpand:K},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):d(Ue,{editable:p.value,copyable:l.value,expandable:L.value.expandable,isCopied:B.value,isEllipsis:j.value,expanded:V.value,forceRenderExpand:y,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:g,onCopy:ne,onExpand:K},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function ae(){if(!C.value)return;const{ellipsis:y,text:G}=yo(C.value,L.value,Z(!!L.value.expandable),z.value);j.value!==y&&(j.value=y,L.value.css||o("ellipsis",y)),X.value!==G&&(X.value=G||"")}function le(){i.value&&!V.value&&(je(b),b=Bt(()=>{ae()}))}Ae(()=>{je(b)}),pe(()=>L.value.rows,()=>{le()}),pe(i,y=>{y?le():j.value=!1});let M=[];const Y=()=>{if(i.value||l.value||p.value){const y=Co(M);y!==z.value&&(z.value=y,le())}};Ce(Y),Fe(Y);const S=m(),se=m(!1),ee=()=>{if(C.value&&S.value){const y=S.value.offsetHeight>C.value.offsetHeight;y!==se.value&&(se.value=y,o("ellipsis",y))}},_e=_(()=>V.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":L.value.rows,"-webkit-box-orient":"vertical"});return()=>{var y,G;if(M=((y=t.default)==null?void 0:y.call(t))||[],u.value){const k=(G=f.value)!=null?G:z.value;return d(fo,{text:k,onChange:Q=>{Q!==k&&w(Q)},onEnd:O},null)}const{suffix:be,ellipsisStr:xe,showTooltip:ge,tooltipProps:ke,TooltipComponent:$e}=L.value,re=j.value&&!V.value,a=re&&!ge?{title:z.value}:{},x=I.value;if(L.value.css){const k=Je(e,M),Q=d(x,de({class:P.value,ref:C,style:_e.value},a,r),{default:()=>[d("span",{ref:S},[k])]});return se.value?d($e,de(ke,{onResize:()=>ee()}),{default:()=>[Q],content:()=>z.value}):d(Ne,{onResize:()=>{ee()}},at(Q)?Q:{default:()=>[Q]})}const T=Je(e,re?X.value:M);return d(Ne,{onResize:()=>le()},{default:()=>[d(x,de({class:P.value,ref:C},a,r),{default:()=>[re&&ge?d($e,ke,{default:()=>[d("span",null,[T])],content:()=>z.value}):T,re?xe:null,be,Z()]})]})}}}),zo=oe({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:o}=we(e),r=ve("typography"),v=_(()=>t!=null&&t.value?"blockquote":"div"),c=_(()=>[{[`${r}-spacing-close`]:(o==null?void 0:o.value)==="close"}]);return{component:v,classNames:c}},render(){const{component:e,classNames:t}=this;return d(Io,de({class:t},this.$attrs,{component:e}),this.$slots)}});const Bo={key:0,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},Ro={key:0},Po=["innerHTML"],Oo=["textContent"],Lo=["textContent"],No=oe({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,o=m(),r=new Kt({linkify:!0,highlight(p,n){if(!!(n&&Se.getLanguage(n))){const E=n!=null?n:"";return l(Se.highlight(p,{language:E}).value,E)}return l(Se.highlightAuto(p).value,"")}});r.use(Gt,{attrs:{target:"_blank",rel:"noopener"}}),r.use(Jt,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const v=_(()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}]),c=p=>p.replace(/\n+$/g,""),i=_(()=>{var n;const p=c((n=t.text)!=null?n:"");return!t.asRawText&&!t.inversion?r.render(p):p});function l(p,n){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${n}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${n}">${p}</code></pre>`}return Fe(()=>{fe(()=>{o.value&&Se.highlightBlock(o.value)})}),(p,n)=>(h(),$("div",{class:N(D(v))},[e.loading?(h(),$("span",Bo)):(h(),$("div",{key:1,ref_key:"textRef",ref:o,class:"leading-relaxed break-words"},[e.inversion?(h(),$("div",{key:1,class:"whitespace-pre-wrap",textContent:te(D(i))},null,8,Lo)):(h(),$("div",Ro,[e.asRawText?(h(),$("div",{key:1,class:"whitespace-pre-wrap",textContent:te(D(i))},null,8,Oo)):(h(),$("div",{key:0,class:"markdown-body",innerHTML:D(i)},null,8,Po))]))],512))],2))}});const Ao=Rt(No,[["__scopeId","data-v-cf02b953"]]);const Ho="/assets/openai-white-1b79b841.svg";function lt(e){const t={origin:!0,...e};let o;t.origin?o=document.createElement("textarea"):o=document.createElement("input"),o.setAttribute("readonly","readonly"),o.value=t.text,document.body.appendChild(o),o.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(o)}function Xe(){function e(){document.querySelectorAll(".code-block-wrapper").forEach(o=>{const r=o.querySelector(".code-block-header__copy"),v=o.querySelector(".code-block-body");r&&v&&r.addEventListener("click",()=>{var c,i,l;(c=navigator.clipboard)!=null&&c.writeText?(navigator.clipboard.writeText((i=v.textContent)!=null?i:""),ce.clear(),ce.success("复制成功")):(lt({text:(l=v.textContent)!=null?l:"",origin:!0}),ce.clear(),ce.success("复制成功"))})})}e(),Ce(()=>e()),Fe(()=>e())}const Fo=e=>/^[\s\n\r]*$/.test(e),Vo={key:0,class:"flex-1"},jo={class:"chat-wrapper"},Mo=["src"],Do={class:"date-time"},qo={key:0,class:"text-info"},Wo={key:0,class:"message-item__actions"},Uo={class:"chat-footer"},Jo=oe({__name:"ChatView",setup(e){Xe();const t=Pt(),o=Ot(),r=_(()=>t.session),{isMobileScreen:v}=Lt(),c=m(!1),i={user:Wt,assistant:Ho},l=m(),p=m("新的聊天");Nt(()=>{var s;p.value=((s=t.session)==null?void 0:s.topic)||"新的聊天"}),pe(()=>t.currentChat,()=>{fe(()=>{var s,u,g,w;(w=l.value)==null||w.scrollTop(((g=(u=(s=l.value)==null?void 0:s.containerRef)==null?void 0:u.scrollHeight)!=null?g:0)-200)})});const n=m(""),f=s=>{c.value=!1,t.messageRetryAction(s,()=>{var u,g,w,O;c.value||(O=l.value)==null||O.scrollTop(((w=(g=(u=l.value)==null?void 0:u.containerRef)==null?void 0:g.scrollHeight)!=null?w:0)-200)})},E=()=>{if(Fo(n.value)){ce.clear(),ce.error("请输入消息内容");return}c.value=!1,t.sendMessageAction(n.value,s=>{var u,g,w,O;c.value||(O=l.value)==null||O.scrollTop(((w=(g=(u=l.value)==null?void 0:u.containerRef)==null?void 0:g.scrollHeight)!=null?w:0)-200),s&&fe(()=>{Xe()})}),n.value=""},I=s=>{s.deltaY<10&&(c.value=!0)};Ce(()=>{fe(()=>{var s,u,g,w,O;(w=l.value)==null||w.scrollTop(((g=(u=(s=l.value)==null?void 0:s.containerRef)==null?void 0:u.scrollHeight)!=null?g:0)-200),(O=l.value)==null||O.$el.querySelector(".arco-scrollbar-container").addEventListener("wheel",I)})});const U=s=>{var u,g,w;(((u=s==null?void 0:s.target)==null?void 0:u.scrollTop)||0)+(((g=s==null?void 0:s.target)==null?void 0:g.offsetHeight)||0)>=(((w=s==null?void 0:s.target)==null?void 0:w.scrollHeight)||0)-70&&(c.value=!1)};Ae(()=>{var s,u,g;(s=t.abortController)!=null&&s.abort&&((u=t.abortController)==null||u.abort()),(g=l.value)==null||g.$el.querySelector(".arco-scrollbar-container").removeEventListener("wheel",I)});const P=()=>{t.handleChangeSessionTopicAction(p.value)},C=s=>{v.value?s.key==="Enter"&&(s.preventDefault(),E()):s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),E())},z=s=>{lt({text:s}),ce.clear(),ce.success("复制成功")},H=_(()=>`请输入您的消息，${o.submitKey} 发送，${o.submitKey===Re.Enter?Re.ShiftEnter:Re.Enter} 换行`);return(s,u)=>{const g=zo,w=Ft,O=Vt,B=no,F=Ut,ne=q("icon-copy"),j=jt,V=He,X=q("icon-sync"),L=Ao,b=Mt,K=q("icon-record-stop"),Z=uo,ae=Dt,le=At("date-time");return h(),$(Ie,null,[d(w,{class:"h-14 px-4 flex items-center bg-white dark:bg-dark"},{default:A(()=>[J("div",{class:N(["flex flex-col editable-title__wrapper",{"is-mobile":D(v)}])},[d(g,{class:"m-0",editable:"",editText:D(p),"onUpdate:editText":u[0]||(u[0]=M=>Me(p)?p.value=M:null),onEditEnd:P},{default:A(()=>[he(te(D(p)),1)]),_:1},8,["editText"])],2),D(v)?W("",!0):(h(),$("i",Vo))]),_:1}),d(O,{class:"m-0"}),d(ae,{class:"flex flex-col flex-1 overflow-hidden"},{default:A(()=>[J("main",jo,[d(b,{ref_key:"scrollbarRef",ref:l,onScroll:U,"outer-style":"flex: 1; overflow: hidden; ",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2 pb-20"},{default:A(()=>{var M,Y;return[(h(!0),$(Ie,null,Ht((Y=(M=D(r))==null?void 0:M.messages)!=null?Y:[],(S,se)=>(h(),$("section",{key:S.id,class:N(["message-item",[S.role==="assistant"?"is-reply":"is-request",D(v)?"max-w-full":"max-w-4/5"]])},[J("div",{class:N(["flex items-center gap-x-4",{"flex-row-reverse":S.role!=="assistant"}])},[d(F,{loading:S.streaming&&S.role==="assistant"},{default:A(()=>[d(B,{size:32,class:N(S.role==="assistant"?"bg-primary p-2":"bg-success")},{default:A(()=>{var ee;return[J("img",{src:(ee=i[S.role])!=null?ee:""},null,8,Mo)]}),_:2},1032,["class"])]),_:2},1032,["loading"]),qt((h(),$("small",Do,[he(te(S.date),1)])),[[le,S.date]])],2),S.streaming&&S.role==="assistant"?(h(),$("small",qo," 正在输入... ")):W("",!0),J("section",{class:N(["message-item__content",{"is-user":S.role==="user"},{"is-assistant":S.role==="assistant"}])},[S.role==="assistant"?(h(),$("div",Wo,[d(V,{"content-class":"text-xs",content:"复制",position:"top"},{default:A(()=>[d(j,{onClick:ee=>z(S.content),size:"mini",shape:"circle",type:"text"},{default:A(()=>[d(ne,{class:"text-base"})]),_:2},1032,["onClick"])]),_:2},1024),d(V,{"content-class":"text-xs",content:"重试",position:"top"},{default:A(()=>[d(j,{onClick:ee=>f(se),size:"mini",shape:"circle",type:"text"},{default:A(()=>[d(X,{class:"text-base"})]),_:2},1032,["onClick"])]),_:2},1024)])):W("",!0),(h(),ye(L,{key:S.content,text:S.content,inversion:S.role!=="assistant"},null,8,["text","inversion"]))],2)],2))),128))]}),_:1},512),d(O,{class:"m-0"}),J("footer",Uo,[D(t).fetching?(h(),ye(j,{key:0,onClick:u[1]||(u[1]=M=>{var Y;return(Y=D(t).abortController)==null?void 0:Y.abort()}),shape:"round",status:"danger",class:"stop-receiving"},{default:A(()=>[d(K,{class:"text-lg mr-2"}),he(" 停止 ")]),_:1})):W("",!0),d(Z,{modelValue:D(n),"onUpdate:modelValue":u[2]||(u[2]=M=>Me(n)?n.value=M:null),onKeypress:C,class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:4,maxRows:6},placeholder:D(H)},null,8,["modelValue","placeholder"])])])]),_:1})],64)}}});export{Jo as default};
