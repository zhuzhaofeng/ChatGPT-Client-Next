System.register(["./index-legacy-22099906.js","./index-legacy-2c8b5ef7.js","./dropdown-button-legacy-ab337e0d.js"],(function(e,t){"use strict";var o,a,r,n,i,l,p,c,s,d,u,m,x,g,v,y,b,f,h,w,k,C,T,z,E,_,S,B,$,R,j,I,O,P,A,L,N,H,M,V,q,D,K,F,W,U,Y,G,J,Q,X,Z,ee,te,oe,ae,re,ne,ie,le,pe,ce,se,de,ue,me,xe,ge,ve,ye,be,fe,he,we,ke,Ce,Te,ze,Ee,_e,Se,Be,$e,Re=document.createElement("style");return Re.textContent=".arco-textarea-wrapper{display:inline-flex;box-sizing:border-box;color:var(--color-text-1);font-size:14px;background-color:var(--color-fill-2);border:1px solid transparent;border-radius:var(--border-radius-small);cursor:text;transition:color .1s cubic-bezier(0,0,1,1),border-color .1s cubic-bezier(0,0,1,1),background-color .1s cubic-bezier(0,0,1,1);position:relative;display:inline-block;width:100%;padding-right:0;padding-left:0;overflow:hidden}.arco-textarea-wrapper:hover{background-color:var(--color-fill-3);border-color:transparent}.arco-textarea-wrapper:focus-within,.arco-textarea-wrapper.arco-textarea-focus{background-color:var(--color-bg-2);border-color:rgb(var(--primary-6));box-shadow:0 0 0 0 var(--color-primary-light-2)}.arco-textarea-wrapper.arco-textarea-disabled{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent;cursor:not-allowed}.arco-textarea-wrapper.arco-textarea-disabled:hover{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-prefix,.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-suffix{color:inherit}.arco-textarea-wrapper.arco-textarea-error{background-color:var(--color-danger-light-1);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:hover{background-color:var(--color-danger-light-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:focus-within,.arco-textarea-wrapper.arco-textarea-error.arco-textarea-wrapper-focus{background-color:var(--color-bg-2);border-color:rgb(var(--danger-6));box-shadow:0 0 0 0 var(--color-danger-light-2)}.arco-textarea-wrapper .arco-textarea-prefix,.arco-textarea-wrapper .arco-textarea-suffix{display:inline-flex;flex-shrink:0;align-items:center;white-space:nowrap;user-select:none}.arco-textarea-wrapper .arco-textarea-prefix>svg,.arco-textarea-wrapper .arco-textarea-suffix>svg{font-size:14px}.arco-textarea-wrapper .arco-textarea-prefix{padding-right:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix{padding-left:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon{display:inline-flex}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-validating{color:rgb(var(--primary-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-success{color:rgb(var(--success-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-warning{color:rgb(var(--warning-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-error{color:rgb(var(--danger-6))}.arco-textarea-wrapper .arco-textarea-clear-btn{align-self:center;color:var(--color-text-2);font-size:12px;visibility:hidden;cursor:pointer}.arco-textarea-wrapper .arco-textarea-clear-btn>svg{position:relative;transition:color .1s cubic-bezier(0,0,1,1)}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{visibility:visible}.arco-textarea-wrapper:not(.arco-textarea-focus) .arco-textarea-icon-hover:hover:before{background-color:var(--color-fill-4)}.arco-textarea-wrapper .arco-textarea-word-limit{position:absolute;right:10px;bottom:6px;color:var(--color-text-3);font-size:12px;user-select:none}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-word-limit{right:25px}.arco-textarea-wrapper .arco-textarea-clear-btn{position:absolute;top:50%;right:10px;transform:translateY(-50%)}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-clear-btn{right:25px}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{display:block}.arco-textarea-wrapper .arco-textarea-mirror{position:absolute;visibility:hidden}.arco-textarea{width:100%;color:inherit;background:none;border:none;border-radius:0;outline:none;cursor:inherit;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:block;box-sizing:border-box;height:100%;min-height:32px;padding:4px 12px;font-size:14px;line-height:1.5715;vertical-align:top;resize:vertical}.arco-textarea::placeholder{color:var(--color-text-3)}.arco-textarea[disabled]::placeholder{color:var(--color-text-4)}.arco-textarea[disabled]{-webkit-text-fill-color:var(--color-text-4)}.message-content[data-v-cf02b953]{max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important}.arco-typography{color:var(--color-text-1);line-height:1.5715}h1.arco-typography,h2.arco-typography,h3.arco-typography,h4.arco-typography,h5.arco-typography,h6.arco-typography{margin-top:1em;margin-bottom:.5em;font-weight:500}h1.arco-typography{font-size:36px;line-height:1.23}h2.arco-typography{font-size:32px;line-height:1.25}h3.arco-typography{font-size:28px;line-height:1.29}h4.arco-typography{font-size:24px;line-height:1.33}h5.arco-typography{font-size:20px;line-height:1.4}h6.arco-typography{font-size:16px;line-height:1.5}div.arco-typography,p.arco-typography{margin-top:0;margin-bottom:1em}.arco-typography-primary{color:rgb(var(--primary-6))}.arco-typography-secondary{color:var(--color-text-2)}.arco-typography-success{color:rgb(var(--success-6))}.arco-typography-warning{color:rgb(var(--warning-6))}.arco-typography-danger{color:rgb(var(--danger-6))}.arco-typography-disabled{color:var(--color-text-4);cursor:not-allowed}.arco-typography mark{background-color:rgb(var(--yellow-4))}.arco-typography u{text-decoration:underline}.arco-typography del{text-decoration:line-through}.arco-typography b{font-weight:500}.arco-typography code{margin:0 2px;padding:2px 8px;color:var(--color-text-2);font-size:85%;background-color:var(--color-neutral-2);border:1px solid var(--color-neutral-3);border-radius:2px}.arco-typography blockquote{margin:0 0 1em;padding-left:8px;background-color:var(--color-bg-2);border-left:2px solid var(--color-neutral-6)}.arco-typography ol,.arco-typography ul{margin:0;padding:0}.arco-typography ul li,.arco-typography ol li{margin-left:20px}.arco-typography ul{list-style:circle}.arco-typography-spacing-close{line-height:1.3}.arco-typography-operation-copy,.arco-typography-operation-copied{margin-left:2px;padding:2px}.arco-typography-operation-copy{color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-copy:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-copied{color:rgb(var(--success-6))}.arco-typography-operation-edit{margin-left:2px;padding:2px;color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-edit:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-expand{margin:0 4px;color:rgb(var(--primary-6));cursor:pointer}.arco-typography-operation-expand:hover{color:rgb(var(--primary-5))}.arco-typography-edit-content{position:relative;left:-13px;margin-top:-5px;margin-right:-13px;margin-bottom:calc(1em - 5px)}.arco-typography-css-operation{margin-top:-1em;margin-bottom:1em;text-align:right}.chat-wrapper{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-flex:1!important;-ms-flex:1 1 0%!important;-webkit-flex:1 1 0%!important;flex:1 1 0%!important;overflow:hidden!important}.chat-wrapper .message-item{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:start!important;-ms-flex-align:start!important;-webkit-align-items:flex-start!important;align-items:flex-start!important;justify-items:start!important;padding-left:0!important;grid-gap:.5rem!important;gap:.5rem!important;max-width:75%!important}.chat-wrapper .message-item.is-request{-webkit-box-align:end!important;-ms-flex-align:end!important;-webkit-align-items:flex-end!important;align-items:flex-end!important;margin-left:auto!important;max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important;padding-left:2.5rem!important}.chat-wrapper .message-item .message-item__content{border-radius:.5rem!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;font-size:.875rem!important;line-height:1.25rem!important;max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important;padding:.75rem 1rem!important;position:relative!important}.chat-wrapper .message-item .message-item__content.is-user{--tw-bg-opacity: 1 !important;background-color:rgba(16,163,127,var(--tw-bg-opacity))!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;--tw-text-opacity: 1 !important;color:rgba(255,255,255,var(--tw-text-opacity))!important}.chat-wrapper .message-item .message-item__content.is-assistant{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important}.dark .chat-wrapper .message-item .message-item__content.is-assistant{--tw-bg-opacity: 1 !important;background-color:rgba(35,35,36,var(--tw-bg-opacity))!important}.chat-wrapper .message-item .message-item__actions{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-align:center!important;-ms-flex-align:center!important;-webkit-align-items:center!important;align-items:center!important;opacity:0!important;padding-left:1rem!important;position:absolute!important;top:-2.25rem!important;right:2rem!important;-webkit-column-gap:.25rem!important;-moz-column-gap:.25rem!important;grid-column-gap:.25rem!important;column-gap:.25rem!important;-webkit-transition-property:all!important;-o-transition-property:all!important;transition-property:all!important;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-o-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-webkit-transition-duration:.15s!important;-o-transition-duration:.15s!important;transition-duration:.15s!important;-webkit-transition-duration:.5s!important;-o-transition-duration:.5s!important;transition-duration:.5s!important}.chat-wrapper .message-item:hover .message-item__actions{opacity:1!important;right:0px!important}.chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-align:end!important;-ms-flex-align:end!important;-webkit-align-items:flex-end!important;align-items:flex-end!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;padding:.75rem 1rem .5rem .5rem!important;width:100%!important}.dark .chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(23,23,26,var(--tw-bg-opacity))!important}.footer-spin{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-ms-flex-align:center!important;-webkit-align-items:center!important;align-items:center!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;-webkit-justify-content:center!important;justify-content:center!important;width:100%!important}.footer-spin .arco-spin-mask{background-color:rgba(255,255,255,.92)}\n",document.head.appendChild(Re),{setters:[e=>{o=e.g,a=e.R,r=e.I,n=e.h,i=e.t,l=e.i,p=e.u,c=e.r,s=e.j,d=e.k,u=e.l,m=e.m,x=e.n,g=e.q,v=e.s,y=e.v,b=e.x,f=e.y,h=e.z,w=e.A,k=e.C,C=e.D,T=e.o,z=e.E,E=e.F,_=e.G,S=e.H,B=e.J,$=e.b,R=e.w,j=e.a,I=e.K,O=e.L,P=e.M,A=e.N,L=e.O,N=e.P,H=e.T,M=e.Q,V=e.U,q=e.V,D=e.W,K=e.c,F=e.X,W=e.d,U=e.Y,Y=e.Z,G=e.$,J=e.a0,Q=e.a1,X=e.a2,Z=e.a3,ee=e.a4,te=e.a5,oe=e.a6,ae=e.a7,re=e.a8,ne=e._,ie=e.a9,le=e.aa,pe=e.ab,ce=e.ac,se=e.ad,de=e.ae,ue=e.af,me=e.ag,xe=e.ah,ge=e.ai,ve=e.aj,ye=e.ak,be=e.al,fe=e.B,he=e.S,we=e.am,ke=e.an,Ce=e.ao,Te=e.ap},e=>{ze=e.M,Ee=e.H,_e=e.m,Se=e.a},e=>{Be=e.D,$e=e.a}],execute:function(){const t=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],Re=o({name:"Textarea",components:{ResizeObserver:a,IconHover:r,IconClose:n},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:o,attrs:a}){const{disabled:r,error:n,modelValue:y}=i(e),C=l("textarea"),{mergedDisabled:T,mergedError:z,eventHandlers:E}=p({disabled:r,error:n}),_=c(),S=c(),B=c(),$=c(),R=c(e.defaultValue),j=s((()=>{var e;return null!=(e=y.value)?e:R.value})),[I,O]=d(_);u(y,(e=>{(m(e)||x(e))&&(R.value="")}));const P=s((()=>g(e.maxLength)&&Boolean(e.maxLength.errorOnly))),A=s((()=>g(e.maxLength)?e.maxLength.length:e.maxLength)),L=t=>{var o;return b(e.wordLength)?e.wordLength(t):null!=(o=t.length)?o:0},N=s((()=>L(j.value))),H=s((()=>z.value||Boolean(A.value&&P.value&&N.value>A.value))),M=c(!1),V=c(!1),q=s((()=>e.allowClear&&!T.value&&j.value)),D=c(!1),K=c(""),F=()=>{I(),k((()=>{_.value&&j.value!==_.value.value&&(_.value.value=j.value,O())}))},W=(t,a=!0)=>{var r,n;A.value&&!P.value&&L(t)>A.value&&(t=null!=(n=null==(r=e.wordSlice)?void 0:r.call(e,t,A.value))?n:t.slice(0,A.value)),R.value=t,a&&o("update:modelValue",t),F()};let U=j.value;const Y=(e,t)=>{var a,r;e!==U&&(U=e,o("change",e,t),null==(r=null==(a=E.value)?void 0:a.onChange)||r.call(a,t))};u(y,(e=>{e!==j.value&&W(null!=e?e:"",!1)}));const G=s((()=>[`${C}-wrapper`,{[`${C}-focus`]:V.value,[`${C}-disabled`]:T.value,[`${C}-error`]:H.value,[`${C}-scroll`]:M.value}]));let J;const Q=c(0),X=c(0),Z=s((()=>g(e.autoSize)&&e.autoSize.minRows?e.autoSize.minRows*Q.value+X.value:0)),ee=s((()=>g(e.autoSize)&&e.autoSize.maxRows?e.autoSize.maxRows*Q.value+X.value:0)),te=()=>{const e=(e=>{const o={};return t.forEach((t=>{o[t]=e.getPropertyValue(t)})),o})(J);Q.value=Number.parseInt(e["line-height"]||0,10),X.value=2*Number.parseInt(e["border-width"]||0,10)+Number.parseInt(e["padding-top"]||0,10)+Number.parseInt(e["padding-bottom"]||0,10),$.value=e,k((()=>{var e;const t=null==(e=B.value)?void 0:e.offsetHeight;let o=null!=t?t:0,a="hidden";Z.value&&o<Z.value&&(o=Z.value),ee.value&&o>ee.value&&(o=ee.value,a="auto"),S.value={height:`${o}px`,resize:"none",overflow:a}}))};v((()=>{_.value&&(J=window.getComputedStyle(_.value),e.autoSize&&te()),oe()}));const oe=()=>{_.value&&(_.value.scrollHeight>_.value.offsetHeight?M.value||(M.value=!0):M.value&&(M.value=!1))};return u(j,(()=>{e.autoSize&&B.value&&te(),oe()})),{prefixCls:C,wrapperCls:G,textareaRef:_,textareaStyle:S,mirrorRef:B,mirrorStyle:$,computedValue:j,showClearBtn:q,valueLength:N,computedMaxLength:A,mergedDisabled:T,getWrapperAttrs:e=>f(a,h),getTextareaAttrs:e=>w(a,h),handleInput:e=>{var t,a;const{value:r}=e.target;if(D.value)K.value=r;else{if(A.value&&!P.value&&j.value.length>=A.value&&L(r)>A.value&&"insertText"===e.inputType)return void F();o("input",r,e),W(r),null==(a=null==(t=E.value)?void 0:t.onInput)||a.call(t,e)}},handleFocus:e=>{var t,a;V.value=!0,U=j.value,o("focus",e),null==(a=null==(t=E.value)?void 0:t.onFocus)||a.call(t,e)},handleBlur:e=>{var t,a;V.value=!1,o("blur",e),null==(a=null==(t=E.value)?void 0:t.onBlur)||a.call(t,e),Y(j.value,e)},handleComposition:e=>{var t,a;const{value:r}=e.target;if("compositionend"===e.type){if(D.value=!1,K.value="",A.value&&!P.value&&j.value.length>=A.value&&L(r)>A.value)return void F();o("input",r,e),W(r),null==(a=null==(t=E.value)?void 0:t.onInput)||a.call(t,e)}else D.value=!0},handleClear:e=>{W(""),Y("",e),o("clear",e)},handleResize:()=>{e.autoSize&&B.value&&te(),oe()},handleMousedown:e=>{_.value&&e.target!==_.value&&(e.preventDefault(),_.value.focus())}}},methods:{focus(){var e;null==(e=this.$refs.textareaRef)||e.focus()},blur(){var e;null==(e=this.$refs.textareaRef)||e.blur()}}}),je=["disabled","value","placeholder"];var Ie=y(Re,[["render",function(e,t,o,a,r,n){const i=C("resize-observer"),l=C("icon-close"),p=C("icon-hover");return T(),z("div",I(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...t)=>e.handleMousedown&&e.handleMousedown(...t))}),[e.autoSize?(T(),z("div",{key:0,ref:"mirrorRef",class:E(`${e.prefixCls}-mirror`),style:_(e.mirrorStyle)},S(`${e.computedValue}\n`),7)):B("v-if",!0),$(i,{onResize:e.handleResize},{default:R((()=>[j("textarea",I({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onCompositionstart:t[3]||(t[3]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionupdate:t[4]||(t[4]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionend:t[5]||(t[5]=(...t)=>e.handleComposition&&e.handleComposition(...t))}),null,16,je)])),_:1},8,["onResize"]),O(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(T(),z("div",{key:1,class:E(`${e.prefixCls}-word-limit`)},S(e.valueLength)+"/"+S(e.computedMaxLength),3)):B("v-if",!0),e.showClearBtn?(T(),z("div",{key:2,class:E(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...t)=>e.handleClear&&e.handleClear(...t))},[$(p,null,{default:R((()=>[$(l)])),_:1})],2)):B("v-if",!0)],16)}]]);const Oe=Object.assign(Ie,{install:(e,t)=>{P(e,t);const o=A(t);e.component(o+Ie.name,Ie)}}),Pe=o({name:"TypographyEditContent",components:{Input:L},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const o=[`${l("typography")}-edit-content`],a=c();function r(){t("end")}return v((()=>{if(!a.value||!a.value.$el)return;const e=a.value.$el.querySelector("input");if(!e)return;e.focus&&e.focus();const{length:t}=e.value;e.setSelectionRange(t,t)})),{classNames:o,inputRef:a,onBlur:r,onChange:function(e){t("update:text",e),t("change",e)},onEnd:r}}});var Ae=y(Pe,[["render",function(e,t,o,a,r,n){const i=C("Input");return T(),z("div",{class:E(e.classNames)},[$(i,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:N(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}]]);const Le=o({name:"TypographyOperations",components:{Tooltip:H,IconCheckCircleFill:M,IconCopy:V,IconEdit:q},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const o=l("typography"),a=s((()=>e.forceRenderExpand||e.expandable&&e.isEllipsis)),{t:r}=D();return{prefixCls:o,showExpand:a,t:r,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});var Ne=y(Le,[["render",function(e,t,o,a,r,n){const i=C("IconEdit"),l=C("Tooltip"),p=C("IconCheckCircleFill"),c=C("IconCopy");return T(),z(Y,null,[e.editable?(T(),K(l,I({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:R((()=>[j("span",{class:E(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=F(((...t)=>e.onEditClick&&e.onEditClick(...t)),["stop"]))},[$(i)],2)])),_:1},16,["content"])):B("v-if",!0),e.copyable?(T(),K(l,U(I({key:1},e.copyTooltipProps)),{content:R((()=>[O(e.$slots,"copy-tooltip",{copied:e.isCopied},(()=>[W(S(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)]))])),default:R((()=>[j("span",{class:E({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=F(((...t)=>e.onCopyClick&&e.onCopyClick(...t)),["stop"]))},[O(e.$slots,"copy-icon",{copied:e.isCopied},(()=>[e.isCopied?(T(),K(p,{key:0})):(T(),K(c,{key:1}))]))],2)])),_:3},16)):B("v-if",!0),e.showExpand?(T(),z("a",{key:2,class:E(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=F(((...t)=>e.onExpandClick&&e.onExpandClick(...t)),["stop"]))},[O(e.$slots,"expand-node",{expanded:e.expanded},(()=>[W(S(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)]))],2)):B("v-if",!0)],64)}]]);let He;function Me(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var Ve=(e,t,o,a)=>{He||(He=document.createElement("div"),document.body.appendChild(He));const{rows:r,suffix:n,ellipsisStr:i}=t,l=window.getComputedStyle(e),p=(c=l,Array.prototype.slice.apply(c).map((e=>`${e}: ${c.getPropertyValue(e)};`)).join(""));var c;const s=Me(l.lineHeight),d=Math.round(s*r+Me(l.paddingTop)+Me(l.paddingBottom));He.setAttribute("style",p),He.setAttribute("aria-hidden","true"),He.style.height="auto",He.style.minHeight="auto",He.style.maxHeight="auto",He.style.position="fixed",He.style.left="0",He.style.top="-99999999px",He.style.zIndex="-200",He.style.whiteSpace="normal";const u=G({render:()=>$("span",null,[o])});u.mount(He);const m=Array.prototype.slice.apply(He.childNodes[0].cloneNode(!0).childNodes);u.unmount(),He.innerHTML="";const x=document.createTextNode(`${i}${n}`);He.appendChild(x),m.forEach((e=>{He.appendChild(e)}));const g=document.createTextNode(a);function v(){return He.offsetHeight<=d}return He.insertBefore(g,x),v()?{ellipsis:!1,text:a}:(function e(t,o=0,r=a.length,n=0){const i=Math.floor((o+r)/2),l=a.slice(0,i);if(t.textContent=l,o>=r-1)for(let p=r;p>=o;p-=1){const e=a.slice(0,p);if(t.textContent=e,v()||!e)return}v()?e(t,i,r,i):e(t,o,i,n)}(g),{text:g.textContent,ellipsis:!0})};let qe;var De=Object.defineProperty,Ke=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,We=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,Ge=(e,t,o)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;function Je(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!te(e)}function Qe(e,t){const{mark:o}=e,a=function(e){const{bold:t,mark:o,underline:a,delete:r,code:n}=e,i=[];return t&&i.push("b"),a&&i.push("u"),r&&i.push("del"),n&&i.push("code"),o&&i.push("mark"),i}(e),r=g(o)&&o.color?{backgroundColor:o.color}:{};return a.reduce(((e,t)=>$(t,"mark"===t?{style:r}:{},Je(e)?e:{default:()=>[e]})),t)}function Xe(e){const t=!!e.showTooltip,o=g(e.showTooltip)&&"popover"===e.showTooltip.type?oe:H,a=g(e.showTooltip)&&e.showTooltip.props||{};return r=((e,t)=>{for(var o in t||(t={}))Ue.call(t,o)&&Ge(e,o,t[o]);if(We)for(var o of We(t))Ye.call(t,o)&&Ge(e,o,t[o]);return e})({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},f(e,["showTooltip"])),Ke(r,Fe({showTooltip:t,TooltipComponent:o,tooltipProps:a}));var r}var Ze=o({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{editing:n,defaultEditing:p,ellipsis:d,copyable:m,editable:x,copyText:y,editText:b,copyDelay:f,component:h}=i(e),w=l("typography"),k=s((()=>[w,{[`${w}-${e.type}`]:e.type,[`${w}-disabled`]:e.disabled}])),C=c(),T=c(""),[z,E]=J(p.value,Q({value:n})),_=s((()=>x.value&&z.value));function S(){o("update:editing",!0),o("editStart"),E(!0)}function B(){z.value&&(o("update:editing",!1),o("editEnd"),E(!1))}const R=c(!1);let j=null;function O(){var e;const t=null!=(e=y.value)?e:T.value;(async e=>{var t;if(null==(t=navigator.clipboard)?void 0:t.writeText)try{return void(await navigator.clipboard.writeText(e))}catch(n){console.error(null!=n?n:new DOMException("The request is not allowed","NotAllowedError"))}const o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre",document.body.appendChild(o);const a=window.getSelection(),r=window.document.createRange();null==a||a.removeAllRanges(),r.selectNode(o),null==a||a.addRange(r);try{window.document.execCommand("copy")}catch(n){console.error(`execCommand Error: ${n}`)}null==a||a.removeAllRanges(),window.document.body.removeChild(o)})(t||""),R.value=!0,o("copy",t),j=setTimeout((()=>{R.value=!1}),f.value)}X((()=>{j&&clearTimeout(j),j=null}));const P=c(!1),A=c(!1),L=c(""),N=s((()=>Xe(g(d.value)&&d.value||{})));let H=null;function M(){const e=!A.value;A.value=e,o("expand",e)}function V(o=!1){return N.value.css?$(Ne,{editable:x.value,copyable:m.value,expandable:N.value.expandable,isCopied:R.value,isEllipsis:W.value,expanded:A.value,forceRenderExpand:o||A.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:S,onCopy:O,onExpand:M},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):$(Ne,{editable:x.value,copyable:m.value,expandable:N.value.expandable,isCopied:R.value,isEllipsis:P.value,expanded:A.value,forceRenderExpand:o,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:S,onCopy:O,onExpand:M},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function q(){d.value&&!A.value&&(Z(H),H=ae((()=>{!function(){if(!C.value)return;const{ellipsis:e,text:t}=Ve(C.value,N.value,V(!!N.value.expandable),T.value);P.value!==e&&(P.value=e,N.value.css||o("ellipsis",e)),L.value!==t&&(L.value=t||"")}()})))}X((()=>{Z(H)})),u((()=>N.value.rows),(()=>{q()})),u(d,(e=>{e?q():P.value=!1}));let D=[];const K=()=>{if(d.value||m.value||x.value){const e=function(e){if(!e)return"";qe||(qe=document.createElement("div"),qe.setAttribute("aria-hidden","true"),document.body.appendChild(qe));const t=G({render:()=>$("div",null,[e])});t.mount(qe);const o=qe.innerText;return t.unmount(),o}(D);e!==T.value&&(T.value=e,q())}};v(K),ee(K);const F=c(),W=c(!1),U=()=>{if(C.value&&F.value){const e=F.value.offsetHeight>C.value.offsetHeight;e!==W.value&&(W.value=e,o("ellipsis",e))}},Y=s((()=>A.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":N.value.rows,"-webkit-box-orient":"vertical"}));return()=>{var n,i;if(D=(null==(n=t.default)?void 0:n.call(t))||[],_.value){const e=null!=(i=b.value)?i:T.value;return $(Ae,{text:e,onChange:t=>{t!==e&&function(e){o("update:editText",e),o("change",e)}(t)},onEnd:B},null)}const{suffix:l,ellipsisStr:p,showTooltip:c,tooltipProps:s,TooltipComponent:d}=N.value,u=P.value&&!A.value,m=u&&!c?{title:T.value}:{},x=h.value;if(N.value.css){const t=Qe(e,D),o=$(x,I({class:k.value,ref:C,style:Y.value},m,r),{default:()=>[$("span",{ref:F},[t])]});return W.value?$(d,I(s,{onResize:()=>U()}),{default:()=>[o],content:()=>T.value}):$(a,{onResize:()=>{U()}},Je(o)?o:{default:()=>[o]})}const g=Qe(e,u?L.value:D);return $(a,{onResize:()=>q()},{default:()=>[$(x,I({class:k.value,ref:C},m,r),{default:()=>[u&&c?$(d,s,{default:()=>[$("span",null,[g])],content:()=>T.value}):g,u?p:null,l,V()]})]})}}}),et=o({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:o}=i(e),a=l("typography");return{component:s((()=>(null==t?void 0:t.value)?"blockquote":"div")),classNames:s((()=>[{[`${a}-spacing-close`]:"close"===(null==o?void 0:o.value)}]))}},render(){const{component:e,classNames:t}=this;return $(Ze,I({class:t},this.$attrs,{component:e}),this.$slots)}});const tt={key:0,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},ot={key:0},at=["innerHTML"],rt=["textContent"],nt=["textContent"],it=o({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,o=c(),a=new ze({linkify:!0,highlight(e,t){if(t&&Ee.getLanguage(t)){const o=t??"";return i(Ee.highlight(e,{language:o}).value,o)}return i(Ee.highlightAuto(e).value,"")}});a.use(_e,{attrs:{target:"_blank",rel:"noopener"}}),a.use(Se,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const r=s((()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}])),n=s((()=>{const e=(t.text??"").replace(/\n+$/g,"");return t.asRawText||t.inversion?e:a.render(e)}));function i(e,t){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${t}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${t}">${e}</code></pre>`}return ee((()=>{k((()=>{o.value&&Ee.highlightBlock(o.value)}))})),(t,a)=>(T(),z("div",{class:E(re(r))},[e.loading?(T(),z("span",tt)):(T(),z("div",{key:1,ref_key:"textRef",ref:o,class:"leading-relaxed break-words"},[e.inversion?(T(),z("div",{key:1,class:"whitespace-pre-wrap",textContent:S(re(n))},null,8,nt)):(T(),z("div",ot,[e.asRawText?(T(),z("div",{key:1,class:"whitespace-pre-wrap",textContent:S(re(n))},null,8,rt)):(T(),z("div",{key:0,class:"markdown-body",innerHTML:re(n)},null,8,at))]))],512))],2))}}),lt=ne(it,[["__scopeId","data-v-cf02b953"]]);function pt(e){const t={origin:!0,...e};let o;o=t.origin?document.createElement("textarea"):document.createElement("input"),o.setAttribute("readonly","readonly"),o.value=t.text,document.body.appendChild(o),o.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(o)}const ct={key:0,class:"flex-1"},st={class:"chat-wrapper"},dt=["src"],ut={key:0,class:"text-info"},mt={key:0,class:"message-item__actions"},xt={class:"chat-footer"},gt={class:"flex items-center gap-x-2 w-32"},vt={class:"flex-1"};e("default",o({__name:"ChatView",setup(e){!function(){function e(){document.querySelectorAll(".code-block-wrapper").forEach((e=>{const t=e.querySelector(".code-block-header__copy"),o=e.querySelector(".code-block-body");t&&o&&t.addEventListener("click",(()=>{navigator.clipboard?.writeText?(navigator.clipboard.writeText(o.textContent??""),ie.clear(),ie.success("复制成功")):(pt({text:o.textContent??"",origin:!0}),ie.clear(),ie.success("复制成功"))}))}))}v((()=>e())),ee((()=>e()))}();const t=le(),o=pe(),a=s((()=>t.session)),{isMobileScreen:r}=ce(),n={user:Ce,assistant:"/assets/openai-white-1b79b841.svg"},i=c(),l=c("新的聊天");se((()=>{l.value=t.session?.topic||"新的聊天"}));const p=c(""),d=c(),u=()=>{if(e=p.value,/^[\s\n\r]*$/.test(e))return ie.clear(),void ie.error("请输入消息内容");var e;t.sendMessageAction(p.value,(()=>{i.value?.scrollTop((i.value?.containerRef?.scrollHeight??0)-200)}),(e=>{d.value=e})),p.value=""};v((()=>{k((()=>{i.value?.scrollTop((i.value?.containerRef?.scrollHeight??0)-200)}))}));const m=e=>{o.changeSubmitKeyAction(e)},x=()=>{t.handleChangeSessionTopicAction(l.value)},g=e=>{o.submitKey===ke.Enter&&(e.shiftKey&&"Enter"===e.code?(e.preventDefault(),p.value+="\n"):e.shiftKey||"Enter"!==e.code||(e.preventDefault(),u())),o.submitKey===ke.ShiftEnter&&(e.shiftKey||"Enter"!==e.code?e.shiftKey&&"Enter"===e.code&&(e.preventDefault(),u()):(e.preventDefault(),p.value+="\n"))};return(e,c)=>{const s=et,v=me,y=xe,b=ge,f=ve,h=ye,w=Te,k=be,_=C("icon-copy"),I=fe,O=H,P=lt,A=he,L=C("icon-record-stop"),M=Oe,V=C("icon-send"),q=C("icon-down"),D=C("icon-check"),U=$e,G=Be,J=we;return T(),z(Y,null,[$(f,{class:"h-14 px-4 flex items-center bg-white dark:bg-dark"},{default:R((()=>[j("div",{class:E(["flex flex-col editable-title__wrapper",{"is-mobile":re(r)}])},[$(s,{class:"m-0",editable:"",editText:re(l),"onUpdate:editText":c[0]||(c[0]=e=>de(l)?l.value=e:null),onEditEnd:x},{default:R((()=>[W(S(re(l)),1)])),_:1},8,["editText"])],2),re(r)?B("",!0):(T(),z("i",ct)),re(r)?B("",!0):(T(),K(b,{key:1},{default:R((()=>[$(v,{class:"w-44"}),$(y,{class:"w-60"})])),_:1}))])),_:1}),$(h,{class:"m-0"}),$(J,{class:"flex flex-col flex-1 overflow-hidden"},{default:R((()=>[j("main",st,[$(A,{ref_key:"scrollbarRef",ref:i,"outer-style":"flex: 1; overflow: hidden;",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2"},{default:R((()=>[(T(!0),z(Y,null,ue(re(a)?.messages??[],(e=>(T(),z("section",{key:e.id,class:E(["message-item",["assistant"===e.role?"is-reply":"is-request"]])},[$(k,{loading:e.streaming&&"assistant"===e.role},{default:R((()=>[$(w,{size:32,class:E("assistant"===e.role?"bg-primary p-2":"bg-success")},{default:R((()=>[j("img",{src:n[e.role]??""},null,8,dt)])),_:2},1032,["class"])])),_:2},1032,["loading"]),e.streaming&&"assistant"===e.role?(T(),z("small",ut," 正在输入... ")):B("",!0),j("section",{class:E(["message-item__content",{"is-user":"user"===e.role},{"is-assistant":"assistant"===e.role}])},["assistant"===e.role?(T(),z("div",mt,[$(O,{"content-class":"text-xs",content:"复制",position:"top"},{default:R((()=>[$(I,{onClick:t=>{pt({text:e.content})},size:"mini",shape:"circle",type:"text"},{default:R((()=>[$(_,{class:"text-base"})])),_:2},1032,["onClick"])])),_:2},1024)])):B("",!0),(T(),K(P,{key:e.content,text:e.content,inversion:"assistant"!==e.role},null,8,["text","inversion"]))],2)],2)))),128))])),_:1},512),$(h,{class:"m-0"}),j("footer",xt,[$(k,{loading:re(t).fetching,class:"footer-spin"},{icon:R((()=>[$(O,{"content-class":"text-xs",content:"停止",position:"top"},{default:R((()=>[$(I,{onClick:c[1]||(c[1]=e=>re(d)?.abort()),shape:"circle",status:"danger"},{default:R((()=>[$(L,{class:"text-lg"})])),_:1})])),_:1})])),default:R((()=>[$(M,{modelValue:re(p),"onUpdate:modelValue":c[2]||(c[2]=e=>de(p)?p.value=e:null),onKeydown:N(F(g,["prevent"]),["enter"]),class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:3,maxRows:5},placeholder:"请输入您的消息..."},null,8,["modelValue","onKeydown"]),$(G,{onClick:u,onSelect:m,type:"primary"},{icon:R((()=>[$(q)])),content:R((()=>[(T(!0),z(Y,null,ue(Object.values(re(ke)),(e=>(T(),K(U,{key:e,value:e},{default:R((()=>[j("div",gt,[j("span",vt,S(e),1),e===re(o).submitKey?(T(),K(D,{key:0,class:"text-primary"})):B("",!0)])])),_:2},1032,["value"])))),128))])),default:R((()=>[$(V,{class:"mr-2"}),W(" 发送 ")])),_:1})])),_:1},8,["loading"])])])])),_:1})],64)}}}))}}}));
