System.register(["./index-legacy-516b571f.js","./index-legacy-2c8b5ef7.js"],(function(e,t){"use strict";var a,o,r,n,l,i,s,c,p,d,u,m,v,g,x,y,h,f,b,w,k,C,z,T,S,$,E,I,R,_,B,j,L,O,P,A,N,F,H,q,M,V,Y,X,D,U,Z,K,W,G,J,Q,ee,te,ae,oe,re,ne,le,ie,se,ce,pe,de,ue,me,ve,ge,xe,ye,he,fe,be,we,ke,Ce,ze,Te,Se,$e,Ee,Ie,Re,_e,Be,je,Le,Oe=document.createElement("style");return Oe.textContent=".arco-textarea-wrapper{display:inline-flex;box-sizing:border-box;color:var(--color-text-1);font-size:14px;background-color:var(--color-fill-2);border:1px solid transparent;border-radius:var(--border-radius-small);cursor:text;transition:color .1s cubic-bezier(0,0,1,1),border-color .1s cubic-bezier(0,0,1,1),background-color .1s cubic-bezier(0,0,1,1);position:relative;display:inline-block;width:100%;padding-right:0;padding-left:0;overflow:hidden}.arco-textarea-wrapper:hover{background-color:var(--color-fill-3);border-color:transparent}.arco-textarea-wrapper:focus-within,.arco-textarea-wrapper.arco-textarea-focus{background-color:var(--color-bg-2);border-color:rgb(var(--primary-6));box-shadow:0 0 0 0 var(--color-primary-light-2)}.arco-textarea-wrapper.arco-textarea-disabled{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent;cursor:not-allowed}.arco-textarea-wrapper.arco-textarea-disabled:hover{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-prefix,.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-suffix{color:inherit}.arco-textarea-wrapper.arco-textarea-error{background-color:var(--color-danger-light-1);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:hover{background-color:var(--color-danger-light-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:focus-within,.arco-textarea-wrapper.arco-textarea-error.arco-textarea-wrapper-focus{background-color:var(--color-bg-2);border-color:rgb(var(--danger-6));box-shadow:0 0 0 0 var(--color-danger-light-2)}.arco-textarea-wrapper .arco-textarea-prefix,.arco-textarea-wrapper .arco-textarea-suffix{display:inline-flex;flex-shrink:0;align-items:center;white-space:nowrap;user-select:none}.arco-textarea-wrapper .arco-textarea-prefix>svg,.arco-textarea-wrapper .arco-textarea-suffix>svg{font-size:14px}.arco-textarea-wrapper .arco-textarea-prefix{padding-right:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix{padding-left:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon{display:inline-flex}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-validating{color:rgb(var(--primary-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-success{color:rgb(var(--success-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-warning{color:rgb(var(--warning-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-error{color:rgb(var(--danger-6))}.arco-textarea-wrapper .arco-textarea-clear-btn{align-self:center;color:var(--color-text-2);font-size:12px;visibility:hidden;cursor:pointer}.arco-textarea-wrapper .arco-textarea-clear-btn>svg{position:relative;transition:color .1s cubic-bezier(0,0,1,1)}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{visibility:visible}.arco-textarea-wrapper:not(.arco-textarea-focus) .arco-textarea-icon-hover:hover:before{background-color:var(--color-fill-4)}.arco-textarea-wrapper .arco-textarea-word-limit{position:absolute;right:10px;bottom:6px;color:var(--color-text-3);font-size:12px;user-select:none}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-word-limit{right:25px}.arco-textarea-wrapper .arco-textarea-clear-btn{position:absolute;top:50%;right:10px;transform:translateY(-50%)}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-clear-btn{right:25px}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{display:block}.arco-textarea-wrapper .arco-textarea-mirror{position:absolute;visibility:hidden}.arco-textarea{width:100%;color:inherit;background:none;border:none;border-radius:0;outline:none;cursor:inherit;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:block;box-sizing:border-box;height:100%;min-height:32px;padding:4px 12px;font-size:14px;line-height:1.5715;vertical-align:top;resize:vertical}.arco-textarea::placeholder{color:var(--color-text-3)}.arco-textarea[disabled]::placeholder{color:var(--color-text-4)}.arco-textarea[disabled]{-webkit-text-fill-color:var(--color-text-4)}.message-content[data-v-cf02b953]{max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important}.arco-avatar{position:relative;display:inline-flex;align-items:center;box-sizing:border-box;width:40px;height:40px;color:var(--color-white);font-size:20px;white-space:nowrap;vertical-align:middle;background-color:var(--color-fill-4)}.arco-avatar-circle{border-radius:var(--border-radius-circle)}.arco-avatar-circle .arco-avatar-image{overflow:hidden;border-radius:var(--border-radius-circle)}.arco-avatar-square{border-radius:var(--border-radius-medium)}.arco-avatar-square .arco-avatar-image{overflow:hidden;border-radius:var(--border-radius-medium)}.arco-avatar-text{position:absolute;left:50%;font-weight:500;line-height:1;transform:translate(-50%);transform-origin:0 center}.arco-avatar-image{display:inline-block;width:100%;height:100%}.arco-avatar-image-icon{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.arco-avatar-image img,.arco-avatar-image picture{width:100%;height:100%}.arco-avatar-trigger-icon-button{position:absolute;right:-4px;bottom:-4px;z-index:1;width:20px;height:20px;color:var(--color-fill-4);font-size:12px;line-height:20px;text-align:center;background-color:var(--color-neutral-2);border-radius:var(--border-radius-circle);transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-avatar-trigger-icon-mask{position:absolute;top:0;left:0;z-index:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:var(--color-white);font-size:16px;background-color:rgba(29,33,41,.6);border-radius:var(--border-radius-medium);opacity:0;transition:all .1s cubic-bezier(0,0,1,1)}.arco-avatar-circle .arco-avatar-trigger-icon-mask{border-radius:var(--border-radius-circle)}.arco-avatar-with-trigger-icon{cursor:pointer}.arco-avatar-with-trigger-icon:hover .arco-avatar-trigger-icon-mask{z-index:2;opacity:1}.arco-avatar-with-trigger-icon:hover .arco-avatar-trigger-icon-button{background-color:var(--color-neutral-3)}.arco-avatar-group{display:inline-block;line-height:0}.arco-avatar-group-max-count-avatar{color:var(--color-white);font-size:20px;cursor:default}.arco-avatar-group .arco-avatar{border:2px solid var(--color-bg-2)}.arco-avatar-group .arco-avatar:not(:first-child){margin-left:-10px}.arco-avatar-group-popover .arco-avatar:not(:first-child){margin-left:4px}.arco-typography{color:var(--color-text-1);line-height:1.5715}h1.arco-typography,h2.arco-typography,h3.arco-typography,h4.arco-typography,h5.arco-typography,h6.arco-typography{margin-top:1em;margin-bottom:.5em;font-weight:500}h1.arco-typography{font-size:36px;line-height:1.23}h2.arco-typography{font-size:32px;line-height:1.25}h3.arco-typography{font-size:28px;line-height:1.29}h4.arco-typography{font-size:24px;line-height:1.33}h5.arco-typography{font-size:20px;line-height:1.4}h6.arco-typography{font-size:16px;line-height:1.5}div.arco-typography,p.arco-typography{margin-top:0;margin-bottom:1em}.arco-typography-primary{color:rgb(var(--primary-6))}.arco-typography-secondary{color:var(--color-text-2)}.arco-typography-success{color:rgb(var(--success-6))}.arco-typography-warning{color:rgb(var(--warning-6))}.arco-typography-danger{color:rgb(var(--danger-6))}.arco-typography-disabled{color:var(--color-text-4);cursor:not-allowed}.arco-typography mark{background-color:rgb(var(--yellow-4))}.arco-typography u{text-decoration:underline}.arco-typography del{text-decoration:line-through}.arco-typography b{font-weight:500}.arco-typography code{margin:0 2px;padding:2px 8px;color:var(--color-text-2);font-size:85%;background-color:var(--color-neutral-2);border:1px solid var(--color-neutral-3);border-radius:2px}.arco-typography blockquote{margin:0 0 1em;padding-left:8px;background-color:var(--color-bg-2);border-left:2px solid var(--color-neutral-6)}.arco-typography ol,.arco-typography ul{margin:0;padding:0}.arco-typography ul li,.arco-typography ol li{margin-left:20px}.arco-typography ul{list-style:circle}.arco-typography-spacing-close{line-height:1.3}.arco-typography-operation-copy,.arco-typography-operation-copied{margin-left:2px;padding:2px}.arco-typography-operation-copy{color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-copy:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-copied{color:rgb(var(--success-6))}.arco-typography-operation-edit{margin-left:2px;padding:2px;color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-edit:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-expand{margin:0 4px;color:rgb(var(--primary-6));cursor:pointer}.arco-typography-operation-expand:hover{color:rgb(var(--primary-5))}.arco-typography-edit-content{position:relative;left:-13px;margin-top:-5px;margin-right:-13px;margin-bottom:calc(1em - 5px)}.arco-typography-css-operation{margin-top:-1em;margin-bottom:1em;text-align:right}.chat-wrapper{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-flex:1!important;-ms-flex:1 1 0%!important;-webkit-flex:1 1 0%!important;flex:1 1 0%!important;height:100%!important;overflow:hidden!important}.chat-wrapper .message-item{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:start!important;-ms-flex-align:start!important;-webkit-align-items:flex-start!important;align-items:flex-start!important;justify-items:start!important;padding-left:0!important;grid-gap:.5rem!important;gap:.5rem!important}.chat-wrapper .message-item.is-request{-webkit-box-align:end!important;-ms-flex-align:end!important;-webkit-align-items:flex-end!important;align-items:flex-end!important;margin-left:auto!important;max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important;padding-left:2.5rem!important}.chat-wrapper .message-item .message-item__content{border-radius:.5rem!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;font-size:.875rem!important;line-height:1.25rem!important;max-width:100%!important;min-width:18rem!important;padding:.75rem 1rem!important;position:relative!important}.chat-wrapper .message-item .message-item__content.is-user{--tw-bg-opacity: 1 !important;background-color:rgba(16,163,127,var(--tw-bg-opacity))!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;--tw-text-opacity: 1 !important;color:rgba(255,255,255,var(--tw-text-opacity))!important}.chat-wrapper .message-item .message-item__content.is-assistant{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important}.dark .chat-wrapper .message-item .message-item__content.is-assistant{--tw-bg-opacity: 1 !important;background-color:rgba(35,35,36,var(--tw-bg-opacity))!important}.chat-wrapper .message-item .message-item__actions{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-align:center!important;-ms-flex-align:center!important;-webkit-align-items:center!important;align-items:center!important;opacity:0!important;padding-left:1rem!important;position:absolute!important;top:-2.25rem!important;right:2rem!important;-webkit-column-gap:.25rem!important;-moz-column-gap:.25rem!important;grid-column-gap:.25rem!important;column-gap:.25rem!important;-webkit-transition-property:all!important;-o-transition-property:all!important;transition-property:all!important;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-o-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-webkit-transition-duration:.15s!important;-o-transition-duration:.15s!important;transition-duration:.15s!important;-webkit-transition-duration:.5s!important;-o-transition-duration:.5s!important;transition-duration:.5s!important}.chat-wrapper .message-item:hover .message-item__actions{opacity:1!important;right:0px!important}.chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-align:end!important;-ms-flex-align:end!important;-webkit-align-items:flex-end!important;align-items:flex-end!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;padding:.75rem 1rem .5rem .5rem!important;position:relative!important;width:100%!important}.dark .chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(23,23,26,var(--tw-bg-opacity))!important}.chat-footer .stop-receiving{position:absolute!important;top:-3rem!important;left:50%!important;--tw-translate-x: 0 !important;--tw-translate-y: 0 !important;--tw-translate-z: 0 !important;--tw-rotate: 0 !important;--tw-rotate-x: 0 !important;--tw-rotate-y: 0 !important;--tw-rotate-z: 0 !important;--tw-skew-x: 0 !important;--tw-skew-y: 0 !important;--tw-scale-x: 1 !important;--tw-scale-y: 1 !important;--tw-scale-z: 1 !important;-webkit-transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) translateZ(var(--tw-translate-z)) rotate(var(--tw-rotate)) rotateX(var(--tw-rotate-x)) rotateY(var(--tw-rotate-y)) rotateZ(var(--tw-rotate-z)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y)) scaleZ(var(--tw-scale-z))!important;-ms-transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) translateZ(var(--tw-translate-z)) rotate(var(--tw-rotate)) rotateX(var(--tw-rotate-x)) rotateY(var(--tw-rotate-y)) rotateZ(var(--tw-rotate-z)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y)) scaleZ(var(--tw-scale-z))!important;transform:translate(var(--tw-translate-x)) translateY(var(--tw-translate-y)) translateZ(var(--tw-translate-z)) rotate(var(--tw-rotate)) rotateX(var(--tw-rotate-x)) rotateY(var(--tw-rotate-y)) rotate(var(--tw-rotate-z)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y)) scaleZ(var(--tw-scale-z))!important;--tw-translate-x: -50% !important}.date-time{color:rgb(var(--gray-8))}\n",document.head.appendChild(Oe),{setters:[e=>{a=e.g,o=e.R,r=e.I,n=e.h,l=e.t,i=e.i,s=e.j,c=e.r,p=e.k,d=e.u,u=e.l,m=e.m,v=e.n,g=e.q,x=e.s,y=e.v,h=e.o,f=e.x,b=e.b,w=e.w,k=e.a,C=e.y,z=e.F,T=e.z,S=e.A,$=e.C,E=e.D,I=e.E,R=e.G,_=e.P,B=e.d,j=e.H,L=e.J,O=e.K,P=e.L,A=e.M,N=e.N,F=e.O,H=e.Q,q=e.T,M=e.U,V=e.V,Y=e.W,X=e.X,D=e.Y,U=e.Z,Z=e.$,K=e.a0,W=e.a1,G=e.a2,J=e.a3,Q=e.a4,ee=e.a5,te=e.a6,ae=e.c,oe=e.a7,re=e.a8,ne=e.a9,le=e.aa,ie=e.ab,se=e.ac,ce=e.ad,pe=e.ae,de=e.af,ue=e.ag,me=e._,ve=e.ah,ge=e.ai,xe=e.aj,ye=e.ak,he=e.al,fe=e.am,be=e.an,we=e.ao,ke=e.ap,Ce=e.aq,ze=e.B,Te=e.S,Se=e.ar,$e=e.as,Ee=e.at,Ie=e.au,Re=e.av},e=>{_e=e.M,Be=e.H,je=e.m,Le=e.a}],execute:function(){const t=Symbol("ArcoAvatarGroup");var Oe=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,Fe=(e,t,a)=>t in e?Oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,He=(e,t)=>{for(var a in t||(t={}))Ae.call(t,a)&&Fe(e,a,t[a]);if(Pe)for(var a of Pe(t))Ne.call(t,a)&&Fe(e,a,t[a]);return e};const qe=a({name:"Avatar",components:{ResizeObserver:o,IconImageClose:r,IconLoading:n},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:a,emit:o,attrs:r}){const{shape:n,size:g,autoFixFontSize:y,triggerType:h,triggerIconStyle:f}=l(e),b=i("avatar"),w=s(t,void 0),k=c(),C=c(),z=p((()=>{var e;return null!=(e=null==w?void 0:w.shape)?e:n.value})),T=p((()=>{var e;return null!=(e=null==w?void 0:w.size)?e:g.value})),S=p((()=>{var e;return null!=(e=null==w?void 0:w.autoFixFontSize)?e:y.value})),$=c(!1),E=c(!1),I=c(!0),R=c(!1),_=w?d({itemRef:k,selector:`.${b}`}).computedIndex:c(-1),B=p((()=>{var e;const t=u(T.value)?{width:`${T.value}px`,height:`${T.value}px`,fontSize:T.value/2+"px"}:{};return w&&(t.zIndex=w.zIndexAscend?_.value+1:w.total-_.value,t.marginLeft=0!==_.value?`-${(null!=(e=T.value)?e:40)/4}px`:"0"),t})),j=Me({triggerIconStyle:null==f?void 0:f.value,inlineStyle:r.style,triggerType:h.value}),L=()=>{$.value||e.imageUrl||x((()=>{var e;if(!C.value||!k.value)return;const t=C.value.clientWidth,a=null!=(e=T.value)?e:k.value.offsetWidth,o=a/(t+8);a&&o<1&&(C.value.style.transform=`scale(${o}) translateX(-50%)`),I.value=!0}))};m((()=>{var e;(null==(e=C.value)?void 0:e.firstElementChild)&&["IMG","PICTURE"].includes(C.value.firstElementChild.tagName)&&($.value=!0),S.value&&L()})),v(g,(()=>{S.value&&L()}));const O=p((()=>[b,`${b}-${z.value}`])),P=p((()=>$.value||e.imageUrl?`${b}-image`:`${b}-text`));return{prefixCls:b,itemRef:k,cls:O,outerStyle:B,wrapperRef:C,wrapperCls:P,computedTriggerIconStyle:j,isImage:$,shouldLoad:I,isLoaded:R,hasError:E,onClick:e=>{o("click",e)},handleResize:()=>{S.value&&L()},handleImgLoad:()=>{R.value=!0,o("load")},handleImgError:()=>{E.value=!0,o("error")}}}}),Me=({triggerType:e,inlineStyle:t={},triggerIconStyle:a={}})=>{let o={};return"button"===e&&(!a||a&&!a.color)&&t&&t.backgroundColor&&(o={color:t.backgroundColor}),He(He({},a),o)},Ve=["src"];var Ye=g(qe,[["render",function(e,t,a,o,r,n){const l=y("IconImageClose"),i=y("IconLoading"),s=y("resize-observer");return h(),f("div",{ref:"itemRef",style:$(e.outerStyle),class:C([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:Boolean(e.$slots["trigger-icon"])}]),onClick:t[2]||(t[2]=(...t)=>e.onClick&&e.onClick(...t))},[b(s,{onResize:e.handleResize},{default:w((()=>[k("span",{ref:"wrapperRef",class:C(e.wrapperCls)},[e.imageUrl?(h(),f(z,{key:0},[e.hasError?T(e.$slots,"error",{key:0},(()=>[k("div",{class:C(`${e.prefixCls}-image-icon`)},[b(l)],2)])):S("v-if",!0),e.hasError||!e.shouldLoad||e.isLoaded?S("v-if",!0):T(e.$slots,"default",{key:1},(()=>[k("div",{class:C(`${e.prefixCls}-image-icon`)},[b(i)],2)])),!e.hasError&&e.shouldLoad?(h(),f("img",{key:2,src:e.imageUrl,style:$({width:e.size+"px",height:e.size+"px"}),alt:"avatar",onLoad:t[0]||(t[0]=(...t)=>e.handleImgLoad&&e.handleImgLoad(...t)),onError:t[1]||(t[1]=(...t)=>e.handleImgError&&e.handleImgError(...t))},null,44,Ve)):S("v-if",!0)],64)):T(e.$slots,"default",{key:1})],2)])),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(h(),f("div",{key:0,class:C(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:$(e.computedTriggerIconStyle)},[T(e.$slots,"trigger-icon")],6)):S("v-if",!0)],6)}]]);const Xe=a({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:a}){const{shape:o,size:r,autoFixFontSize:n,zIndexAscend:s}=l(e),p=i("avatar-group"),d=c(0);return E(t,I({shape:o,size:r,autoFixFontSize:n,zIndexAscend:s,total:d})),()=>{var t,o;const r=R(null!=(o=null==(t=a.default)?void 0:t.call(a))?o:[]),n=e.maxCount>0?r.slice(0,e.maxCount):r,l=e.maxCount>0?r.slice(e.maxCount):[];return d.value!==n.length&&(d.value=n.length),b("div",{class:p},[n,l.length>0&&b(_,e.maxPopoverTriggerProps,{default:()=>[b(Ye,{class:`${p}-max-count-avatar`,style:e.maxStyle},{default:()=>[B("+"),l.length]})],content:()=>b("div",null,[l])})])}}}),De=Object.assign(Ye,{Group:Xe,install:(e,t)=>{j(e,t);const a=L(t);e.component(a+Ye.name,Ye),e.component(a+Xe.name,Xe)}}),Ue=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],Ze=a({name:"Textarea",components:{ResizeObserver:O,IconHover:P,IconClose:A},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:a}){const{disabled:o,error:r,modelValue:n}=l(e),s=i("textarea"),{mergedDisabled:d,mergedError:u,eventHandlers:g}=N({disabled:o,error:r}),y=c(),h=c(),f=c(),b=c(),w=c(e.defaultValue),k=p((()=>{var e;return null!=(e=n.value)?e:w.value})),[C,z]=F(y);v(n,(e=>{(H(e)||q(e))&&(w.value="")}));const T=p((()=>M(e.maxLength)&&Boolean(e.maxLength.errorOnly))),S=p((()=>M(e.maxLength)?e.maxLength.length:e.maxLength)),$=t=>{var a;return V(e.wordLength)?e.wordLength(t):null!=(a=t.length)?a:0},E=p((()=>$(k.value))),I=p((()=>u.value||Boolean(S.value&&T.value&&E.value>S.value))),R=c(!1),_=c(!1),B=p((()=>e.allowClear&&!d.value&&k.value)),j=c(!1),L=c(""),O=()=>{C(),x((()=>{y.value&&k.value!==y.value.value&&(y.value.value=k.value,z())}))},P=(a,o=!0)=>{var r,n;S.value&&!T.value&&$(a)>S.value&&(a=null!=(n=null==(r=e.wordSlice)?void 0:r.call(e,a,S.value))?n:a.slice(0,S.value)),w.value=a,o&&t("update:modelValue",a),O()};let A=k.value;const U=(e,a)=>{var o,r;e!==A&&(A=e,t("change",e,a),null==(r=null==(o=g.value)?void 0:o.onChange)||r.call(o,a))};v(n,(e=>{e!==k.value&&P(null!=e?e:"",!1)}));const Z=p((()=>[`${s}-wrapper`,{[`${s}-focus`]:_.value,[`${s}-disabled`]:d.value,[`${s}-error`]:I.value,[`${s}-scroll`]:R.value}]));let K;const W=c(0),G=c(0),J=p((()=>M(e.autoSize)&&e.autoSize.minRows?e.autoSize.minRows*W.value+G.value:0)),Q=p((()=>M(e.autoSize)&&e.autoSize.maxRows?e.autoSize.maxRows*W.value+G.value:0)),ee=()=>{const e=(e=>{const t={};return Ue.forEach((a=>{t[a]=e.getPropertyValue(a)})),t})(K);W.value=Number.parseInt(e["line-height"]||0,10),G.value=2*Number.parseInt(e["border-width"]||0,10)+Number.parseInt(e["padding-top"]||0,10)+Number.parseInt(e["padding-bottom"]||0,10),b.value=e,x((()=>{var e;const t=null==(e=f.value)?void 0:e.offsetHeight;let a=null!=t?t:0,o="hidden";J.value&&a<J.value&&(a=J.value),Q.value&&a>Q.value&&(a=Q.value,o="auto"),h.value={height:`${a}px`,resize:"none",overflow:o}}))};m((()=>{y.value&&(K=window.getComputedStyle(y.value),e.autoSize&&ee()),te()}));const te=()=>{y.value&&(y.value.scrollHeight>y.value.offsetHeight?R.value||(R.value=!0):R.value&&(R.value=!1))};return v(k,(()=>{e.autoSize&&f.value&&ee(),te()})),{prefixCls:s,wrapperCls:Z,textareaRef:y,textareaStyle:h,mirrorRef:f,mirrorStyle:b,computedValue:k,showClearBtn:B,valueLength:E,computedMaxLength:S,mergedDisabled:d,getWrapperAttrs:e=>Y(a,X),getTextareaAttrs:e=>D(a,X),handleInput:e=>{var a,o;const{value:r}=e.target;if(j.value)L.value=r;else{if(S.value&&!T.value&&k.value.length>=S.value&&$(r)>S.value&&"insertText"===e.inputType)return void O();t("input",r,e),P(r),null==(o=null==(a=g.value)?void 0:a.onInput)||o.call(a,e)}},handleFocus:e=>{var a,o;_.value=!0,A=k.value,t("focus",e),null==(o=null==(a=g.value)?void 0:a.onFocus)||o.call(a,e)},handleBlur:e=>{var a,o;_.value=!1,t("blur",e),null==(o=null==(a=g.value)?void 0:a.onBlur)||o.call(a,e),U(k.value,e)},handleComposition:e=>{var a,o;const{value:r}=e.target;if("compositionend"===e.type){if(j.value=!1,L.value="",S.value&&!T.value&&k.value.length>=S.value&&$(r)>S.value)return void O();t("input",r,e),P(r),null==(o=null==(a=g.value)?void 0:a.onInput)||o.call(a,e)}else j.value=!0},handleClear:e=>{P(""),U("",e),t("clear",e)},handleResize:()=>{e.autoSize&&f.value&&ee(),te()},handleMousedown:e=>{y.value&&e.target!==y.value&&(e.preventDefault(),y.value.focus())}}},methods:{focus(){var e;null==(e=this.$refs.textareaRef)||e.focus()},blur(){var e;null==(e=this.$refs.textareaRef)||e.blur()}}}),Ke=["disabled","value","placeholder"];var We=g(Ze,[["render",function(e,t,a,o,r,n){const l=y("resize-observer"),i=y("icon-close"),s=y("icon-hover");return h(),f("div",Z(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...t)=>e.handleMousedown&&e.handleMousedown(...t))}),[e.autoSize?(h(),f("div",{key:0,ref:"mirrorRef",class:C(`${e.prefixCls}-mirror`),style:$(e.mirrorStyle)},U(`${e.computedValue}\n`),7)):S("v-if",!0),b(l,{onResize:e.handleResize},{default:w((()=>[k("textarea",Z({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onCompositionstart:t[3]||(t[3]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionupdate:t[4]||(t[4]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionend:t[5]||(t[5]=(...t)=>e.handleComposition&&e.handleComposition(...t))}),null,16,Ke)])),_:1},8,["onResize"]),T(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(h(),f("div",{key:1,class:C(`${e.prefixCls}-word-limit`)},U(e.valueLength)+"/"+U(e.computedMaxLength),3)):S("v-if",!0),e.showClearBtn?(h(),f("div",{key:2,class:C(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...t)=>e.handleClear&&e.handleClear(...t))},[b(s,null,{default:w((()=>[b(i)])),_:1})],2)):S("v-if",!0)],16)}]]);const Ge=Object.assign(We,{install:(e,t)=>{j(e,t);const a=L(t);e.component(a+We.name,We)}}),Je=a({name:"TypographyEditContent",components:{Input:K},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const a=[`${i("typography")}-edit-content`],o=c();function r(){t("end")}return m((()=>{if(!o.value||!o.value.$el)return;const e=o.value.$el.querySelector("input");if(!e)return;e.focus&&e.focus();const{length:t}=e.value;e.setSelectionRange(t,t)})),{classNames:a,inputRef:o,onBlur:r,onChange:function(e){t("update:text",e),t("change",e)},onEnd:r}}});var Qe=g(Je,[["render",function(e,t,a,o,r,n){const l=y("Input");return h(),f("div",{class:C(e.classNames)},[b(l,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:W(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}]]);const et=a({name:"TypographyOperations",components:{Tooltip:G,IconCheckCircleFill:J,IconCopy:Q,IconEdit:ee},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const a=i("typography"),o=p((()=>e.forceRenderExpand||e.expandable&&e.isEllipsis)),{t:r}=te();return{prefixCls:a,showExpand:o,t:r,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});var tt=g(et,[["render",function(e,t,a,o,r,n){const l=y("IconEdit"),i=y("Tooltip"),s=y("IconCheckCircleFill"),c=y("IconCopy");return h(),f(z,null,[e.editable?(h(),ae(i,Z({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:w((()=>[k("span",{class:C(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=oe(((...t)=>e.onEditClick&&e.onEditClick(...t)),["stop"]))},[b(l)],2)])),_:1},16,["content"])):S("v-if",!0),e.copyable?(h(),ae(i,re(Z({key:1},e.copyTooltipProps)),{content:w((()=>[T(e.$slots,"copy-tooltip",{copied:e.isCopied},(()=>[B(U(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)]))])),default:w((()=>[k("span",{class:C({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=oe(((...t)=>e.onCopyClick&&e.onCopyClick(...t)),["stop"]))},[T(e.$slots,"copy-icon",{copied:e.isCopied},(()=>[e.isCopied?(h(),ae(s,{key:0})):(h(),ae(c,{key:1}))]))],2)])),_:3},16)):S("v-if",!0),e.showExpand?(h(),f("a",{key:2,class:C(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=oe(((...t)=>e.onExpandClick&&e.onExpandClick(...t)),["stop"]))},[T(e.$slots,"expand-node",{expanded:e.expanded},(()=>[B(U(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)]))],2)):S("v-if",!0)],64)}]]);let at;function ot(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var rt=(e,t,a,o)=>{at||(at=document.createElement("div"),document.body.appendChild(at));const{rows:r,suffix:n,ellipsisStr:l}=t,i=window.getComputedStyle(e),s=(c=i,Array.prototype.slice.apply(c).map((e=>`${e}: ${c.getPropertyValue(e)};`)).join(""));var c;const p=ot(i.lineHeight),d=Math.round(p*r+ot(i.paddingTop)+ot(i.paddingBottom));at.setAttribute("style",s),at.setAttribute("aria-hidden","true"),at.style.height="auto",at.style.minHeight="auto",at.style.maxHeight="auto",at.style.position="fixed",at.style.left="0",at.style.top="-99999999px",at.style.zIndex="-200",at.style.whiteSpace="normal";const u=ne({render:()=>b("span",null,[a])});u.mount(at);const m=Array.prototype.slice.apply(at.childNodes[0].cloneNode(!0).childNodes);u.unmount(),at.innerHTML="";const v=document.createTextNode(`${l}${n}`);at.appendChild(v),m.forEach((e=>{at.appendChild(e)}));const g=document.createTextNode(o);function x(){return at.offsetHeight<=d}return at.insertBefore(g,v),x()?{ellipsis:!1,text:o}:(function e(t,a=0,r=o.length,n=0){const l=Math.floor((a+r)/2),i=o.slice(0,l);if(t.textContent=i,a>=r-1)for(let s=r;s>=a;s-=1){const e=o.slice(0,s);if(t.textContent=e,x()||!e)return}x()?e(t,l,r,l):e(t,a,l,n)}(g),{text:g.textContent,ellipsis:!0})};let nt;var lt=Object.defineProperty,it=Object.defineProperties,st=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ut=(e,t,a)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;function mt(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!pe(e)}function vt(e,t){const{mark:a}=e,o=function(e){const{bold:t,mark:a,underline:o,delete:r,code:n}=e,l=[];return t&&l.push("b"),o&&l.push("u"),r&&l.push("del"),n&&l.push("code"),a&&l.push("mark"),l}(e),r=M(a)&&a.color?{backgroundColor:a.color}:{};return o.reduce(((e,t)=>b(t,"mark"===t?{style:r}:{},mt(e)?e:{default:()=>[e]})),t)}function gt(e){const t=!!e.showTooltip,a=M(e.showTooltip)&&"popover"===e.showTooltip.type?_:G,o=M(e.showTooltip)&&e.showTooltip.props||{};return r=((e,t)=>{for(var a in t||(t={}))pt.call(t,a)&&ut(e,a,t[a]);if(ct)for(var a of ct(t))dt.call(t,a)&&ut(e,a,t[a]);return e})({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},Y(e,["showTooltip"])),it(r,st({showTooltip:t,TooltipComponent:a,tooltipProps:o}));var r}var xt=a({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:a,attrs:o}){const{editing:r,defaultEditing:n,ellipsis:s,copyable:d,editable:u,copyText:g,editText:x,copyDelay:y,component:h}=l(e),f=i("typography"),w=p((()=>[f,{[`${f}-${e.type}`]:e.type,[`${f}-disabled`]:e.disabled}])),k=c(),C=c(""),[z,T]=le(n.value,I({value:r})),S=p((()=>u.value&&z.value));function $(){a("update:editing",!0),a("editStart"),T(!0)}function E(){z.value&&(a("update:editing",!1),a("editEnd"),T(!1))}const R=c(!1);let _=null;function B(){var e;const t=null!=(e=g.value)?e:C.value;(async e=>{var t;if(null==(t=navigator.clipboard)?void 0:t.writeText)try{return void(await navigator.clipboard.writeText(e))}catch(n){console.error(null!=n?n:new DOMException("The request is not allowed","NotAllowedError"))}const a=document.createElement("span");a.textContent=e,a.style.whiteSpace="pre",document.body.appendChild(a);const o=window.getSelection(),r=window.document.createRange();null==o||o.removeAllRanges(),r.selectNode(a),null==o||o.addRange(r);try{window.document.execCommand("copy")}catch(n){console.error(`execCommand Error: ${n}`)}null==o||o.removeAllRanges(),window.document.body.removeChild(a)})(t||""),R.value=!0,a("copy",t),_=setTimeout((()=>{R.value=!1}),y.value)}ie((()=>{_&&clearTimeout(_),_=null}));const j=c(!1),L=c(!1),P=c(""),A=p((()=>gt(M(s.value)&&s.value||{})));let N=null;function F(){const e=!L.value;L.value=e,a("expand",e)}function H(a=!1){return A.value.css?b(tt,{editable:u.value,copyable:d.value,expandable:A.value.expandable,isCopied:R.value,isEllipsis:D.value,expanded:L.value,forceRenderExpand:a||L.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:$,onCopy:B,onExpand:F},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):b(tt,{editable:u.value,copyable:d.value,expandable:A.value.expandable,isCopied:R.value,isEllipsis:j.value,expanded:L.value,forceRenderExpand:a,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:$,onCopy:B,onExpand:F},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function q(){s.value&&!L.value&&(se(N),N=de((()=>{!function(){if(!k.value)return;const{ellipsis:e,text:t}=rt(k.value,A.value,H(!!A.value.expandable),C.value);j.value!==e&&(j.value=e,A.value.css||a("ellipsis",e)),P.value!==t&&(P.value=t||"")}()})))}ie((()=>{se(N)})),v((()=>A.value.rows),(()=>{q()})),v(s,(e=>{e?q():j.value=!1}));let V=[];const Y=()=>{if(s.value||d.value||u.value){const e=function(e){if(!e)return"";nt||(nt=document.createElement("div"),nt.setAttribute("aria-hidden","true"),document.body.appendChild(nt));const t=ne({render:()=>b("div",null,[e])});t.mount(nt);const a=nt.innerText;return t.unmount(),a}(V);e!==C.value&&(C.value=e,q())}};m(Y),ce(Y);const X=c(),D=c(!1),U=()=>{if(k.value&&X.value){const e=X.value.offsetHeight>k.value.offsetHeight;e!==D.value&&(D.value=e,a("ellipsis",e))}},K=p((()=>L.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":A.value.rows,"-webkit-box-orient":"vertical"}));return()=>{var r,n;if(V=(null==(r=t.default)?void 0:r.call(t))||[],S.value){const e=null!=(n=x.value)?n:C.value;return b(Qe,{text:e,onChange:t=>{t!==e&&function(e){a("update:editText",e),a("change",e)}(t)},onEnd:E},null)}const{suffix:l,ellipsisStr:i,showTooltip:s,tooltipProps:c,TooltipComponent:p}=A.value,d=j.value&&!L.value,u=d&&!s?{title:C.value}:{},m=h.value;if(A.value.css){const t=vt(e,V),a=b(m,Z({class:w.value,ref:k,style:K.value},u,o),{default:()=>[b("span",{ref:X},[t])]});return D.value?b(p,Z(c,{onResize:()=>U()}),{default:()=>[a],content:()=>C.value}):b(O,{onResize:()=>{U()}},mt(a)?a:{default:()=>[a]})}const v=vt(e,d?P.value:V);return b(O,{onResize:()=>q()},{default:()=>[b(m,Z({class:w.value,ref:k},u,o),{default:()=>[d&&s?b(p,c,{default:()=>[b("span",null,[v])],content:()=>C.value}):v,d?i:null,l,H()]})]})}}}),yt=a({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:a}=l(e),o=i("typography");return{component:p((()=>(null==t?void 0:t.value)?"blockquote":"div")),classNames:p((()=>[{[`${o}-spacing-close`]:"close"===(null==a?void 0:a.value)}]))}},render(){const{component:e,classNames:t}=this;return b(xt,Z({class:t},this.$attrs,{component:e}),this.$slots)}});const ht={key:0,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},ft={key:0},bt=["innerHTML"],wt=["textContent"],kt=["textContent"],Ct=a({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,a=c(),o=new _e({linkify:!0,highlight(e,t){if(t&&Be.getLanguage(t)){const a=t??"";return l(Be.highlight(e,{language:a}).value,a)}return l(Be.highlightAuto(e).value,"")}});o.use(je,{attrs:{target:"_blank",rel:"noopener"}}),o.use(Le,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const r=p((()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}])),n=p((()=>{const e=(t.text??"").replace(/\n+$/g,"");return t.asRawText||t.inversion?e:o.render(e)}));function l(e,t){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${t}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${t}">${e}</code></pre>`}return ce((()=>{x((()=>{a.value&&Be.highlightBlock(a.value)}))})),(t,o)=>(h(),f("div",{class:C(ue(r))},[e.loading?(h(),f("span",ht)):(h(),f("div",{key:1,ref_key:"textRef",ref:a,class:"leading-relaxed break-words"},[e.inversion?(h(),f("div",{key:1,class:"whitespace-pre-wrap",textContent:U(ue(n))},null,8,kt)):(h(),f("div",ft,[e.asRawText?(h(),f("div",{key:1,class:"whitespace-pre-wrap",textContent:U(ue(n))},null,8,wt)):(h(),f("div",{key:0,class:"markdown-body",innerHTML:ue(n)},null,8,bt))]))],512))],2))}}),zt=me(Ct,[["__scopeId","data-v-cf02b953"]]);function Tt(e){const t={origin:!0,...e};let a;a=t.origin?document.createElement("textarea"):document.createElement("input"),a.setAttribute("readonly","readonly"),a.value=t.text,document.body.appendChild(a),a.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(a)}function St(){function e(){document.querySelectorAll(".code-block-wrapper").forEach((e=>{const t=e.querySelector(".code-block-header__copy"),a=e.querySelector(".code-block-body");t&&a&&t.addEventListener("click",(()=>{navigator.clipboard?.writeText?(navigator.clipboard.writeText(a.textContent??""),ve.clear(),ve.success("复制成功")):(Tt({text:a.textContent??"",origin:!0}),ve.clear(),ve.success("复制成功"))}))}))}e(),m((()=>e())),ce((()=>e()))}const $t={key:0,class:"flex-1"},Et={class:"chat-wrapper"},It=["src"],Rt={class:"date-time"},_t={key:0,class:"text-info"},Bt={key:0,class:"message-item__actions"},jt={class:"chat-footer"};e("default",a({__name:"ChatView",setup(e){St();const t=ge(),a=xe(),o=p((()=>t.session)),{isMobileScreen:r}=ye(),n=c(!1),l={user:Ee,assistant:"/assets/openai-white-1b79b841.svg"},i=c(),s=c("新的聊天");he((()=>{s.value=t.session?.topic||"新的聊天"})),v((()=>t.currentChat),(()=>{x((()=>{i.value?.scrollTop((i.value?.containerRef?.scrollHeight??0)-200)}))}));const d=c(""),u=()=>{if(e=d.value,/^[\s\n\r]*$/.test(e))return ve.clear(),void ve.error("请输入消息内容");var e;n.value=!1,t.sendMessageAction(d.value,(e=>{n.value||i.value?.scrollTop((i.value?.containerRef?.scrollHeight??0)-200),e&&x((()=>{St()}))})),d.value=""},g=e=>{e.deltaY<10&&(n.value=!0)};m((()=>{x((()=>{i.value?.scrollTop((i.value?.containerRef?.scrollHeight??0)-200),i.value?.$el.querySelector(".arco-scrollbar-container").addEventListener("wheel",g)}))}));const T=e=>{(e?.target?.scrollTop||0)+(e?.target?.offsetHeight||0)>=(e?.target?.scrollHeight||0)-70&&(n.value=!1)};ie((()=>{t.abortController?.abort&&t.abortController?.abort(),i.value?.$el.querySelector(".arco-scrollbar-container").removeEventListener("wheel",g)}));const $=()=>{t.handleChangeSessionTopicAction(s.value)},E=e=>{r.value||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},I=p((()=>{let e="请输入您的消息";return r.value||(e+=`，${a.submitKey} 发送，${a.submitKey===Ie.Enter?Ie.ShiftEnter:Ie.Enter} 换行`),e}));return(e,a)=>{const c=yt,p=ke,m=Ce,v=De,g=Re,x=y("icon-copy"),R=ze,_=G,j=y("icon-sync"),L=zt,O=Te,P=y("icon-record-stop"),A=Ge,N=Se,F=fe("date-time");return h(),f(z,null,[b(p,{class:"h-14 px-4 flex items-center gap-x-3 bg-white dark:bg-dark"},{default:w((()=>[k("div",{class:C(["flex flex-col editable-title__wrapper",{"is-mobile":ue(r)}])},[b(c,{class:"m-0",editable:"",editText:ue(s),"onUpdate:editText":a[0]||(a[0]=e=>be(s)?s.value=e:null),onEditEnd:$},{default:w((()=>[B(U(ue(s)),1)])),_:1},8,["editText"])],2),ue(r)?S("",!0):(h(),f("i",$t))])),_:1}),b(m,{class:"m-0"}),b(N,{class:"flex flex-col flex-1 overflow-hidden"},{default:w((()=>[k("main",Et,[b(O,{ref_key:"scrollbarRef",ref:i,onScroll:T,"outer-style":"flex: 1; overflow: hidden; ",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2 pb-20"},{default:w((()=>[(h(!0),f(z,null,we(ue(o)?.messages??[],((e,a)=>(h(),f("section",{key:e.id,class:C(["message-item",["assistant"===e.role?"is-reply":"is-request",ue(r)?"max-w-full":"max-w-4/5"]])},[k("div",{class:C(["flex items-center gap-x-4",{"flex-row-reverse":"assistant"!==e.role}])},[b(g,{loading:e.streaming&&"assistant"===e.role},{default:w((()=>[b(v,{size:32,class:C("assistant"===e.role?"bg-primary p-2":"bg-success")},{default:w((()=>[k("img",{src:l[e.role]??""},null,8,It)])),_:2},1032,["class"])])),_:2},1032,["loading"]),$e((h(),f("small",Rt,[B(U(e.date),1)])),[[F,e.date]])],2),e.streaming&&"assistant"===e.role?(h(),f("small",_t," 正在输入... ")):S("",!0),k("section",{class:C(["message-item__content",{"is-user":"user"===e.role},{"is-assistant":"assistant"===e.role}])},["assistant"===e.role?(h(),f("div",Bt,[b(_,{"content-class":"text-xs",content:"复制",position:"top"},{default:w((()=>[b(R,{onClick:t=>(Tt({text:e.content}),ve.clear(),void ve.success("复制成功")),size:"mini",shape:"circle",type:"text"},{default:w((()=>[b(x,{class:"text-base"})])),_:2},1032,["onClick"])])),_:2},1024),b(_,{"content-class":"text-xs",content:"重试",position:"top"},{default:w((()=>[b(R,{onClick:e=>(e=>{n.value=!1,t.messageRetryAction(e,(()=>{n.value||i.value?.scrollTop((i.value?.containerRef?.scrollHeight??0)-200)}))})(a),size:"mini",shape:"circle",type:"text"},{default:w((()=>[b(j,{class:"text-base"})])),_:2},1032,["onClick"])])),_:2},1024)])):S("",!0),(h(),ae(L,{key:e.content,text:e.content,inversion:"assistant"!==e.role},null,8,["text","inversion"]))],2)],2)))),128))])),_:1},512),b(m,{class:"m-0"}),k("footer",jt,[ue(t).fetching?(h(),ae(R,{key:0,onClick:a[1]||(a[1]=e=>ue(t).abortController?.abort()),shape:"round",status:"danger",class:"stop-receiving"},{default:w((()=>[b(P,{class:"text-lg mr-2"}),B(" 停止 ")])),_:1})):S("",!0),b(A,{modelValue:ue(d),"onUpdate:modelValue":a[2]||(a[2]=e=>be(d)?d.value=e:null),onKeypress:E,class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:ue(r)?1:3,maxRows:6},placeholder:ue(I)},null,8,["modelValue","auto-size","placeholder"]),ue(r)&&ue(d).trim().length>0?(h(),ae(R,{key:1,size:"medium",class:"rounded text-xs",onClick:u,type:"primary"},{default:w((()=>[B(" 发送 ")])),_:1})):S("",!0)])])])),_:1})],64)}}}))}}}));
