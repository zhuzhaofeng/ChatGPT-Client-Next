System.register(["./index-legacy-25e199fd.js","./index-legacy-2c8b5ef7.js"],(function(e,t){"use strict";var o,a,r,n,i,l,p,c,s,d,u,m,x,g,v,y,b,h,f,w,k,C,T,z,E,S,_,$,B,R,j,I,O,P,L,A,H,N,M,q,V,D,F,K,W,U,Y,G,J,Q,X,Z,ee,te,oe,ae,re,ne,ie,le,pe,ce,se,de,ue,me,xe,ge,ve,ye,be,he,fe,we,ke,Ce,Te,ze,Ee,Se,_e,$e=document.createElement("style");return $e.textContent=".arco-textarea-wrapper{display:inline-flex;box-sizing:border-box;color:var(--color-text-1);font-size:14px;background-color:var(--color-fill-2);border:1px solid transparent;border-radius:var(--border-radius-small);cursor:text;transition:color .1s cubic-bezier(0,0,1,1),border-color .1s cubic-bezier(0,0,1,1),background-color .1s cubic-bezier(0,0,1,1);position:relative;display:inline-block;width:100%;padding-right:0;padding-left:0;overflow:hidden}.arco-textarea-wrapper:hover{background-color:var(--color-fill-3);border-color:transparent}.arco-textarea-wrapper:focus-within,.arco-textarea-wrapper.arco-textarea-focus{background-color:var(--color-bg-2);border-color:rgb(var(--primary-6));box-shadow:0 0 0 0 var(--color-primary-light-2)}.arco-textarea-wrapper.arco-textarea-disabled{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent;cursor:not-allowed}.arco-textarea-wrapper.arco-textarea-disabled:hover{color:var(--color-text-4);background-color:var(--color-fill-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-prefix,.arco-textarea-wrapper.arco-textarea-disabled .arco-textarea-suffix{color:inherit}.arco-textarea-wrapper.arco-textarea-error{background-color:var(--color-danger-light-1);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:hover{background-color:var(--color-danger-light-2);border-color:transparent}.arco-textarea-wrapper.arco-textarea-error:focus-within,.arco-textarea-wrapper.arco-textarea-error.arco-textarea-wrapper-focus{background-color:var(--color-bg-2);border-color:rgb(var(--danger-6));box-shadow:0 0 0 0 var(--color-danger-light-2)}.arco-textarea-wrapper .arco-textarea-prefix,.arco-textarea-wrapper .arco-textarea-suffix{display:inline-flex;flex-shrink:0;align-items:center;white-space:nowrap;user-select:none}.arco-textarea-wrapper .arco-textarea-prefix>svg,.arco-textarea-wrapper .arco-textarea-suffix>svg{font-size:14px}.arco-textarea-wrapper .arco-textarea-prefix{padding-right:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix{padding-left:12px;color:var(--color-text-2)}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon{display:inline-flex}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-validating{color:rgb(var(--primary-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-success{color:rgb(var(--success-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-warning{color:rgb(var(--warning-6))}.arco-textarea-wrapper .arco-textarea-suffix .arco-feedback-icon-status-error{color:rgb(var(--danger-6))}.arco-textarea-wrapper .arco-textarea-clear-btn{align-self:center;color:var(--color-text-2);font-size:12px;visibility:hidden;cursor:pointer}.arco-textarea-wrapper .arco-textarea-clear-btn>svg{position:relative;transition:color .1s cubic-bezier(0,0,1,1)}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{visibility:visible}.arco-textarea-wrapper:not(.arco-textarea-focus) .arco-textarea-icon-hover:hover:before{background-color:var(--color-fill-4)}.arco-textarea-wrapper .arco-textarea-word-limit{position:absolute;right:10px;bottom:6px;color:var(--color-text-3);font-size:12px;user-select:none}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-word-limit{right:25px}.arco-textarea-wrapper .arco-textarea-clear-btn{position:absolute;top:50%;right:10px;transform:translateY(-50%)}.arco-textarea-wrapper.arco-textarea-scroll .arco-textarea-clear-btn{right:25px}.arco-textarea-wrapper:hover .arco-textarea-clear-btn{display:block}.arco-textarea-wrapper .arco-textarea-mirror{position:absolute;visibility:hidden}.arco-textarea{width:100%;color:inherit;background:none;border:none;border-radius:0;outline:none;cursor:inherit;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:block;box-sizing:border-box;height:100%;min-height:32px;padding:4px 12px;font-size:14px;line-height:1.5715;vertical-align:top;resize:vertical}.arco-textarea::placeholder{color:var(--color-text-3)}.arco-textarea[disabled]::placeholder{color:var(--color-text-4)}.arco-textarea[disabled]{-webkit-text-fill-color:var(--color-text-4)}.message-content[data-v-cf02b953]{max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important}.arco-typography{color:var(--color-text-1);line-height:1.5715}h1.arco-typography,h2.arco-typography,h3.arco-typography,h4.arco-typography,h5.arco-typography,h6.arco-typography{margin-top:1em;margin-bottom:.5em;font-weight:500}h1.arco-typography{font-size:36px;line-height:1.23}h2.arco-typography{font-size:32px;line-height:1.25}h3.arco-typography{font-size:28px;line-height:1.29}h4.arco-typography{font-size:24px;line-height:1.33}h5.arco-typography{font-size:20px;line-height:1.4}h6.arco-typography{font-size:16px;line-height:1.5}div.arco-typography,p.arco-typography{margin-top:0;margin-bottom:1em}.arco-typography-primary{color:rgb(var(--primary-6))}.arco-typography-secondary{color:var(--color-text-2)}.arco-typography-success{color:rgb(var(--success-6))}.arco-typography-warning{color:rgb(var(--warning-6))}.arco-typography-danger{color:rgb(var(--danger-6))}.arco-typography-disabled{color:var(--color-text-4);cursor:not-allowed}.arco-typography mark{background-color:rgb(var(--yellow-4))}.arco-typography u{text-decoration:underline}.arco-typography del{text-decoration:line-through}.arco-typography b{font-weight:500}.arco-typography code{margin:0 2px;padding:2px 8px;color:var(--color-text-2);font-size:85%;background-color:var(--color-neutral-2);border:1px solid var(--color-neutral-3);border-radius:2px}.arco-typography blockquote{margin:0 0 1em;padding-left:8px;background-color:var(--color-bg-2);border-left:2px solid var(--color-neutral-6)}.arco-typography ol,.arco-typography ul{margin:0;padding:0}.arco-typography ul li,.arco-typography ol li{margin-left:20px}.arco-typography ul{list-style:circle}.arco-typography-spacing-close{line-height:1.3}.arco-typography-operation-copy,.arco-typography-operation-copied{margin-left:2px;padding:2px}.arco-typography-operation-copy{color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-copy:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-copied{color:rgb(var(--success-6))}.arco-typography-operation-edit{margin-left:2px;padding:2px;color:var(--color-text-2);background-color:transparent;border-radius:2px;cursor:pointer;transition:background-color .1s cubic-bezier(0,0,1,1)}.arco-typography-operation-edit:hover{color:var(--color-text-2);background-color:var(--color-fill-2)}.arco-typography-operation-expand{margin:0 4px;color:rgb(var(--primary-6));cursor:pointer}.arco-typography-operation-expand:hover{color:rgb(var(--primary-5))}.arco-typography-edit-content{position:relative;left:-13px;margin-top:-5px;margin-right:-13px;margin-bottom:calc(1em - 5px)}.arco-typography-css-operation{margin-top:-1em;margin-bottom:1em;text-align:right}.chat-wrapper{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-flex:1!important;-ms-flex:1 1 0%!important;-webkit-flex:1 1 0%!important;flex:1 1 0%!important;overflow:hidden!important}.chat-wrapper .message-item{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:start!important;-ms-flex-align:start!important;-webkit-align-items:flex-start!important;align-items:flex-start!important;justify-items:start!important;padding-left:0!important;grid-gap:.5rem!important;gap:.5rem!important;max-width:75%!important}.chat-wrapper .message-item.is-request{-webkit-box-align:end!important;-ms-flex-align:end!important;-webkit-align-items:flex-end!important;align-items:flex-end!important;margin-left:auto!important;max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important;padding-left:2.5rem!important}.chat-wrapper .message-item .message-item__content{border-radius:.5rem!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;font-size:.875rem!important;line-height:1.25rem!important;max-width:-webkit-max-content!important;max-width:-moz-max-content!important;max-width:max-content!important;padding:.75rem 1rem!important;position:relative!important}.chat-wrapper .message-item .message-item__content.is-user{--tw-bg-opacity: 1 !important;background-color:rgba(16,163,127,var(--tw-bg-opacity))!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;--tw-text-opacity: 1 !important;color:rgba(255,255,255,var(--tw-text-opacity))!important}.chat-wrapper .message-item .message-item__content.is-assistant{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important}.dark .chat-wrapper .message-item .message-item__content.is-assistant{--tw-bg-opacity: 1 !important;background-color:rgba(35,35,36,var(--tw-bg-opacity))!important}.chat-wrapper .message-item .message-item__actions{display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-align:center!important;-ms-flex-align:center!important;-webkit-align-items:center!important;align-items:center!important;opacity:0!important;padding-left:1rem!important;position:absolute!important;top:-2.25rem!important;right:2rem!important;-webkit-column-gap:.25rem!important;-moz-column-gap:.25rem!important;grid-column-gap:.25rem!important;column-gap:.25rem!important;-webkit-transition-property:all!important;-o-transition-property:all!important;transition-property:all!important;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-o-transition-timing-function:cubic-bezier(.4,0,.2,1)!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-webkit-transition-duration:.15s!important;-o-transition-duration:.15s!important;transition-duration:.15s!important;-webkit-transition-duration:.5s!important;-o-transition-duration:.5s!important;transition-duration:.5s!important}.chat-wrapper .message-item:hover .message-item__actions{opacity:1!important;right:0px!important}.chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(255,255,255,var(--tw-bg-opacity))!important;display:-webkit-box!important;display:-ms-flexbox!important;display:-webkit-flex!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;-webkit-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-ms-flex-align:center!important;-webkit-align-items:center!important;align-items:center!important;-webkit-box-pack:end!important;-ms-flex-pack:end!important;-webkit-justify-content:flex-end!important;justify-content:flex-end!important;padding:.75rem 1rem .5rem .5rem!important;position:relative!important;width:100%!important}.dark .chat-footer{--tw-bg-opacity: 1 !important;background-color:rgba(23,23,26,var(--tw-bg-opacity))!important}.chat-footer .stop-receiving{position:absolute!important;top:-3rem!important}\n",document.head.appendChild($e),{setters:[e=>{o=e.g,a=e.R,r=e.I,n=e.h,i=e.t,l=e.i,p=e.u,c=e.r,s=e.j,d=e.k,u=e.l,m=e.m,x=e.n,g=e.q,v=e.s,y=e.v,b=e.x,h=e.y,f=e.z,w=e.A,k=e.C,C=e.D,T=e.o,z=e.E,E=e.F,S=e.G,_=e.H,$=e.J,B=e.b,R=e.w,j=e.a,I=e.K,O=e.L,P=e.M,L=e.N,A=e.O,H=e.P,N=e.T,M=e.Q,q=e.U,V=e.V,D=e.W,F=e.c,K=e.X,W=e.d,U=e.Y,Y=e.Z,G=e.$,J=e.a0,Q=e.a1,X=e.a2,Z=e.a3,ee=e.a4,te=e.a5,oe=e.a6,ae=e.a7,re=e.a8,ne=e._,ie=e.a9,le=e.aa,pe=e.ab,ce=e.ac,se=e.ad,de=e.ae,ue=e.af,me=e.ag,xe=e.ah,ge=e.ai,ve=e.aj,ye=e.ak,be=e.B,he=e.S,fe=e.al,we=e.am,ke=e.an,Ce=e.ao,Te=e.ap},e=>{ze=e.M,Ee=e.H,Se=e.m,_e=e.a}],execute:function(){const t=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],$e=o({name:"Textarea",components:{ResizeObserver:a,IconHover:r,IconClose:n},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:o,attrs:a}){const{disabled:r,error:n,modelValue:y}=i(e),C=l("textarea"),{mergedDisabled:T,mergedError:z,eventHandlers:E}=p({disabled:r,error:n}),S=c(),_=c(),$=c(),B=c(),R=c(e.defaultValue),j=s((()=>{var e;return null!=(e=y.value)?e:R.value})),[I,O]=d(S);u(y,(e=>{(m(e)||x(e))&&(R.value="")}));const P=s((()=>g(e.maxLength)&&Boolean(e.maxLength.errorOnly))),L=s((()=>g(e.maxLength)?e.maxLength.length:e.maxLength)),A=t=>{var o;return b(e.wordLength)?e.wordLength(t):null!=(o=t.length)?o:0},H=s((()=>A(j.value))),N=s((()=>z.value||Boolean(L.value&&P.value&&H.value>L.value))),M=c(!1),q=c(!1),V=s((()=>e.allowClear&&!T.value&&j.value)),D=c(!1),F=c(""),K=()=>{I(),k((()=>{S.value&&j.value!==S.value.value&&(S.value.value=j.value,O())}))},W=(t,a=!0)=>{var r,n;L.value&&!P.value&&A(t)>L.value&&(t=null!=(n=null==(r=e.wordSlice)?void 0:r.call(e,t,L.value))?n:t.slice(0,L.value)),R.value=t,a&&o("update:modelValue",t),K()};let U=j.value;const Y=(e,t)=>{var a,r;e!==U&&(U=e,o("change",e,t),null==(r=null==(a=E.value)?void 0:a.onChange)||r.call(a,t))};u(y,(e=>{e!==j.value&&W(null!=e?e:"",!1)}));const G=s((()=>[`${C}-wrapper`,{[`${C}-focus`]:q.value,[`${C}-disabled`]:T.value,[`${C}-error`]:N.value,[`${C}-scroll`]:M.value}]));let J;const Q=c(0),X=c(0),Z=s((()=>g(e.autoSize)&&e.autoSize.minRows?e.autoSize.minRows*Q.value+X.value:0)),ee=s((()=>g(e.autoSize)&&e.autoSize.maxRows?e.autoSize.maxRows*Q.value+X.value:0)),te=()=>{const e=(e=>{const o={};return t.forEach((t=>{o[t]=e.getPropertyValue(t)})),o})(J);Q.value=Number.parseInt(e["line-height"]||0,10),X.value=2*Number.parseInt(e["border-width"]||0,10)+Number.parseInt(e["padding-top"]||0,10)+Number.parseInt(e["padding-bottom"]||0,10),B.value=e,k((()=>{var e;const t=null==(e=$.value)?void 0:e.offsetHeight;let o=null!=t?t:0,a="hidden";Z.value&&o<Z.value&&(o=Z.value),ee.value&&o>ee.value&&(o=ee.value,a="auto"),_.value={height:`${o}px`,resize:"none",overflow:a}}))};v((()=>{S.value&&(J=window.getComputedStyle(S.value),e.autoSize&&te()),oe()}));const oe=()=>{S.value&&(S.value.scrollHeight>S.value.offsetHeight?M.value||(M.value=!0):M.value&&(M.value=!1))};return u(j,(()=>{e.autoSize&&$.value&&te(),oe()})),{prefixCls:C,wrapperCls:G,textareaRef:S,textareaStyle:_,mirrorRef:$,mirrorStyle:B,computedValue:j,showClearBtn:V,valueLength:H,computedMaxLength:L,mergedDisabled:T,getWrapperAttrs:e=>h(a,f),getTextareaAttrs:e=>w(a,f),handleInput:e=>{var t,a;const{value:r}=e.target;if(D.value)F.value=r;else{if(L.value&&!P.value&&j.value.length>=L.value&&A(r)>L.value&&"insertText"===e.inputType)return void K();o("input",r,e),W(r),null==(a=null==(t=E.value)?void 0:t.onInput)||a.call(t,e)}},handleFocus:e=>{var t,a;q.value=!0,U=j.value,o("focus",e),null==(a=null==(t=E.value)?void 0:t.onFocus)||a.call(t,e)},handleBlur:e=>{var t,a;q.value=!1,o("blur",e),null==(a=null==(t=E.value)?void 0:t.onBlur)||a.call(t,e),Y(j.value,e)},handleComposition:e=>{var t,a;const{value:r}=e.target;if("compositionend"===e.type){if(D.value=!1,F.value="",L.value&&!P.value&&j.value.length>=L.value&&A(r)>L.value)return void K();o("input",r,e),W(r),null==(a=null==(t=E.value)?void 0:t.onInput)||a.call(t,e)}else D.value=!0},handleClear:e=>{W(""),Y("",e),o("clear",e)},handleResize:()=>{e.autoSize&&$.value&&te(),oe()},handleMousedown:e=>{S.value&&e.target!==S.value&&(e.preventDefault(),S.value.focus())}}},methods:{focus(){var e;null==(e=this.$refs.textareaRef)||e.focus()},blur(){var e;null==(e=this.$refs.textareaRef)||e.blur()}}}),Be=["disabled","value","placeholder"];var Re=y($e,[["render",function(e,t,o,a,r,n){const i=C("resize-observer"),l=C("icon-close"),p=C("icon-hover");return T(),z("div",I(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...t)=>e.handleMousedown&&e.handleMousedown(...t))}),[e.autoSize?(T(),z("div",{key:0,ref:"mirrorRef",class:E(`${e.prefixCls}-mirror`),style:S(e.mirrorStyle)},_(`${e.computedValue}\n`),7)):$("v-if",!0),B(i,{onResize:e.handleResize},{default:R((()=>[j("textarea",I({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...t)=>e.handleInput&&e.handleInput(...t)),onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onCompositionstart:t[3]||(t[3]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionupdate:t[4]||(t[4]=(...t)=>e.handleComposition&&e.handleComposition(...t)),onCompositionend:t[5]||(t[5]=(...t)=>e.handleComposition&&e.handleComposition(...t))}),null,16,Be)])),_:1},8,["onResize"]),O(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(T(),z("div",{key:1,class:E(`${e.prefixCls}-word-limit`)},_(e.valueLength)+"/"+_(e.computedMaxLength),3)):$("v-if",!0),e.showClearBtn?(T(),z("div",{key:2,class:E(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...t)=>e.handleClear&&e.handleClear(...t))},[B(p,null,{default:R((()=>[B(l)])),_:1})],2)):$("v-if",!0)],16)}]]);const je=Object.assign(Re,{install:(e,t)=>{P(e,t);const o=L(t);e.component(o+Re.name,Re)}}),Ie=o({name:"TypographyEditContent",components:{Input:A},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const o=[`${l("typography")}-edit-content`],a=c();function r(){t("end")}return v((()=>{if(!a.value||!a.value.$el)return;const e=a.value.$el.querySelector("input");if(!e)return;e.focus&&e.focus();const{length:t}=e.value;e.setSelectionRange(t,t)})),{classNames:o,inputRef:a,onBlur:r,onChange:function(e){t("update:text",e),t("change",e)},onEnd:r}}});var Oe=y(Ie,[["render",function(e,t,o,a,r,n){const i=C("Input");return T(),z("div",{class:E(e.classNames)},[B(i,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:H(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}]]);const Pe=o({name:"TypographyOperations",components:{Tooltip:N,IconCheckCircleFill:M,IconCopy:q,IconEdit:V},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const o=l("typography"),a=s((()=>e.forceRenderExpand||e.expandable&&e.isEllipsis)),{t:r}=D();return{prefixCls:o,showExpand:a,t:r,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});var Le=y(Pe,[["render",function(e,t,o,a,r,n){const i=C("IconEdit"),l=C("Tooltip"),p=C("IconCheckCircleFill"),c=C("IconCopy");return T(),z(Y,null,[e.editable?(T(),F(l,I({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:R((()=>[j("span",{class:E(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=K(((...t)=>e.onEditClick&&e.onEditClick(...t)),["stop"]))},[B(i)],2)])),_:1},16,["content"])):$("v-if",!0),e.copyable?(T(),F(l,U(I({key:1},e.copyTooltipProps)),{content:R((()=>[O(e.$slots,"copy-tooltip",{copied:e.isCopied},(()=>[W(_(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)]))])),default:R((()=>[j("span",{class:E({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=K(((...t)=>e.onCopyClick&&e.onCopyClick(...t)),["stop"]))},[O(e.$slots,"copy-icon",{copied:e.isCopied},(()=>[e.isCopied?(T(),F(p,{key:0})):(T(),F(c,{key:1}))]))],2)])),_:3},16)):$("v-if",!0),e.showExpand?(T(),z("a",{key:2,class:E(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=K(((...t)=>e.onExpandClick&&e.onExpandClick(...t)),["stop"]))},[O(e.$slots,"expand-node",{expanded:e.expanded},(()=>[W(_(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)]))],2)):$("v-if",!0)],64)}]]);let Ae;function He(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var Ne=(e,t,o,a)=>{Ae||(Ae=document.createElement("div"),document.body.appendChild(Ae));const{rows:r,suffix:n,ellipsisStr:i}=t,l=window.getComputedStyle(e),p=(c=l,Array.prototype.slice.apply(c).map((e=>`${e}: ${c.getPropertyValue(e)};`)).join(""));var c;const s=He(l.lineHeight),d=Math.round(s*r+He(l.paddingTop)+He(l.paddingBottom));Ae.setAttribute("style",p),Ae.setAttribute("aria-hidden","true"),Ae.style.height="auto",Ae.style.minHeight="auto",Ae.style.maxHeight="auto",Ae.style.position="fixed",Ae.style.left="0",Ae.style.top="-99999999px",Ae.style.zIndex="-200",Ae.style.whiteSpace="normal";const u=G({render:()=>B("span",null,[o])});u.mount(Ae);const m=Array.prototype.slice.apply(Ae.childNodes[0].cloneNode(!0).childNodes);u.unmount(),Ae.innerHTML="";const x=document.createTextNode(`${i}${n}`);Ae.appendChild(x),m.forEach((e=>{Ae.appendChild(e)}));const g=document.createTextNode(a);function v(){return Ae.offsetHeight<=d}return Ae.insertBefore(g,x),v()?{ellipsis:!1,text:a}:(function e(t,o=0,r=a.length,n=0){const i=Math.floor((o+r)/2),l=a.slice(0,i);if(t.textContent=l,o>=r-1)for(let p=r;p>=o;p-=1){const e=a.slice(0,p);if(t.textContent=e,v()||!e)return}v()?e(t,i,r,i):e(t,o,i,n)}(g),{text:g.textContent,ellipsis:!0})};let Me;var qe=Object.defineProperty,Ve=Object.defineProperties,De=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,Ue=(e,t,o)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;function Ye(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!te(e)}function Ge(e,t){const{mark:o}=e,a=function(e){const{bold:t,mark:o,underline:a,delete:r,code:n}=e,i=[];return t&&i.push("b"),a&&i.push("u"),r&&i.push("del"),n&&i.push("code"),o&&i.push("mark"),i}(e),r=g(o)&&o.color?{backgroundColor:o.color}:{};return a.reduce(((e,t)=>B(t,"mark"===t?{style:r}:{},Ye(e)?e:{default:()=>[e]})),t)}function Je(e){const t=!!e.showTooltip,o=g(e.showTooltip)&&"popover"===e.showTooltip.type?oe:N,a=g(e.showTooltip)&&e.showTooltip.props||{};return r=((e,t)=>{for(var o in t||(t={}))Ke.call(t,o)&&Ue(e,o,t[o]);if(Fe)for(var o of Fe(t))We.call(t,o)&&Ue(e,o,t[o]);return e})({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},h(e,["showTooltip"])),Ve(r,De({showTooltip:t,TooltipComponent:o,tooltipProps:a}));var r}var Qe=o({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:o,attrs:r}){const{editing:n,defaultEditing:p,ellipsis:d,copyable:m,editable:x,copyText:y,editText:b,copyDelay:h,component:f}=i(e),w=l("typography"),k=s((()=>[w,{[`${w}-${e.type}`]:e.type,[`${w}-disabled`]:e.disabled}])),C=c(),T=c(""),[z,E]=J(p.value,Q({value:n})),S=s((()=>x.value&&z.value));function _(){o("update:editing",!0),o("editStart"),E(!0)}function $(){z.value&&(o("update:editing",!1),o("editEnd"),E(!1))}const R=c(!1);let j=null;function O(){var e;const t=null!=(e=y.value)?e:T.value;(async e=>{var t;if(null==(t=navigator.clipboard)?void 0:t.writeText)try{return void(await navigator.clipboard.writeText(e))}catch(n){console.error(null!=n?n:new DOMException("The request is not allowed","NotAllowedError"))}const o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre",document.body.appendChild(o);const a=window.getSelection(),r=window.document.createRange();null==a||a.removeAllRanges(),r.selectNode(o),null==a||a.addRange(r);try{window.document.execCommand("copy")}catch(n){console.error(`execCommand Error: ${n}`)}null==a||a.removeAllRanges(),window.document.body.removeChild(o)})(t||""),R.value=!0,o("copy",t),j=setTimeout((()=>{R.value=!1}),h.value)}X((()=>{j&&clearTimeout(j),j=null}));const P=c(!1),L=c(!1),A=c(""),H=s((()=>Je(g(d.value)&&d.value||{})));let N=null;function M(){const e=!L.value;L.value=e,o("expand",e)}function q(o=!1){return H.value.css?B(Le,{editable:x.value,copyable:m.value,expandable:H.value.expandable,isCopied:R.value,isEllipsis:W.value,expanded:L.value,forceRenderExpand:o||L.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:_,onCopy:O,onExpand:M},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):B(Le,{editable:x.value,copyable:m.value,expandable:H.value.expandable,isCopied:R.value,isEllipsis:P.value,expanded:L.value,forceRenderExpand:o,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:_,onCopy:O,onExpand:M},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function V(){d.value&&!L.value&&(Z(N),N=ae((()=>{!function(){if(!C.value)return;const{ellipsis:e,text:t}=Ne(C.value,H.value,q(!!H.value.expandable),T.value);P.value!==e&&(P.value=e,H.value.css||o("ellipsis",e)),A.value!==t&&(A.value=t||"")}()})))}X((()=>{Z(N)})),u((()=>H.value.rows),(()=>{V()})),u(d,(e=>{e?V():P.value=!1}));let D=[];const F=()=>{if(d.value||m.value||x.value){const e=function(e){if(!e)return"";Me||(Me=document.createElement("div"),Me.setAttribute("aria-hidden","true"),document.body.appendChild(Me));const t=G({render:()=>B("div",null,[e])});t.mount(Me);const o=Me.innerText;return t.unmount(),o}(D);e!==T.value&&(T.value=e,V())}};v(F),ee(F);const K=c(),W=c(!1),U=()=>{if(C.value&&K.value){const e=K.value.offsetHeight>C.value.offsetHeight;e!==W.value&&(W.value=e,o("ellipsis",e))}},Y=s((()=>L.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":H.value.rows,"-webkit-box-orient":"vertical"}));return()=>{var n,i;if(D=(null==(n=t.default)?void 0:n.call(t))||[],S.value){const e=null!=(i=b.value)?i:T.value;return B(Oe,{text:e,onChange:t=>{t!==e&&function(e){o("update:editText",e),o("change",e)}(t)},onEnd:$},null)}const{suffix:l,ellipsisStr:p,showTooltip:c,tooltipProps:s,TooltipComponent:d}=H.value,u=P.value&&!L.value,m=u&&!c?{title:T.value}:{},x=f.value;if(H.value.css){const t=Ge(e,D),o=B(x,I({class:k.value,ref:C,style:Y.value},m,r),{default:()=>[B("span",{ref:K},[t])]});return W.value?B(d,I(s,{onResize:()=>U()}),{default:()=>[o],content:()=>T.value}):B(a,{onResize:()=>{U()}},Ye(o)?o:{default:()=>[o]})}const g=Ge(e,u?A.value:D);return B(a,{onResize:()=>V()},{default:()=>[B(x,I({class:k.value,ref:C},m,r),{default:()=>[u&&c?B(d,s,{default:()=>[B("span",null,[g])],content:()=>T.value}):g,u?p:null,l,q()]})]})}}}),Xe=o({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:o}=i(e),a=l("typography");return{component:s((()=>(null==t?void 0:t.value)?"blockquote":"div")),classNames:s((()=>[{[`${a}-spacing-close`]:"close"===(null==o?void 0:o.value)}]))}},render(){const{component:e,classNames:t}=this;return B(Qe,I({class:t},this.$attrs,{component:e}),this.$slots)}});const Ze={key:0,class:"dark:text-white w-[4px] h-[20px] block animate-blink"},et={key:0},tt=["innerHTML"],ot=["textContent"],at=["textContent"],rt=o({__name:"MessageContent",props:{inversion:{type:Boolean},error:{type:Boolean},text:null,loading:{type:Boolean},asRawText:{type:Boolean}},setup(e){const t=e,o=c(),a=new ze({linkify:!0,highlight(e,t){if(t&&Ee.getLanguage(t)){const o=t??"";return i(Ee.highlight(e,{language:o}).value,o)}return i(Ee.highlightAuto(e).value,"")}});a.use(Se,{attrs:{target:"_blank",rel:"noopener"}}),a.use(_e,{blockClass:"katexmath-block rounded-md p-[10px]",errorColor:" #cc0000"});const r=s((()=>["message-content","min-w-[20px]","rounded-md",t.inversion?"text-[#f1f1f1]":"bg-[#e5e6eb]",t.inversion?"text-[]":"dark:bg-[#1e1e20]",t.inversion?"message-request":"message-reply",{"text-red-500":t.error}])),n=s((()=>{const e=(t.text??"").replace(/\n+$/g,"");return t.asRawText||t.inversion?e:a.render(e)}));function i(e,t){return`<pre class="code-block-wrapper"><div class="code-block-header"><span class="code-block-header__lang">${t}</span><span class="code-block-header__copy">复制代码</span></div><code class="hljs code-block-body ${t}">${e}</code></pre>`}return ee((()=>{k((()=>{o.value&&Ee.highlightBlock(o.value)}))})),(t,a)=>(T(),z("div",{class:E(re(r))},[e.loading?(T(),z("span",Ze)):(T(),z("div",{key:1,ref_key:"textRef",ref:o,class:"leading-relaxed break-words"},[e.inversion?(T(),z("div",{key:1,class:"whitespace-pre-wrap",textContent:_(re(n))},null,8,at)):(T(),z("div",et,[e.asRawText?(T(),z("div",{key:1,class:"whitespace-pre-wrap",textContent:_(re(n))},null,8,ot)):(T(),z("div",{key:0,class:"markdown-body",innerHTML:re(n)},null,8,tt))]))],512))],2))}}),nt=ne(rt,[["__scopeId","data-v-cf02b953"]]);function it(e){const t={origin:!0,...e};let o;o=t.origin?document.createElement("textarea"):document.createElement("input"),o.setAttribute("readonly","readonly"),o.value=t.text,document.body.appendChild(o),o.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(o)}const lt={key:0,class:"flex-1"},pt={class:"chat-wrapper"},ct=["src"],st={key:0,class:"text-info"},dt={key:0,class:"message-item__actions"},ut={class:"chat-footer"};e("default",o({__name:"ChatView",setup(e){!function(){function e(){document.querySelectorAll(".code-block-wrapper").forEach((e=>{const t=e.querySelector(".code-block-header__copy"),o=e.querySelector(".code-block-body");t&&o&&t.addEventListener("click",(()=>{navigator.clipboard?.writeText?(navigator.clipboard.writeText(o.textContent??""),ie.clear(),ie.success("复制成功")):(it({text:o.textContent??"",origin:!0}),ie.clear(),ie.success("复制成功"))}))}))}v((()=>e())),ee((()=>e()))}();const t=le(),o=pe(),a=s((()=>t.session)),{isMobileScreen:r}=ce(),n=c(!1),i={user:we,assistant:"/assets/openai-white-1b79b841.svg"},l=c(),p=c("新的聊天");se((()=>{p.value=t.session?.topic||"新的聊天"}));const d=c(""),u=c(),m=()=>{if(e=d.value,/^[\s\n\r]*$/.test(e))return ie.clear(),void ie.error("请输入消息内容");var e;n.value=!1,t.sendMessageAction(d.value,(()=>{n.value||l.value?.scrollTop((l.value?.containerRef?.scrollHeight??0)-200)}),(e=>{u.value=e})),d.value=""},x=e=>{e.deltaY<10&&(n.value=!0)};v((()=>{k((()=>{console.log(l.value?.$el),l.value?.scrollTop((l.value?.containerRef?.scrollHeight??0)-200),l.value?.$el.querySelector(".arco-scrollbar-container").addEventListener("wheel",x)}))}));const g=e=>{(e?.target?.scrollTop||0)+(e?.target?.offsetHeight||0)>=(e?.target?.scrollHeight||0)-70&&(n.value=!1)};X((()=>{l.value?.$el.querySelector(".arco-scrollbar-container").removeEventListener("wheel",x)}));const y=()=>{t.handleChangeSessionTopicAction(p.value)},b=e=>{r.value?"Enter"===e.key&&(e.preventDefault(),m()):"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m())},h=s((()=>`请输入您的消息，${o.submitKey} 发送，${o.submitKey===ke.Enter?ke.ShiftEnter:ke.Enter} 换行`));return(e,o)=>{const c=Xe,s=me,m=xe,x=ge,v=ve,f=ye,w=Ce,k=Te,S=C("icon-copy"),I=be,O=N,P=C("icon-sync"),L=nt,A=he,H=C("icon-record-stop"),M=je,q=fe;return T(),z(Y,null,[B(v,{class:"h-14 px-4 flex items-center bg-white dark:bg-dark"},{default:R((()=>[j("div",{class:E(["flex flex-col editable-title__wrapper",{"is-mobile":re(r)}])},[B(c,{class:"m-0",editable:"",editText:re(p),"onUpdate:editText":o[0]||(o[0]=e=>de(p)?p.value=e:null),onEditEnd:y},{default:R((()=>[W(_(re(p)),1)])),_:1},8,["editText"])],2),re(r)?$("",!0):(T(),z("i",lt)),re(r)?$("",!0):(T(),F(x,{key:1},{default:R((()=>[B(s,{class:"w-44"}),B(m,{class:"w-60"})])),_:1}))])),_:1}),B(f,{class:"m-0"}),B(q,{class:"flex flex-col flex-1 overflow-hidden"},{default:R((()=>[j("main",pt,[B(A,{ref_key:"scrollbarRef",ref:l,onScroll:g,"outer-style":"flex: 1; overflow: hidden; ",class:"overflow-y-auto h-full p-4 flex flex-col gap-y-2 pb-20"},{default:R((()=>[(T(!0),z(Y,null,ue(re(a)?.messages??[],((e,o)=>(T(),z("section",{key:e.id,class:E(["message-item",["assistant"===e.role?"is-reply":"is-request"]])},[B(k,{loading:e.streaming&&"assistant"===e.role},{default:R((()=>[B(w,{size:32,class:E("assistant"===e.role?"bg-primary p-2":"bg-success")},{default:R((()=>[j("img",{src:i[e.role]??""},null,8,ct)])),_:2},1032,["class"])])),_:2},1032,["loading"]),e.streaming&&"assistant"===e.role?(T(),z("small",st," 正在输入... ")):$("",!0),j("section",{class:E(["message-item__content",{"is-user":"user"===e.role},{"is-assistant":"assistant"===e.role}])},["assistant"===e.role?(T(),z("div",dt,[B(O,{"content-class":"text-xs",content:"复制",position:"top"},{default:R((()=>[B(I,{onClick:t=>(it({text:e.content}),ie.clear(),void ie.success("复制成功")),size:"mini",shape:"circle",type:"text"},{default:R((()=>[B(S,{class:"text-base"})])),_:2},1032,["onClick"])])),_:2},1024),B(O,{"content-class":"text-xs",content:"重试",position:"top"},{default:R((()=>[B(I,{onClick:e=>(e=>{n.value=!1,t.messageRetryAction(e,(()=>{n.value||l.value?.scrollTop((l.value?.containerRef?.scrollHeight??0)-200)}),(e=>{u.value=e}))})(o),size:"mini",shape:"circle",type:"text"},{default:R((()=>[B(P,{class:"text-base"})])),_:2},1032,["onClick"])])),_:2},1024)])):$("",!0),(T(),F(L,{key:e.content,text:e.content,inversion:"assistant"!==e.role},null,8,["text","inversion"]))],2)],2)))),128))])),_:1},512),B(f,{class:"m-0"}),j("footer",ut,[re(t).fetching?(T(),F(I,{key:0,onClick:o[1]||(o[1]=e=>re(u)?.abort()),shape:"round",status:"danger",class:"stop-receiving"},{default:R((()=>[B(H,{class:"text-lg mr-2"}),W(" 停止 ")])),_:1})):$("",!0),B(M,{modelValue:re(d),"onUpdate:modelValue":o[2]||(o[2]=e=>de(d)?d.value=e:null),onKeypress:b,class:"bg-white dark:bg-dark-900 border-none","auto-size":{minRows:4,maxRows:6},placeholder:re(h)},null,8,["modelValue","placeholder"])])])])),_:1})],64)}}}))}}}));
